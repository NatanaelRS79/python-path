import { Module, Exercise, SocraticExplanation } from '@/types/learning';

export const curriculum: Module[] = [
  {
    id: 'py-fundamentals',
    title: 'Fundamentos do Python',
    description: 'Por que programar? Entenda a lÃ³gica por trÃ¡s de tudo.',
    icon: 'ðŸ',
    category: 'python-basics',
    unlocked: true,
    completed: false,
    masteryPercentage: 0,
    lessons: [
      {
        id: 'py-fund-1',
        title: 'O que Ã© programaÃ§Ã£o?',
        description: 'Antes de escrever cÃ³digo, entenda por que ele existe.',
        type: 'concept',
        difficulty: 'beginner',
        xpReward: 50,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'py-fund-2',
        title: 'VariÃ¡veis: Dando nomes Ã s coisas',
        description: 'Por que precisamos guardar informaÃ§Ãµes?',
        type: 'concept',
        difficulty: 'beginner',
        xpReward: 75,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'py-fund-3',
        title: 'Tipos de dados',
        description: 'Por que o computador diferencia nÃºmeros de textos?',
        type: 'concept',
        difficulty: 'beginner',
        xpReward: 100,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'py-fund-4',
        title: 'Desafio: Primeiros passos',
        description: 'Aplique o que aprendeu em exercÃ­cios prÃ¡ticos.',
        type: 'exercise',
        difficulty: 'beginner',
        xpReward: 150,
        completed: false,
        masteryLevel: 0,
      },
    ],
  },
  {
    id: 'py-logic',
    title: 'LÃ³gica e DecisÃµes',
    description: 'Como o computador toma decisÃµes? Condicionais e lÃ³gica.',
    icon: 'ðŸ”€',
    category: 'python-basics',
    unlocked: false,
    completed: false,
    masteryPercentage: 0,
    lessons: [
      {
        id: 'py-logic-1',
        title: 'Condicionais: if, elif, else',
        description: 'Por que precisamos que programas tomem decisÃµes?',
        type: 'concept',
        difficulty: 'beginner',
        xpReward: 100,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'py-logic-2',
        title: 'Operadores lÃ³gicos',
        description: 'AND, OR, NOT - combinando condiÃ§Ãµes.',
        type: 'concept',
        difficulty: 'beginner',
        xpReward: 100,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'py-logic-3',
        title: 'ComparaÃ§Ãµes e verdades',
        description: 'Como o Python avalia verdadeiro e falso?',
        type: 'concept',
        difficulty: 'intermediate',
        xpReward: 125,
        completed: false,
        masteryLevel: 0,
      },
    ],
  },
  {
    id: 'py-loops',
    title: 'RepetiÃ§Ãµes e Loops',
    description: 'Automatize tarefas repetitivas com elegÃ¢ncia.',
    icon: 'ðŸ”„',
    category: 'python-basics',
    unlocked: false,
    completed: false,
    masteryPercentage: 0,
    lessons: [
      {
        id: 'py-loops-1',
        title: 'For loops: iterando sobre sequÃªncias',
        description: 'Por que repetir manualmente quando o cÃ³digo pode fazer?',
        type: 'concept',
        difficulty: 'beginner',
        xpReward: 100,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'py-loops-2',
        title: 'While loops: repetindo enquanto...',
        description: 'Quando nÃ£o sabemos quantas vezes repetir.',
        type: 'concept',
        difficulty: 'intermediate',
        xpReward: 125,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'py-loops-3',
        title: 'List comprehensions',
        description: 'A forma Pythonica de criar listas.',
        type: 'concept',
        difficulty: 'intermediate',
        xpReward: 150,
        completed: false,
        masteryLevel: 0,
      },
    ],
  },
  {
    id: 'py-structures',
    title: 'Estruturas de Dados',
    description: 'Listas, dicionÃ¡rios, tuplas - organizando informaÃ§Ãµes.',
    icon: 'ðŸ“¦',
    category: 'python-intermediate',
    unlocked: false,
    completed: false,
    masteryPercentage: 0,
    lessons: [
      {
        id: 'py-struct-1',
        title: 'Listas: coleÃ§Ãµes ordenadas',
        description: 'Por que precisamos agrupar dados?',
        type: 'concept',
        difficulty: 'beginner',
        xpReward: 100,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'py-struct-2',
        title: 'DicionÃ¡rios: chave-valor',
        description: 'Quando a posiÃ§Ã£o nÃ£o importa, mas o nome sim.',
        type: 'concept',
        difficulty: 'intermediate',
        xpReward: 125,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'py-struct-3',
        title: 'Sets e Tuplas',
        description: 'Imutabilidade e unicidade.',
        type: 'concept',
        difficulty: 'intermediate',
        xpReward: 125,
        completed: false,
        masteryLevel: 0,
      },
    ],
  },
  {
    id: 'py-functions',
    title: 'FunÃ§Ãµes',
    description: 'Reutilize cÃ³digo, organize pensamentos.',
    icon: 'âš™ï¸',
    category: 'python-intermediate',
    unlocked: false,
    completed: false,
    masteryPercentage: 0,
    lessons: [
      {
        id: 'py-func-1',
        title: 'Definindo funÃ§Ãµes',
        description: 'Por que nÃ£o repetir cÃ³digo?',
        type: 'concept',
        difficulty: 'beginner',
        xpReward: 100,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'py-func-2',
        title: 'ParÃ¢metros e retorno',
        description: 'Entrada, processamento, saÃ­da.',
        type: 'concept',
        difficulty: 'intermediate',
        xpReward: 125,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'py-func-3',
        title: 'Escopo de variÃ¡veis',
        description: 'Onde uma variÃ¡vel vive?',
        type: 'concept',
        difficulty: 'intermediate',
        xpReward: 150,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'py-func-4',
        title: 'Lambda e funÃ§Ãµes anÃ´nimas',
        description: 'FunÃ§Ãµes curtas para situaÃ§Ãµes especÃ­ficas.',
        type: 'concept',
        difficulty: 'advanced',
        xpReward: 175,
        completed: false,
        masteryLevel: 0,
      },
    ],
  },
  {
    id: 'pandas-intro',
    title: 'IntroduÃ§Ã£o ao Pandas',
    description: 'A biblioteca que transformou anÃ¡lise de dados.',
    icon: 'ðŸ¼',
    category: 'pandas-basics',
    unlocked: false,
    completed: false,
    masteryPercentage: 0,
    lessons: [
      {
        id: 'pd-intro-1',
        title: 'Por que Pandas existe?',
        description: 'O problema que Pandas resolve.',
        type: 'concept',
        difficulty: 'beginner',
        xpReward: 100,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'pd-intro-2',
        title: 'Series: a coluna fundamental',
        description: 'Entendendo o bloco bÃ¡sico do Pandas.',
        type: 'concept',
        difficulty: 'beginner',
        xpReward: 100,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'pd-intro-3',
        title: 'DataFrame: a tabela poderosa',
        description: 'Como o Pandas organiza dados tabulares.',
        type: 'concept',
        difficulty: 'beginner',
        xpReward: 125,
        completed: false,
        masteryLevel: 0,
      },
    ],
  },
  {
    id: 'pandas-manipulation',
    title: 'ManipulaÃ§Ã£o de Dados',
    description: 'SeleÃ§Ã£o, filtros e transformaÃ§Ãµes.',
    icon: 'ðŸ”§',
    category: 'pandas-basics',
    unlocked: false,
    completed: false,
    masteryPercentage: 0,
    lessons: [
      {
        id: 'pd-manip-1',
        title: 'Selecionando dados: loc e iloc',
        description: 'Por nome ou por posiÃ§Ã£o?',
        type: 'concept',
        difficulty: 'beginner',
        xpReward: 125,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'pd-manip-2',
        title: 'Filtros booleanos',
        description: 'Encontrando exatamente o que vocÃª precisa.',
        type: 'concept',
        difficulty: 'intermediate',
        xpReward: 150,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'pd-manip-3',
        title: 'Criando e modificando colunas',
        description: 'Transformando dados existentes.',
        type: 'concept',
        difficulty: 'intermediate',
        xpReward: 150,
        completed: false,
        masteryLevel: 0,
      },
    ],
  },
  {
    id: 'pandas-analysis',
    title: 'AnÃ¡lise e AgregaÃ§Ã£o',
    description: 'GroupBy, estatÃ­sticas, insights.',
    icon: 'ðŸ“Š',
    category: 'pandas-intermediate',
    unlocked: false,
    completed: false,
    masteryPercentage: 0,
    lessons: [
      {
        id: 'pd-analysis-1',
        title: 'GroupBy: dividir para conquistar',
        description: 'Agregando dados por categorias.',
        type: 'concept',
        difficulty: 'intermediate',
        xpReward: 175,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'pd-analysis-2',
        title: 'EstatÃ­sticas descritivas',
        description: 'Resumindo dados numericamente.',
        type: 'concept',
        difficulty: 'intermediate',
        xpReward: 150,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'pd-analysis-3',
        title: 'Pivot tables',
        description: 'Reestruturando dados para anÃ¡lise.',
        type: 'concept',
        difficulty: 'advanced',
        xpReward: 200,
        completed: false,
        masteryLevel: 0,
      },
    ],
  },
  {
    id: 'pandas-advanced',
    title: 'Pandas AvanÃ§ado',
    description: 'Merge, join, dados faltantes, otimizaÃ§Ã£o.',
    icon: 'ðŸš€',
    category: 'pandas-intermediate',
    unlocked: false,
    completed: false,
    masteryPercentage: 0,
    lessons: [
      {
        id: 'pd-adv-1',
        title: 'Merge e Join',
        description: 'Combinando mÃºltiplos DataFrames.',
        type: 'concept',
        difficulty: 'intermediate',
        xpReward: 175,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'pd-adv-2',
        title: 'Lidando com dados faltantes',
        description: 'NaN nÃ£o Ã© o fim do mundo.',
        type: 'concept',
        difficulty: 'intermediate',
        xpReward: 150,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'pd-adv-3',
        title: 'Apply e vetorizaÃ§Ã£o',
        description: 'Performance em grandes datasets.',
        type: 'concept',
        difficulty: 'advanced',
        xpReward: 200,
        completed: false,
        masteryLevel: 0,
      },
      {
        id: 'pd-adv-4',
        title: 'Casos reais de MBA',
        description: 'AnÃ¡lises tÃ­picas de processos seletivos.',
        type: 'challenge',
        difficulty: 'advanced',
        xpReward: 300,
        completed: false,
        masteryLevel: 0,
      },
    ],
  },
];

export const sampleExercises: Exercise[] = [
  {
    id: 'ex-var-1',
    lessonId: 'py-fund-2',
    type: 'code',
    question: 'Crie uma variÃ¡vel chamada `idade` que guarde sua idade. Depois, crie outra variÃ¡vel `ano_nascimento` que calcule o ano em que vocÃª nasceu (considere o ano atual como 2025).',
    socraticHints: [
      {
        level: 1,
        type: 'why',
        question: 'Por que vocÃª acha que precisamos de duas variÃ¡veis diferentes aqui?',
        hint: 'Pense: uma guarda um dado direto, outra Ã© calculada.',
      },
      {
        level: 2,
        type: 'what-for',
        question: 'Se vocÃª tivesse que calcular o ano de nascimento de 1000 pessoas, preferiria fazer manualmente ou deixar o computador fazer?',
        hint: 'VariÃ¡veis permitem que o computador faÃ§a cÃ¡lculos para nÃ³s.',
      },
      {
        level: 3,
        type: 'how',
        question: 'Qual operaÃ§Ã£o matemÃ¡tica transforma idade em ano de nascimento?',
        hint: 'SubtraÃ§Ã£o: ano_atual - idade = ano_nascimento',
      },
    ],
    starterCode: '# Crie suas variÃ¡veis aqui\n\n',
    expectedOutput: '',
    testCases: [
      {
        input: '',
        expectedOutput: '',
        description: 'VariÃ¡vel idade deve existir e ser um nÃºmero',
      },
    ],
    explanation: {
      why: 'VariÃ¡veis existem porque precisamos guardar informaÃ§Ãµes para usar depois. Imagine tentar fazer contas de cabeÃ§a com 100 nÃºmeros - impossÃ­vel!',
      whatFor: 'Elas resolvem o problema de nÃ£o precisar lembrar de tudo. O computador lembra para vocÃª.',
      how: 'Em Python, usamos o sinal de igual (=) para "guardar" um valor em um nome. Depois, podemos usar esse nome em cÃ¡lculos.',
      commonMistakes: [
        'Usar espaÃ§os no nome da variÃ¡vel (use underscores: ano_nascimento)',
        'ComeÃ§ar com nÃºmeros (2idade nÃ£o funciona, idade2 sim)',
        'Confundir = (atribuiÃ§Ã£o) com == (comparaÃ§Ã£o)',
      ],
      realWorldExample: 'Em uma planilha de funcionÃ¡rios, cada cÃ©lula Ã© uma variÃ¡vel. A idade estÃ¡ em uma coluna, o salÃ¡rio em outra. Sistemas calculam bÃ´nus, fÃ©rias, tudo usando essas "variÃ¡veis".',
    },
    difficulty: 'beginner',
    tags: ['variÃ¡veis', 'atribuiÃ§Ã£o', 'cÃ¡lculo'],
    xpReward: 50,
  },
  {
    id: 'ex-logic-1',
    lessonId: 'py-logic-1',
    type: 'output-prediction',
    question: 'Analise o cÃ³digo abaixo e diga qual serÃ¡ o output:\n\n```python\nx = 15\nif x > 20:\n    print("Grande")\nelif x > 10:\n    print("MÃ©dio")\nelse:\n    print("Pequeno")\n```',
    socraticHints: [
      {
        level: 1,
        type: 'why',
        question: 'Por que existem trÃªs caminhos diferentes nesse cÃ³digo?',
        hint: 'Cada caminho representa uma "decisÃ£o" diferente baseada no valor de x.',
      },
      {
        level: 2,
        type: 'how',
        question: 'Em que ordem o Python avalia as condiÃ§Ãµes?',
        hint: 'De cima para baixo. Assim que uma Ã© verdadeira, executa aquele bloco e ignora o resto.',
      },
    ],
    options: ['Grande', 'MÃ©dio', 'Pequeno', 'Erro'],
    correctAnswer: 1,
    explanation: {
      why: 'Condicionais existem porque programas precisam se adaptar a diferentes situaÃ§Ãµes. Um app de banco se comporta diferente se o saldo Ã© positivo ou negativo.',
      whatFor: 'Elas permitem que um Ãºnico cÃ³digo funcione para milhÃµes de casos diferentes, sem escrever milhÃµes de versÃµes.',
      how: 'O Python avalia as condiÃ§Ãµes na ordem: primeiro if, depois elif(s), por Ãºltimo else. A primeira condiÃ§Ã£o verdadeira "ganha".',
      commonMistakes: [
        'Esquecer os dois pontos (:) apÃ³s a condiÃ§Ã£o',
        'NÃ£o indentar o bloco corretamente',
        'Usar = ao invÃ©s de == para comparaÃ§Ã£o',
      ],
      realWorldExample: 'Sistemas de preÃ§os: desconto de 20% se comprar mais de 100 unidades, 10% se comprar mais de 50, preÃ§o cheio caso contrÃ¡rio.',
    },
    difficulty: 'beginner',
    tags: ['condicionais', 'if', 'elif', 'else'],
    xpReward: 75,
  },
  {
    id: 'ex-pandas-1',
    lessonId: 'pd-manip-2',
    type: 'code',
    question: 'Dado um DataFrame `df` com as colunas "nome", "idade" e "salario", filtre apenas os funcionÃ¡rios com salÃ¡rio maior que 5000 E idade menor que 30.',
    socraticHints: [
      {
        level: 1,
        type: 'why',
        question: 'Por que precisamos combinar duas condiÃ§Ãµes aqui?',
        hint: 'Queremos funcionÃ¡rios que atendam AMBOS os critÃ©rios, nÃ£o apenas um.',
      },
      {
        level: 2,
        type: 'how',
        question: 'Em Pandas, como combinamos condiÃ§Ãµes? Ã‰ igual ao Python puro?',
        hint: 'Use & para "E" e | para "OU", mas cada condiÃ§Ã£o precisa estar entre parÃªnteses.',
      },
      {
        level: 3,
        type: 'how',
        question: 'Onde colocamos o filtro - dentro ou fora dos colchetes?',
        hint: 'df[CONDIÃ‡ÃƒO] retorna as linhas onde CONDIÃ‡ÃƒO Ã© True.',
      },
    ],
    starterCode: 'import pandas as pd\n\n# DataFrame de exemplo jÃ¡ estÃ¡ criado como df\n# Escreva seu filtro abaixo:\n\nresultado = ',
    expectedOutput: '',
    testCases: [
      {
        input: '',
        expectedOutput: '',
        description: 'Deve retornar apenas funcionÃ¡rios com salÃ¡rio > 5000 E idade < 30',
      },
    ],
    explanation: {
      why: 'Filtros existem porque dados reais sÃ£o enormes. Precisamos focar apenas no que importa para nossa anÃ¡lise.',
      whatFor: 'Em um processo seletivo de MBA, vocÃª terÃ¡ dados de milhares de empresas. Filtros permitem responder perguntas especÃ­ficas rapidamente.',
      how: 'df[(condiÃ§Ã£o1) & (condiÃ§Ã£o2)] aplica ambas as condiÃ§Ãµes. Os parÃªnteses sÃ£o obrigatÃ³rios porque o operador & tem precedÃªncia sobre comparaÃ§Ãµes.',
      commonMistakes: [
        'Usar "and" ao invÃ©s de "&" (Python puro vs Pandas)',
        'Esquecer parÃªnteses nas condiÃ§Ãµes individuais',
        'Confundir & (E) com | (OU)',
      ],
      realWorldExample: 'AnÃ¡lise de RH: encontrar candidatos que tÃªm experiÃªncia mÃ­nima E formaÃ§Ã£o especÃ­fica E pretensÃ£o salarial dentro do budget.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'filtros', 'booleanos', 'dataframe'],
    xpReward: 100,
  },
];

export const getLevelFromXP = (xp: number): number => {
  return Math.floor(Math.sqrt(xp / 100)) + 1;
};

export const getXPForNextLevel = (currentLevel: number): number => {
  return Math.pow(currentLevel, 2) * 100;
};

export const calculateMasteryDecay = (lastPracticed: Date): number => {
  const daysSince = (Date.now() - lastPracticed.getTime()) / (1000 * 60 * 60 * 24);
  // Ebbinghaus curve: retention decreases exponentially
  return Math.max(0, 100 * Math.exp(-daysSince / 7));
};
