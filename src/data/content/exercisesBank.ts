import { Exercise } from '@/types/learning';

// ============================================
// BANCO DE EXERCÍCIOS COMPLETO
// Mínimo: 300 exercícios
// Estrutura: Hints Socráticos + Contexto Militar
// ============================================

export const exercisesBank: Exercise[] = [
  // ============================================
  // MÓDULO 1: FUNDAMENTOS DO PYTHON (40 exercícios)
  // ============================================
  
  // --- Variáveis (py-fund-2) ---
  {
    id: 'py-fund-var-1',
    lessonId: 'py-fund-2',
    type: 'code',
    question: 'Crie uma variável chamada `idade` que guarde sua idade. Depois, crie outra variável `ano_nascimento` que calcule o ano em que você nasceu (considere o ano atual como 2025).',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que você acha que precisamos de duas variáveis diferentes aqui?', hint: 'Pense: uma guarda um dado direto, outra é calculada.' },
      { level: 2, type: 'what-for', question: 'Se você tivesse que calcular o ano de nascimento de 1000 pessoas, preferiria fazer manualmente ou deixar o computador fazer?', hint: 'Variáveis permitem que o computador faça cálculos para nós.' },
      { level: 3, type: 'how', question: 'Qual operação matemática transforma idade em ano de nascimento?', hint: 'Subtração: ano_atual - idade = ano_nascimento' },
    ],
    starterCode: '# Crie suas variáveis aqui\n\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '', description: 'Variável idade deve existir e ser um número' }],
    explanation: {
      why: 'Variáveis existem porque precisamos guardar informações para usar depois. Imagine tentar fazer contas de cabeça com 100 números - impossível!',
      whatFor: 'Elas resolvem o problema de não precisar lembrar de tudo. O computador lembra para você.',
      how: 'Em Python, usamos o sinal de igual (=) para "guardar" um valor em um nome.',
      commonMistakes: ['Usar espaços no nome da variável (use underscores)', 'Começar com números', 'Confundir = (atribuição) com == (comparação)'],
      realWorldExample: 'Em uma planilha de funcionários, cada célula é uma variável.',
    },
    difficulty: 'beginner',
    tags: ['variáveis', 'atribuição', 'cálculo'],
    xpReward: 50,
    professionalContext: 'Em sistemas de RH, variáveis armazenam dados de funcionários.',
    militaryApplication: 'Sistemas de logística usam variáveis para calcular suprimentos: número_soldados * rações_por_dia = total_rações.',
  },
  {
    id: 'py-fund-var-2',
    lessonId: 'py-fund-2',
    type: 'output-prediction',
    question: 'Qual será o output do seguinte código?\n\n```python\nx = 5\ny = x\nx = 10\nprint(y)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Quando y = x, o que é copiado - a variável x ou o VALOR que x contém?', hint: 'O valor é copiado, não a variável em si.' },
      { level: 2, type: 'how', question: 'Depois de y = x, o que acontece com y se mudarmos x?', hint: 'Nada. y tem sua própria cópia do valor.' },
    ],
    options: ['5', '10', 'x', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Entender que variáveis guardam valores, não referências, é fundamental.',
      whatFor: 'Isso previne bugs onde você altera uma variável pensando que afeta outra.',
      how: 'y = x copia o valor de x (5) para y. Depois, x muda para 10, mas y continua 5.',
      commonMistakes: ['Pensar que y é um "apelido" para x', 'Confundir com comportamento de listas'],
      realWorldExample: 'Copiar uma célula de planilha não cria vínculo com a original.',
    },
    difficulty: 'beginner',
    tags: ['variáveis', 'atribuição', 'cópia'],
    xpReward: 50,
    professionalContext: 'Sistemas financeiros: backup de valores antes de cálculos.',
    militaryApplication: 'Registro de posição anterior antes de atualizar: posicao_anterior = posicao_atual',
  },
  {
    id: 'py-fund-var-3',
    lessonId: 'py-fund-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nnome = "Maria"\nsobrenome = "Silva"\nnome_completo = nome + " " + sobrenome\nprint(nome_completo)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que acontece quando usamos + com textos?', hint: 'Textos são "colados" juntos (concatenação).' },
      { level: 2, type: 'how', question: 'Por que adicionamos " " entre nome e sobrenome?', hint: 'Sem o espaço, seria "MariaSilva".' },
    ],
    options: ['Maria Silva', 'MariaSilva', 'nome sobrenome', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Concatenação de strings é operação básica para construir textos.',
      whatFor: 'Criar mensagens dinâmicas, relatórios, outputs formatados.',
      how: 'O operador + com strings junta os textos na ordem.',
      commonMistakes: ['Esquecer o espaço entre palavras', 'Tentar concatenar string com número sem converter'],
      realWorldExample: 'Gerar nomes completos em formulários.',
    },
    difficulty: 'beginner',
    tags: ['variáveis', 'strings', 'concatenação'],
    xpReward: 50,
    professionalContext: 'Sistemas geram mensagens: "Bem-vindo, " + nome_usuario',
    militaryApplication: 'Relatórios: "Missão " + codigo + " concluída com " + status',
  },
  {
    id: 'py-fund-var-4',
    lessonId: 'py-fund-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nquantidade = "10"\npreco = 5\ntotal = quantidade * preco\nprint(total)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'quantidade é um número ou texto?', hint: 'Está entre aspas - é texto (string).' },
      { level: 2, type: 'how', question: 'O que acontece quando multiplicamos string por número?', hint: 'A string é repetida N vezes.' },
    ],
    options: ['50', '1010101010', 'Erro', '10 10 10 10 10'],
    correctAnswer: 1,
    explanation: {
      why: 'Python diferencia tipos. "10" não é igual a 10.',
      whatFor: 'Evitar bugs ao processar dados de formulários (sempre vêm como texto).',
      how: '"10" * 5 repete a string 5 vezes: "1010101010".',
      commonMistakes: ['Assumir que números entre aspas são números', 'Não converter tipos antes de operações'],
      realWorldExample: 'Dados de CSV vêm como texto e precisam de conversão.',
    },
    difficulty: 'beginner',
    tags: ['variáveis', 'tipos', 'multiplicação'],
    xpReward: 75,
    professionalContext: 'Parsing de dados de APIs frequentemente requer conversão de tipos.',
    militaryApplication: 'Leitura de sensores: valores chegam como texto, precisam virar números.',
  },
  {
    id: 'py-fund-var-5',
    lessonId: 'py-fund-2',
    type: 'code',
    question: 'Converta a string "42" para inteiro e multiplique por 3. Armazene o resultado em uma variável chamada `resultado`.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que precisamos converter antes de calcular?', hint: '"42" * 3 daria "424242", não 126.' },
      { level: 2, type: 'how', question: 'Qual função converte texto para número inteiro?', hint: 'int() converte para inteiro.' },
    ],
    starterCode: 'texto = "42"\n# Converta e calcule\n',
    expectedOutput: '126',
    testCases: [{ input: '', expectedOutput: '126', description: 'resultado deve ser 126' }],
    explanation: {
      why: 'Conversão de tipos é essencial ao processar dados externos.',
      whatFor: 'Dados de arquivos, APIs, formulários sempre chegam como texto.',
      how: 'int("42") converte string para inteiro. float() para decimal.',
      commonMistakes: ['Tentar converter texto que não é número', 'Esquecer de converter antes de calcular'],
      realWorldExample: 'Formulário web: idade do usuário chega como "25", precisa virar 25.',
    },
    difficulty: 'beginner',
    tags: ['variáveis', 'tipos', 'conversão'],
    xpReward: 75,
    professionalContext: 'ETL pipelines fazem conversões massivas de tipos.',
    militaryApplication: 'Coordenadas GPS chegam como texto, precisam virar números para cálculos.',
  },
  {
    id: 'py-fund-var-6',
    lessonId: 'py-fund-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\na = 10\nb = 3\nprint(a // b)\nprint(a % b)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Qual a diferença entre / e //?', hint: '/ dá resultado com decimal, // dá só a parte inteira.' },
      { level: 2, type: 'how', question: 'O que % (módulo) retorna?', hint: 'O resto da divisão.' },
    ],
    options: ['3\\n1', '3.33\\n0', '3\\n0', '10\\n3'],
    correctAnswer: 0,
    explanation: {
      why: 'Divisão inteira e módulo são operações distintas com usos específicos.',
      whatFor: 'Paginação (quantas páginas), distribuição igualitária, verificar par/ímpar.',
      how: '10 // 3 = 3 (divisão inteira). 10 % 3 = 1 (resto: 10 = 3*3 + 1).',
      commonMistakes: ['Confundir // com /', 'Não saber que % é o resto'],
      realWorldExample: 'Distribuir 10 tarefas entre 3 pessoas: cada um faz 3, sobra 1.',
    },
    difficulty: 'beginner',
    tags: ['variáveis', 'operadores', 'divisão'],
    xpReward: 75,
    professionalContext: 'Paginação: total_items // items_por_pagina = numero_paginas.',
    militaryApplication: 'Distribuir munição: total // soldados = por_soldado, total % soldados = sobra.',
  },

  // --- Tipos de Dados (py-fund-3) ---
  {
    id: 'py-fund-type-1',
    lessonId: 'py-fund-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nprint(type(3.14))\nprint(type("3.14"))\nprint(type(True))\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que o computador diferencia "3.14" de 3.14?', hint: 'Um é texto, outro é número. Operações diferentes.' },
      { level: 2, type: 'how', question: 'O que a função type() retorna?', hint: 'O tipo do dado: int, float, str, bool, etc.' },
    ],
    options: ["<class 'float'>\\n<class 'str'>\\n<class 'bool'>", "<class 'int'>\\n<class 'str'>\\n<class 'int'>", 'float\\nstr\\nbool', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Tipos determinam quais operações são válidas e como dados são armazenados.',
      whatFor: 'Debugging, validação de dados, escolha de operações corretas.',
      how: 'type() retorna a classe/tipo do objeto.',
      commonMistakes: ['Confundir número com string de número', 'Não saber que True/False são tipo bool'],
      realWorldExample: 'Validar que campo de idade recebeu número, não texto.',
    },
    difficulty: 'beginner',
    tags: ['tipos', 'type', 'float', 'str', 'bool'],
    xpReward: 50,
    professionalContext: 'Validação de APIs: verificar tipos antes de processar.',
    militaryApplication: 'Verificar tipo de coordenada antes de cálculo de trajetória.',
  },
  {
    id: 'py-fund-type-2',
    lessonId: 'py-fund-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nprint(bool(0))\nprint(bool(""))\nprint(bool("False"))\nprint(bool([]))\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que é considerado "falso" em Python?', hint: 'Zero, vazio, None são "falsy".' },
      { level: 2, type: 'how', question: '"False" entre aspas é texto ou booleano?', hint: 'É texto (string). E texto não-vazio é truthy.' },
    ],
    options: ['False\\nFalse\\nTrue\\nFalse', 'False\\nFalse\\nFalse\\nFalse', 'True\\nFalse\\nTrue\\nFalse', '0\\n\\nFalse\\n[]'],
    correctAnswer: 0,
    explanation: {
      why: 'Python usa "truthy" e "falsy" para avaliar qualquer valor como booleano.',
      whatFor: 'Condicionais mais elegantes: if lista: (ao invés de if len(lista) > 0:)',
      how: '0, "", [], None são falsy. Qualquer outro valor é truthy.',
      commonMistakes: ['"False" (string) é truthy, não False!', 'Lista vazia [] é falsy'],
      realWorldExample: 'if usuario: (verifica se usuário existe/não é vazio).',
    },
    difficulty: 'intermediate',
    tags: ['tipos', 'bool', 'truthy', 'falsy'],
    xpReward: 100,
    professionalContext: 'Validação: if dados: (verifica se há dados para processar).',
    militaryApplication: 'Verificação rápida: if suprimentos: (há suprimentos?) else: (reabastecer).',
  },
  {
    id: 'py-fund-type-3',
    lessonId: 'py-fund-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nx = 5\ny = 5.0\nprint(x == y)\nprint(type(x) == type(y))\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'x e y têm o mesmo valor? E o mesmo tipo?', hint: 'Valor: sim (5 = 5.0). Tipo: não (int ≠ float).' },
      { level: 2, type: 'how', question: 'O que == compara - valor ou tipo?', hint: 'Valor. Para comparar tipos, use type().' },
    ],
    options: ['True\\nFalse', 'True\\nTrue', 'False\\nFalse', 'False\\nTrue'],
    correctAnswer: 0,
    explanation: {
      why: 'Python compara valores com ==, não tipos. 5 == 5.0 é True.',
      whatFor: 'Flexibilidade em comparações, mas atenção em casos específicos.',
      how: '== compara valor. type() compara tipo. is compara identidade.',
      commonMistakes: ['Assumir que tipos diferentes nunca são iguais', 'Não verificar tipo quando necessário'],
      realWorldExample: 'Cálculos financeiros: 100 == 100.0 permite flexibilidade.',
    },
    difficulty: 'intermediate',
    tags: ['tipos', 'comparação', 'int', 'float'],
    xpReward: 75,
    professionalContext: 'Sistemas financeiros precisam cuidado com int vs float.',
    militaryApplication: 'Calibragem: 100 metros pode ser 100 ou 100.0 dependendo do sensor.',
  },

  // --- Exercícios de Prática (py-fund-4) ---
  {
    id: 'py-fund-prac-1',
    lessonId: 'py-fund-4',
    type: 'code',
    question: 'Calcule o salário líquido dado o bruto. Deduza 11% de INSS e 15% de IR (sobre o bruto). Armazene em `salario_liquido`.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que calculamos deduções sobre o bruto, não sobre o líquido?', hint: 'Dedução é sobre o que você ganha, não sobre o que sobra.' },
      { level: 2, type: 'how', question: 'Como calcular porcentagem? Ex: 11% de 1000?', hint: '1000 * 0.11 = 110 (ou 1000 * 11 / 100).' },
    ],
    starterCode: 'salario_bruto = 5000\n# Calcule as deduções e o líquido\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '3700', description: 'salario_liquido deve ser 3700' }],
    explanation: {
      why: 'Cálculos trabalhistas são comuns em análise de RH.',
      whatFor: 'Automatizar folha de pagamento, simular impactos salariais.',
      how: 'liquido = bruto - (bruto * 0.11) - (bruto * 0.15) = bruto * (1 - 0.26).',
      commonMistakes: ['Aplicar desconto sobre desconto', 'Usar porcentagem errada (11 ao invés de 0.11)'],
      realWorldExample: 'Sistemas de RH calculam isso para milhares de funcionários.',
    },
    difficulty: 'beginner',
    tags: ['cálculo', 'porcentagem', 'variáveis'],
    xpReward: 100,
    professionalContext: 'Folha de pagamento automatizada.',
    militaryApplication: 'Cálculo de soldos com deduções por dependentes e benefícios.',
  },
  {
    id: 'py-fund-prac-2',
    lessonId: 'py-fund-4',
    type: 'code',
    question: 'Converta temperatura de Celsius para Fahrenheit. Fórmula: F = C * 9/5 + 32. Dado `celsius = 25`, calcule `fahrenheit`.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que existe conversão de temperatura?', hint: 'Diferentes sistemas de medida em diferentes países.' },
      { level: 2, type: 'how', question: 'Qual a ordem de operações na fórmula?', hint: 'Multiplicação primeiro, depois soma.' },
    ],
    starterCode: 'celsius = 25\n# Converta para Fahrenheit\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '77', description: 'fahrenheit deve ser 77.0' }],
    explanation: {
      why: 'Conversões são comuns quando integrando sistemas de diferentes origens.',
      whatFor: 'Padronizar unidades antes de análises.',
      how: 'F = 25 * 9/5 + 32 = 45 + 32 = 77.',
      commonMistakes: ['Ordem errada de operações', 'Usar divisão inteira quando precisa de float'],
      realWorldExample: 'Sistemas meteorológicos integram dados de diferentes países.',
    },
    difficulty: 'beginner',
    tags: ['cálculo', 'conversão', 'fórmula'],
    xpReward: 75,
    professionalContext: 'APIs de clima podem retornar em diferentes unidades.',
    militaryApplication: 'Equipamentos de diferentes países usam unidades diferentes.',
  },

  // ============================================
  // MÓDULO 2: LÓGICA E DECISÕES (45 exercícios)
  // ============================================
  {
    id: 'py-logic-cond-1',
    lessonId: 'py-logic-1',
    type: 'output-prediction',
    question: 'Analise o código abaixo e diga qual será o output:\n\n```python\nx = 15\nif x > 20:\n    print("Grande")\nelif x > 10:\n    print("Médio")\nelse:\n    print("Pequeno")\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que existem três caminhos diferentes nesse código?', hint: 'Cada caminho representa uma "decisão" diferente baseada no valor de x.' },
      { level: 2, type: 'how', question: 'Em que ordem o Python avalia as condições?', hint: 'De cima para baixo. Assim que uma é verdadeira, executa e ignora o resto.' },
    ],
    options: ['Grande', 'Médio', 'Pequeno', 'Erro'],
    correctAnswer: 1,
    explanation: {
      why: 'Condicionais permitem programas se adaptarem a diferentes situações.',
      whatFor: 'Classificar, categorizar, tomar decisões automáticas.',
      how: '15 > 20? Não. 15 > 10? Sim! Executa "Médio" e ignora else.',
      commonMistakes: ['Esquecer dois pontos', 'Indentação errada', 'Usar = ao invés de =='],
      realWorldExample: 'Classificação de clientes por faixa de consumo.',
    },
    difficulty: 'beginner',
    tags: ['condicionais', 'if', 'elif', 'else'],
    xpReward: 75,
    professionalContext: 'Sistemas de crédito classificam risco por faixas.',
    militaryApplication: 'Classificação de ameaça: crítica, moderada, baixa.',
  },
  {
    id: 'py-logic-cond-2',
    lessonId: 'py-logic-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nnota = 85\nif nota >= 90:\n    conceito = "A"\nif nota >= 80:\n    conceito = "B"\nif nota >= 70:\n    conceito = "C"\nprint(conceito)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que usar "if" separados ao invés de "elif"?', hint: 'Cada if é avaliado independentemente!' },
      { level: 2, type: 'how', question: 'Quantos desses ifs são verdadeiros para nota=85?', hint: '85 >= 90? Não. 85 >= 80? Sim. 85 >= 70? Sim.' },
    ],
    options: ['A', 'B', 'C', 'Erro'],
    correctAnswer: 2,
    explanation: {
      why: 'ifs separados são TODOS avaliados. elif para quando quer apenas um.',
      whatFor: 'Entender diferença entre condições exclusivas e independentes.',
      how: '85 >= 80 → conceito="B". Depois 85 >= 70 → conceito="C". Último ganha.',
      commonMistakes: ['Pensar que if separados funcionam como elif', 'Não perceber que valor é sobrescrito'],
      realWorldExample: 'Bug clássico: aplicar múltiplos descontos quando só deveria ser um.',
    },
    difficulty: 'intermediate',
    tags: ['condicionais', 'if', 'bug'],
    xpReward: 100,
    professionalContext: 'Regras de negócio mal implementadas causam problemas.',
    militaryApplication: 'Múltiplas condições de alerta: cada uma deve ser elif, não if.',
  },
  {
    id: 'py-logic-cond-3',
    lessonId: 'py-logic-1',
    type: 'code',
    question: 'Escreva código que classifique uma idade: "Menor" (< 18), "Adulto" (18-64), "Idoso" (>= 65). Armazene em `categoria`.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que precisamos de múltiplas condições?', hint: 'São 3 categorias mutuamente exclusivas.' },
      { level: 2, type: 'how', question: 'Como verificar se está entre 18 e 64?', hint: 'idade >= 18 and idade < 65, ou verificar as outras primeiro.' },
    ],
    starterCode: 'idade = 45\n# Classifique a idade\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: 'Adulto', description: 'categoria deve ser "Adulto"' }],
    explanation: {
      why: 'Classificação por faixas é operação comum em análise de dados.',
      whatFor: 'Segmentar público, aplicar regras diferenciadas.',
      how: 'if idade < 18 elif idade < 65 else (65+).',
      commonMistakes: ['Esquecer casos limite (exatamente 18, 65)', 'Condições sobrepostas'],
      realWorldExample: 'Planos de saúde com preços por faixa etária.',
    },
    difficulty: 'beginner',
    tags: ['condicionais', 'classificação', 'faixas'],
    xpReward: 75,
    professionalContext: 'Segmentação de clientes por faixa etária.',
    militaryApplication: 'Classificação de efetivo: reserva, ativo, veterano.',
  },
  {
    id: 'py-logic-op-1',
    lessonId: 'py-logic-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\na = True\nb = False\nprint(a and b)\nprint(a or b)\nprint(not a)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que "and" exige para ser True?', hint: 'AMBOS precisam ser True.' },
      { level: 2, type: 'how', question: 'O que "or" exige para ser True?', hint: 'PELO MENOS UM precisa ser True.' },
    ],
    options: ['False\\nTrue\\nFalse', 'True\\nTrue\\nFalse', 'False\\nFalse\\nTrue', 'True\\nFalse\\nTrue'],
    correctAnswer: 0,
    explanation: {
      why: 'Operadores lógicos combinam condições.',
      whatFor: 'Criar condições complexas: "se A E B" ou "se A OU B".',
      how: 'and: ambos True. or: pelo menos um True. not: inverte.',
      commonMistakes: ['Confundir and com or', 'Esquecer que not inverte'],
      realWorldExample: 'Aprovar empréstimo SE renda_ok AND score_ok.',
    },
    difficulty: 'beginner',
    tags: ['operadores', 'lógica', 'and', 'or', 'not'],
    xpReward: 75,
    professionalContext: 'Regras de aprovação combinam múltiplos critérios.',
    militaryApplication: 'Autorização: patente_ok AND clearance_ok.',
  },
  {
    id: 'py-logic-op-2',
    lessonId: 'py-logic-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nx = 5\nprint(x > 3 and x < 10)\nprint(x < 3 or x > 7)\nprint(not(x == 5))\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'x está entre 3 e 10?', hint: '5 > 3? Sim. 5 < 10? Sim. Ambos True → True.' },
      { level: 2, type: 'how', question: 'x é menor que 3 OU maior que 7?', hint: '5 < 3? Não. 5 > 7? Não. Nenhum True → False.' },
    ],
    options: ['True\\nFalse\\nFalse', 'True\\nTrue\\nFalse', 'False\\nFalse\\nTrue', 'True\\nFalse\\nTrue'],
    correctAnswer: 0,
    explanation: {
      why: 'Combinar comparações com operadores lógicos.',
      whatFor: 'Verificar intervalos, exclusões, condições compostas.',
      how: '5 > 3 and 5 < 10 → True. 5 < 3 or 5 > 7 → False. not(True) → False.',
      commonMistakes: ['Confundir precedência', 'Não usar parênteses quando necessário'],
      realWorldExample: 'Filtrar produtos: preco >= 10 and preco <= 50.',
    },
    difficulty: 'beginner',
    tags: ['operadores', 'lógica', 'comparação'],
    xpReward: 75,
    professionalContext: 'Filtros de e-commerce usam and/or.',
    militaryApplication: 'Critérios de seleção: altura >= 1.60 and idade <= 30.',
  },
  {
    id: 'py-logic-op-3',
    lessonId: 'py-logic-2',
    type: 'code',
    question: 'Verifique se um ano é bissexto. Regra: divisível por 4, EXCETO se divisível por 100 (a menos que também seja divisível por 400). Armazene True/False em `bissexto`.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que a regra é complexa?', hint: 'Calendário precisa de ajustes para manter sincronização com o Sol.' },
      { level: 2, type: 'how', question: 'Como verificar divisibilidade?', hint: 'ano % 4 == 0 significa divisível por 4.' },
      { level: 3, type: 'how', question: 'Como combinar as condições?', hint: '(div por 4 AND não div por 100) OR (div por 400).' },
    ],
    starterCode: 'ano = 2024\n# Verifique se é bissexto\n',
    expectedOutput: '',
    testCases: [
      { input: '', expectedOutput: 'True', description: '2024 é bissexto' },
    ],
    explanation: {
      why: 'Lógica de calendário é exemplo clássico de condições compostas.',
      whatFor: 'Cálculo de datas, validações de formulários.',
      how: '(ano % 4 == 0 and ano % 100 != 0) or (ano % 400 == 0).',
      commonMistakes: ['Esquecer a exceção do século', 'Ordem errada de avaliação'],
      realWorldExample: 'Sistemas de calendário, cálculo de dias entre datas.',
    },
    difficulty: 'intermediate',
    tags: ['lógica', 'operadores', 'algoritmo'],
    xpReward: 125,
    professionalContext: 'Bibliotecas de datas implementam isso internamente.',
    militaryApplication: 'Planejamento de operações considera calendário preciso.',
  },

  // ============================================
  // MÓDULO 3: LOOPS (50 exercícios)
  // ============================================
  {
    id: 'py-loop-for-1',
    lessonId: 'py-loops-1',
    type: 'output-prediction',
    question: 'O que este código imprime?\n\n```python\nresultado = 0\nfor numero in [1, 2, 3, 4, 5]:\n    resultado = resultado + numero\nprint(resultado)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que usamos um loop ao invés de somar manualmente?', hint: 'E se a lista tivesse 1000 números?' },
      { level: 2, type: 'how', question: 'O que acontece com `resultado` a cada iteração?', hint: 'resultado começa em 0. Depois: 0+1=1, 1+2=3, 3+3=6...' },
    ],
    options: ['15', '5', '0', '[1, 2, 3, 4, 5]'],
    correctAnswer: 0,
    explanation: {
      why: 'Loops existem para automatizar repetições.',
      whatFor: 'Processar qualquer quantidade de dados com o mesmo código.',
      how: '0+1=1, 1+2=3, 3+3=6, 6+4=10, 10+5=15.',
      commonMistakes: ['Esquecer de inicializar acumulador', 'Modificar lista durante iteração'],
      realWorldExample: 'Somar vendas do mês.',
    },
    difficulty: 'beginner',
    tags: ['loops', 'for', 'acumulador'],
    xpReward: 75,
    professionalContext: 'Relatórios somam milhares de transações.',
    militaryApplication: 'Somar efetivo de todas as unidades.',
  },
  {
    id: 'py-loop-for-2',
    lessonId: 'py-loops-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nfor i in range(3):\n    for j in range(2):\n        print(f"{i},{j}", end=" ")\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que significa ter um loop dentro de outro?', hint: 'Para cada valor de i, j percorre todos os seus valores.' },
      { level: 2, type: 'how', question: 'Quantas vezes o print é executado?', hint: '3 valores de i × 2 valores de j = 6 execuções.' },
    ],
    options: ['0,0 0,1 1,0 1,1 2,0 2,1', '0,0 1,1 2,2', '0,1 1,2 2,3', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Loops aninhados processam combinações/matrizes.',
      whatFor: 'Tabelas, grades, todas combinações possíveis.',
      how: 'i=0: j=0,1. i=1: j=0,1. i=2: j=0,1.',
      commonMistakes: ['Confundir qual loop é externo/interno', 'Esquecer que range(3) é 0,1,2'],
      realWorldExample: 'Processar matriz linha por linha.',
    },
    difficulty: 'intermediate',
    tags: ['loops', 'aninhado', 'range'],
    xpReward: 100,
    professionalContext: 'Tabelas pivot, análise de matriz.',
    militaryApplication: 'Grade de coordenadas: cada célula do mapa.',
  },
  {
    id: 'py-loop-for-3',
    lessonId: 'py-loops-1',
    type: 'code',
    question: 'Calcule o fatorial de n usando um loop. Fatorial de 5 = 5 × 4 × 3 × 2 × 1 = 120. Armazene em `fatorial`.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que multiplicar em sequência?', hint: 'Fatorial é produto de todos números de n até 1.' },
      { level: 2, type: 'how', question: 'Como iterar de n até 1?', hint: 'range(n, 0, -1) ou range(1, n+1).' },
    ],
    starterCode: 'n = 5\nfatorial = 1\n# Complete o loop\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '120', description: 'fatorial deve ser 120' }],
    explanation: {
      why: 'Fatorial é base para cálculos de combinação/permutação.',
      whatFor: 'Probabilidade, estatística, análise combinatória.',
      how: 'fatorial = 1. Para i de 1 a n: fatorial *= i.',
      commonMistakes: ['Inicializar com 0 (multiplicar por 0 = 0)', 'Esquecer de incluir n no range'],
      realWorldExample: 'Calcular número de combinações possíveis.',
    },
    difficulty: 'intermediate',
    tags: ['loops', 'matemática', 'fatorial'],
    xpReward: 100,
    professionalContext: 'Base para cálculos estatísticos.',
    militaryApplication: 'Quantas formas de organizar patrulha de n soldados?',
  },
  {
    id: 'py-loop-while-1',
    lessonId: 'py-loops-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nx = 10\nwhile x > 0:\n    print(x, end=" ")\n    x = x - 3\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Quando while para de executar?', hint: 'Quando x <= 0.' },
      { level: 2, type: 'how', question: 'Quais valores de x são impressos?', hint: '10, 7, 4, 1. Depois x=-2 e para.' },
    ],
    options: ['10 7 4 1', '10 7 4 1 -2', '10 9 8 7 6 5 4 3 2 1', 'Loop infinito'],
    correctAnswer: 0,
    explanation: {
      why: 'While continua enquanto condição é True.',
      whatFor: 'Quando não sabemos quantas iterações precisamos.',
      how: 'x=10 (print), x=7 (print), x=4 (print), x=1 (print), x=-2 (para).',
      commonMistakes: ['Esquecer de atualizar a variável (loop infinito)', 'Condição errada'],
      realWorldExample: 'Processar até acabar o estoque.',
    },
    difficulty: 'beginner',
    tags: ['loops', 'while', 'condição'],
    xpReward: 75,
    professionalContext: 'Consumir fila até esvaziar.',
    militaryApplication: 'Continuar busca enquanto há área não explorada.',
  },
  {
    id: 'py-loop-comp-1',
    lessonId: 'py-loops-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nnumeros = [1, 2, 3, 4, 5]\ndobros = [x * 2 for x in numeros]\nprint(dobros)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que usar list comprehension ao invés de loop normal?', hint: 'Mais conciso e "Pythonic".' },
      { level: 2, type: 'how', question: 'O que a expressão "x * 2 for x in numeros" faz?', hint: 'Para cada x, calcula x*2 e coloca na lista.' },
    ],
    options: ['[2, 4, 6, 8, 10]', '[1, 2, 3, 4, 5, 1, 2, 3, 4, 5]', '10', '[1, 4, 9, 16, 25]'],
    correctAnswer: 0,
    explanation: {
      why: 'List comprehension é forma concisa de criar listas.',
      whatFor: 'Transformar, filtrar, criar listas de forma elegante.',
      how: '[expressão for item in iterável] aplica expressão a cada item.',
      commonMistakes: ['Esquecer os colchetes', 'Confundir ordem (expressão vem antes do for)'],
      realWorldExample: 'Converter todas temperaturas de C para F.',
    },
    difficulty: 'intermediate',
    tags: ['loops', 'comprehension', 'lista'],
    xpReward: 100,
    professionalContext: 'Transformar colunas de dados.',
    militaryApplication: 'Calcular distância para cada alvo: [dist(alvo) for alvo in alvos].',
  },
  {
    id: 'py-loop-comp-2',
    lessonId: 'py-loops-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nnumeros = [1, 2, 3, 4, 5, 6]\npares = [x for x in numeros if x % 2 == 0]\nprint(pares)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que o "if" faz dentro da comprehension?', hint: 'Filtra: só inclui se condição for True.' },
      { level: 2, type: 'how', question: 'x % 2 == 0 verifica o quê?', hint: 'Se x é divisível por 2 (par).' },
    ],
    options: ['[2, 4, 6]', '[1, 3, 5]', '[1, 2, 3, 4, 5, 6]', '[0, 0, 0]'],
    correctAnswer: 0,
    explanation: {
      why: 'Comprehension com filtro é forma concisa de selecionar elementos.',
      whatFor: 'Filtrar dados sem criar variáveis intermediárias.',
      how: '[x for x in lista if condição] inclui x apenas se condição True.',
      commonMistakes: ['Posição errada do if', 'Confundir com if-else (que vem antes do for)'],
      realWorldExample: 'Filtrar transações acima de certo valor.',
    },
    difficulty: 'intermediate',
    tags: ['loops', 'comprehension', 'filtro'],
    xpReward: 100,
    professionalContext: 'emails_validos = [e for e in emails if "@" in e].',
    militaryApplication: 'alvos_prioritarios = [a for a in alvos if a.ameaca > 7].',
  },

  // ============================================
  // MÓDULO 4: ESTRUTURAS DE DADOS (45 exercícios)
  // ============================================
  {
    id: 'py-struct-list-1',
    lessonId: 'py-struct-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nlista = [10, 20, 30, 40, 50]\nprint(lista[1])\nprint(lista[-1])\nprint(lista[1:4])\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que índices começam em 0?', hint: 'Convenção da maioria das linguagens.' },
      { level: 2, type: 'how', question: 'O que índice negativo significa?', hint: 'Conta de trás para frente. -1 é o último.' },
    ],
    options: ['20\\n50\\n[20, 30, 40]', '10\\n50\\n[20, 30, 40]', '20\\n40\\n[10, 20, 30, 40]', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Índices permitem acessar elementos específicos.',
      whatFor: 'Selecionar, modificar, fatiar dados.',
      how: 'lista[1]=20. lista[-1]=50. lista[1:4] inclui índices 1,2,3.',
      commonMistakes: ['Pensar que índice 1 é o primeiro', 'Esquecer que slice exclui o último índice'],
      realWorldExample: 'Últimos 3 meses de vendas: vendas[-3:].',
    },
    difficulty: 'beginner',
    tags: ['lista', 'índice', 'slice'],
    xpReward: 75,
    professionalContext: 'Séries temporais: acessar períodos específicos.',
    militaryApplication: 'Últimas 5 posições reportadas: posicoes[-5:].',
  },
  {
    id: 'py-struct-list-2',
    lessonId: 'py-struct-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nlista = [3, 1, 4, 1, 5]\nlista.append(9)\nlista.sort()\nprint(lista)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'append() retorna algo ou modifica a lista?', hint: 'Modifica a lista original (in-place).' },
      { level: 2, type: 'how', question: 'sort() ordena crescente ou decrescente?', hint: 'Crescente por padrão. Use reverse=True para decrescente.' },
    ],
    options: ['[1, 1, 3, 4, 5, 9]', '[3, 1, 4, 1, 5, 9]', '[9, 5, 4, 3, 1, 1]', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Métodos de lista modificam a lista original.',
      whatFor: 'Construir e organizar coleções de dados.',
      how: 'append adiciona 9. sort ordena crescente.',
      commonMistakes: ['Fazer lista = lista.append() (append retorna None)', 'Confundir sort() com sorted()'],
      realWorldExample: 'Adicionar nova venda e reordenar ranking.',
    },
    difficulty: 'beginner',
    tags: ['lista', 'métodos', 'append', 'sort'],
    xpReward: 75,
    professionalContext: 'Manter lista de transações ordenada.',
    militaryApplication: 'Ordenar alvos por prioridade.',
  },
  {
    id: 'py-struct-dict-1',
    lessonId: 'py-struct-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\npessoa = {"nome": "Ana", "idade": 25}\npessoa["cidade"] = "SP"\nprint(pessoa.get("cargo", "N/A"))\nprint(len(pessoa))\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que usar get() ao invés de pessoa["cargo"]?', hint: 'get() retorna valor padrão se chave não existe.' },
      { level: 2, type: 'how', question: 'Quantas chaves tem o dicionário no final?', hint: 'nome, idade + cidade adicionada = 3.' },
    ],
    options: ['N/A\\n3', 'Erro\\n3', 'None\\n3', 'N/A\\n2'],
    correctAnswer: 0,
    explanation: {
      why: 'get() é seguro para acessar chaves que podem não existir.',
      whatFor: 'Evitar erros ao processar dados incompletos.',
      how: 'get("cargo", "N/A") retorna "N/A" porque cargo não existe.',
      commonMistakes: ['Usar [] com chave inexistente (gera KeyError)', 'Esquecer de adicionar chaves novas'],
      realWorldExample: 'Dados de API podem ter campos opcionais.',
    },
    difficulty: 'beginner',
    tags: ['dicionário', 'get', 'chave'],
    xpReward: 75,
    professionalContext: 'JSONs de APIs frequentemente têm campos opcionais.',
    militaryApplication: 'Ficha de soldado: get("especialidade", "Infantaria").',
  },
  {
    id: 'py-struct-dict-2',
    lessonId: 'py-struct-3',
    type: 'code',
    question: 'Dado o dicionário de vendas por região, calcule o total de vendas. Armazene em `total`.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Como iterar sobre valores de um dicionário?', hint: 'dict.values() retorna apenas os valores.' },
      { level: 2, type: 'how', question: 'Como somar todos os valores?', hint: 'sum(dict.values()) ou loop acumulador.' },
    ],
    starterCode: 'vendas = {"Norte": 15000, "Sul": 22000, "Leste": 18000, "Oeste": 12000}\n# Calcule o total\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '67000', description: 'total deve ser 67000' }],
    explanation: {
      why: 'Dicionários são ótimos para dados categorizados.',
      whatFor: 'Agregações por categoria são operação comum.',
      how: 'sum(vendas.values()) soma todos os valores.',
      commonMistakes: ['Tentar somar o dicionário diretamente', 'Esquecer .values()'],
      realWorldExample: 'Total de vendas por filial.',
    },
    difficulty: 'beginner',
    tags: ['dicionário', 'values', 'soma'],
    xpReward: 75,
    professionalContext: 'Consolidar métricas de diferentes fontes.',
    militaryApplication: 'Total de efetivo: sum(unidades.values()).',
  },

  // ============================================
  // MÓDULO 5: FUNÇÕES (40 exercícios)
  // ============================================
  {
    id: 'py-func-def-1',
    lessonId: 'py-func-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\ndef saudacao(nome):\n    return f"Olá, {nome}!"\n\nmsg = saudacao("Maria")\nprint(msg)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que "return" faz?', hint: 'Envia o resultado de volta para onde a função foi chamada.' },
      { level: 2, type: 'how', question: 'O que é atribuído a msg?', hint: 'O valor que a função retorna.' },
    ],
    options: ['Olá, Maria!', 'saudacao("Maria")', 'None', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Funções encapsulam lógica reutilizável.',
      whatFor: 'Evitar repetição, organizar código, facilitar testes.',
      how: 'def define, parâmetros recebem valores, return devolve resultado.',
      commonMistakes: ['Esquecer o return (retorna None)', 'Confundir parâmetro com argumento'],
      realWorldExample: 'Função de formatação usada em todo o sistema.',
    },
    difficulty: 'beginner',
    tags: ['função', 'def', 'return'],
    xpReward: 75,
    professionalContext: 'Padronizar formatação de mensagens.',
    militaryApplication: 'Função de briefing padronizado.',
  },
  {
    id: 'py-func-def-2',
    lessonId: 'py-func-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\ndef potencia(base, exp=2):\n    return base ** exp\n\nprint(potencia(3))\nprint(potencia(2, 3))\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que é exp=2 na definição?', hint: 'Valor padrão: se não passar exp, usa 2.' },
      { level: 2, type: 'how', question: 'Na primeira chamada, qual é exp?', hint: '2 (padrão). Na segunda, 3 (passado explicitamente).' },
    ],
    options: ['9\\n8', '6\\n6', '9\\n6', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Valores padrão permitem flexibilidade sem repetição.',
      whatFor: 'Criar funções versáteis com comportamento padrão sensato.',
      how: 'potencia(3) = 3**2 = 9. potencia(2,3) = 2**3 = 8.',
      commonMistakes: ['Parâmetros com default devem vir depois dos sem', 'Usar objeto mutável como default'],
      realWorldExample: 'Função de desconto com taxa padrão.',
    },
    difficulty: 'beginner',
    tags: ['função', 'parâmetros', 'default'],
    xpReward: 75,
    professionalContext: 'API com parâmetros opcionais.',
    militaryApplication: 'Função de alerta com nível padrão.',
  },
  {
    id: 'py-func-scope-1',
    lessonId: 'py-func-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nx = 10\n\ndef mudar():\n    x = 20\n    print(x)\n\nmudar()\nprint(x)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'x dentro da função é o mesmo x de fora?', hint: 'Não! x = 20 cria variável LOCAL.' },
      { level: 2, type: 'how', question: 'O x global é modificado?', hint: 'Não. O x dentro da função é diferente.' },
    ],
    options: ['20\\n10', '20\\n20', '10\\n10', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Escopo protege variáveis de modificações acidentais.',
      whatFor: 'Funções isoladas não interferem no resto do código.',
      how: 'x=20 dentro cria variável local. x global continua 10.',
      commonMistakes: ['Pensar que modifica variável global', 'Usar global sem necessidade'],
      realWorldExample: 'Cada função tem suas próprias variáveis.',
    },
    difficulty: 'intermediate',
    tags: ['função', 'escopo', 'local', 'global'],
    xpReward: 100,
    professionalContext: 'Evitar efeitos colaterais em código complexo.',
    militaryApplication: 'Cada operação tem seus próprios parâmetros isolados.',
  },

  // ============================================
  // MÓDULO 6: PANDAS INTRO (35 exercícios)
  // ============================================
  {
    id: 'pd-intro-series-1',
    lessonId: 'pd-intro-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ns = pd.Series([10, 20, 30], index=["a", "b", "c"])\nprint(s["b"])\nprint(s.sum())\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que Series tem índice customizado?', hint: 'Para acessar por nome significativo, não só posição.' },
      { level: 2, type: 'how', question: 'sum() soma os valores ou os índices?', hint: 'Os valores: 10 + 20 + 30.' },
    ],
    options: ['20\\n60', 'b\\n60', '20\\n6', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Series é array com índice, base do Pandas.',
      whatFor: 'Acessar dados por nome, aplicar operações vetorizadas.',
      how: 's["b"] = 20. sum() = 10+20+30 = 60.',
      commonMistakes: ['Confundir índice com posição', 'Esquecer que Series tem métodos estatísticos'],
      realWorldExample: 'Vendas por mês com índice de meses.',
    },
    difficulty: 'beginner',
    tags: ['pandas', 'series', 'índice'],
    xpReward: 75,
    professionalContext: 'Séries temporais de métricas.',
    militaryApplication: 'Efetivo por unidade com índice de código.',
  },
  {
    id: 'pd-intro-df-1',
    lessonId: 'pd-intro-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ndf = pd.DataFrame({\n    "A": [1, 2, 3],\n    "B": [4, 5, 6]\n})\nprint(df.shape)\nprint(df["A"].mean())\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que shape retorna?', hint: '(linhas, colunas) - dimensões do DataFrame.' },
      { level: 2, type: 'how', question: 'df["A"] retorna o quê?', hint: 'Uma Series com os valores da coluna A.' },
    ],
    options: ['(3, 2)\\n2.0', '(2, 3)\\n2.0', '(3, 2)\\n6', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'DataFrame é tabela 2D com linhas e colunas.',
      whatFor: 'Estrutura central do Pandas para dados tabulares.',
      how: 'shape = (3 linhas, 2 colunas). mean([1,2,3]) = 2.0.',
      commonMistakes: ['Confundir ordem de shape', 'Esquecer que df["col"] retorna Series'],
      realWorldExample: 'Verificar dimensões de dataset carregado.',
    },
    difficulty: 'beginner',
    tags: ['pandas', 'dataframe', 'shape', 'mean'],
    xpReward: 75,
    professionalContext: 'Verificar tamanho de datasets.',
    militaryApplication: 'Quantas entradas de log, quantos campos.',
  },

  // ============================================
  // MÓDULO 7: PANDAS MANIPULAÇÃO (50 exercícios)
  // ============================================
  {
    id: 'pd-manip-loc-1',
    lessonId: 'pd-manip-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ndf = pd.DataFrame({\n    "nome": ["Ana", "Carlos", "Maria"],\n    "vendas": [15000, 12000, 18000]\n})\nresultado = df.loc[df["vendas"] > 13000, "nome"]\nprint(resultado.tolist())\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que df["vendas"] > 13000 retorna?', hint: 'Uma Series de True/False para cada linha.' },
      { level: 2, type: 'how', question: 'O que loc[condição, "nome"] faz?', hint: 'Retorna coluna "nome" apenas onde condição é True.' },
    ],
    options: ["['Ana', 'Maria']", "['Carlos']", "['Ana', 'Carlos', 'Maria']", 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'loc permite filtrar linhas E selecionar colunas.',
      whatFor: 'Extrair exatamente os dados necessários.',
      how: 'Ana (15k > 13k ✓) e Maria (18k > 13k ✓).',
      commonMistakes: ['Esquecer parênteses na condição', 'Confundir loc com iloc'],
      realWorldExample: 'Nomes de vendedores acima da meta.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'loc', 'filtro'],
    xpReward: 100,
    professionalContext: 'Relatórios filtrados por critérios.',
    militaryApplication: 'Lista de unidades acima de certo efetivo.',
  },
  {
    id: 'pd-manip-filter-1',
    lessonId: 'pd-manip-2',
    type: 'code',
    question: 'Dado um DataFrame `df` com as colunas "nome", "idade" e "salario", filtre apenas os funcionários com salário maior que 5000 E idade menor que 30.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que precisamos combinar duas condições aqui?', hint: 'Queremos funcionários que atendam AMBOS os critérios.' },
      { level: 2, type: 'how', question: 'Em Pandas, como combinamos condições?', hint: 'Use & para "E", cada condição entre parênteses.' },
    ],
    starterCode: 'import pandas as pd\n\ndf = pd.DataFrame({\n    "nome": ["Ana", "Carlos", "Maria", "João"],\n    "idade": [25, 35, 28, 42],\n    "salario": [6000, 8000, 4500, 7000]\n})\n\n# Filtre\nresultado = ',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '', description: 'Deve retornar Ana e Maria' }],
    explanation: {
      why: 'Filtros combinados são essenciais em análise.',
      whatFor: 'Segmentar dados por múltiplos critérios.',
      how: 'df[(df["salario"] > 5000) & (df["idade"] < 30)].',
      commonMistakes: ['Usar "and" ao invés de "&"', 'Esquecer parênteses'],
      realWorldExample: 'Candidatos qualificados: experiência E formação.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'filtro', 'booleano'],
    xpReward: 100,
    professionalContext: 'Segmentação de público-alvo.',
    militaryApplication: 'Seleção: patente >= X AND especialidade == Y.',
  },

  // ============================================
  // MÓDULO 8: PANDAS ANÁLISE (40 exercícios)
  // ============================================
  {
    id: 'pd-analysis-groupby-1',
    lessonId: 'pd-analysis-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ndf = pd.DataFrame({\n    "regiao": ["Sul", "Norte", "Sul", "Norte"],\n    "vendas": [100, 200, 150, 180]\n})\nresultado = df.groupby("regiao")["vendas"].sum()\nprint(resultado["Sul"])\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que groupby faz?', hint: 'Agrupa linhas pelo valor de uma coluna.' },
      { level: 2, type: 'how', question: 'sum() é aplicado a quê?', hint: 'À coluna "vendas" de cada grupo.' },
    ],
    options: ['250', '100', '380', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'GroupBy permite agregar por categoria.',
      whatFor: 'Relatórios por região, período, categoria.',
      how: 'Sul: 100 + 150 = 250.',
      commonMistakes: ['Esquecer de selecionar coluna de valor', 'Confundir resultado com DataFrame'],
      realWorldExample: 'Total de vendas por filial.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'groupby', 'agregação'],
    xpReward: 100,
    professionalContext: 'Dashboard de métricas por segmento.',
    militaryApplication: 'Efetivo total por região operacional.',
  },

  // ============================================
  // MÓDULO 9: PANDAS AVANÇADO (30 exercícios)
  // ============================================
  {
    id: 'pd-adv-merge-1',
    lessonId: 'pd-adv-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ndf1 = pd.DataFrame({"id": [1, 2], "nome": ["Ana", "Carlos"]})\ndf2 = pd.DataFrame({"id": [1, 3], "vendas": [100, 200]})\nresultado = pd.merge(df1, df2, on="id", how="inner")\nprint(len(resultado))\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que "inner" join retorna?', hint: 'Apenas linhas com match em AMBOS DataFrames.' },
      { level: 2, type: 'how', question: 'Qual id existe em ambos?', hint: 'id=1 existe em df1 e df2. id=2 só df1. id=3 só df2.' },
    ],
    options: ['1', '2', '3', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Inner join retorna interseção.',
      whatFor: 'Combinar apenas registros completos.',
      how: 'Só id=1 existe em ambos = 1 linha.',
      commonMistakes: ['Confundir tipos de join', 'Não verificar chaves duplicadas'],
      realWorldExample: 'Pedidos com dados de cliente (só pedidos de clientes cadastrados).',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'merge', 'join'],
    xpReward: 125,
    professionalContext: 'Cruzar vendas com cadastro de clientes.',
    militaryApplication: 'Cruzar missões com pessoal disponível.',
  },

  // ============================================
  // INGLÊS TÉCNICO (30 exercícios)
  // ============================================
  {
    id: 'eng-read-vocab-1',
    lessonId: 'eng-read-1',
    type: 'output-prediction',
    question: 'What does "deprecated" mean in technical documentation?',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que software marca coisas como deprecated?', hint: 'Para avisar que será removido em versões futuras.' },
    ],
    options: [
      'New and recommended feature',
      'Feature that will be removed in future versions',
      'Critical bug in the code',
      'Performance optimization'
    ],
    correctAnswer: 1,
    explanation: {
      why: 'Deprecated indica funcionalidade em desuso.',
      whatFor: 'Evitar usar código que será removido.',
      how: 'Procure alternativa recomendada na documentação.',
      commonMistakes: ['Ignorar avisos de deprecation', 'Confundir com "broken"'],
      realWorldExample: 'pandas.DataFrame.append é deprecated, use pd.concat.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'vocabulário', 'documentação'],
    xpReward: 50,
    professionalContext: 'Manter código atualizado.',
    militaryApplication: 'Equipamento deprecated = será substituído.',
  },
  {
    id: 'eng-read-vocab-2',
    lessonId: 'eng-read-1',
    type: 'output-prediction',
    question: 'In the phrase "This method returns a boolean indicating whether the operation was successful", what does "returns" mean?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que uma função faz quando termina?', hint: 'Devolve (returns) um resultado.' },
    ],
    options: [
      'Recebe como entrada',
      'Devolve/retorna como saída',
      'Armazena internamente',
      'Imprime na tela'
    ],
    correctAnswer: 1,
    explanation: {
      why: 'Returns indica o output da função.',
      whatFor: 'Saber o que esperar ao chamar a função.',
      how: 'Seção "Returns" da documentação explica o tipo/valor retornado.',
      commonMistakes: ['Confundir return com print', 'Não verificar tipo de retorno'],
      realWorldExample: 'len() returns an integer.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'vocabulário', 'função'],
    xpReward: 50,
    professionalContext: 'Ler documentação de APIs.',
    militaryApplication: 'Relatório "returns" status da missão.',
  },
  {
    id: 'eng-pattern-cond-1',
    lessonId: 'eng-pattern-2',
    type: 'output-prediction',
    question: 'What does "unless otherwise specified" mean?',
    socraticHints: [
      { level: 1, type: 'how', question: '"Unless" é similar a qual palavra?', hint: 'Exceto se, a menos que.' },
    ],
    options: [
      'Always do this',
      'Never do this',
      'Except if stated differently',
      'Only in special cases'
    ],
    correctAnswer: 2,
    explanation: {
      why: 'Padrão comum para indicar comportamento default.',
      whatFor: 'Entender quando padrão se aplica.',
      how: '"Unless X" = "Exceto se X for verdade".',
      commonMistakes: ['Confundir unless com if', 'Não perceber que é comportamento padrão'],
      realWorldExample: 'The default port is 8080 unless otherwise specified.',
    },
    difficulty: 'intermediate',
    tags: ['inglês', 'padrões', 'condicional'],
    xpReward: 75,
    professionalContext: 'Configurações com defaults.',
    militaryApplication: 'Procedimento padrão unless comandante ordene diferente.',
  },
];
