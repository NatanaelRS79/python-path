import { Exercise } from '@/types/learning';

// ============================================
// BANCO DE EXERCÍCIOS COMPLETO
// Mínimo: 300 exercícios
// Estrutura: Hints Socráticos + Contexto Militar
// ============================================

export const exercisesBank: Exercise[] = [
  // ============================================
  // MÓDULO 1: FUNDAMENTOS DO PYTHON (40 exercícios)
  // ============================================
  
  // --- Variáveis (py-fund-2) ---
  {
    id: 'py-fund-var-1',
    lessonId: 'py-fund-2',
    type: 'code',
    question: 'Crie uma variável chamada `idade` que guarde sua idade. Depois, crie outra variável `ano_nascimento` que calcule o ano em que você nasceu (considere o ano atual como 2025).',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que você acha que precisamos de duas variáveis diferentes aqui?', hint: 'Pense: uma guarda um dado direto, outra é calculada.' },
      { level: 2, type: 'what-for', question: 'Se você tivesse que calcular o ano de nascimento de 1000 pessoas, preferiria fazer manualmente ou deixar o computador fazer?', hint: 'Variáveis permitem que o computador faça cálculos para nós.' },
      { level: 3, type: 'how', question: 'Qual operação matemática transforma idade em ano de nascimento?', hint: 'Subtração: ano_atual - idade = ano_nascimento' },
    ],
    starterCode: '# Crie suas variáveis aqui\n\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '', description: 'Variável idade deve existir e ser um número' }],
    explanation: {
      why: 'Variáveis existem porque precisamos guardar informações para usar depois. Imagine tentar fazer contas de cabeça com 100 números - impossível!',
      whatFor: 'Elas resolvem o problema de não precisar lembrar de tudo. O computador lembra para você.',
      how: 'Em Python, usamos o sinal de igual (=) para "guardar" um valor em um nome.',
      commonMistakes: ['Usar espaços no nome da variável (use underscores)', 'Começar com números', 'Confundir = (atribuição) com == (comparação)'],
      realWorldExample: 'Em uma planilha de funcionários, cada célula é uma variável.',
    },
    difficulty: 'beginner',
    tags: ['variáveis', 'atribuição', 'cálculo'],
    xpReward: 50,
    professionalContext: 'Em sistemas de RH, variáveis armazenam dados de funcionários.',
    militaryApplication: 'Sistemas de logística usam variáveis para calcular suprimentos: número_soldados * rações_por_dia = total_rações.',
  },
  {
    id: 'py-fund-var-2',
    lessonId: 'py-fund-2',
    type: 'output-prediction',
    question: 'Qual será o output do seguinte código?\n\n```python\nx = 5\ny = x\nx = 10\nprint(y)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Quando y = x, o que é copiado - a variável x ou o VALOR que x contém?', hint: 'O valor é copiado, não a variável em si.' },
      { level: 2, type: 'how', question: 'Depois de y = x, o que acontece com y se mudarmos x?', hint: 'Nada. y tem sua própria cópia do valor.' },
    ],
    options: ['5', '10', 'x', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Entender que variáveis guardam valores, não referências, é fundamental.',
      whatFor: 'Isso previne bugs onde você altera uma variável pensando que afeta outra.',
      how: 'y = x copia o valor de x (5) para y. Depois, x muda para 10, mas y continua 5.',
      commonMistakes: ['Pensar que y é um "apelido" para x', 'Confundir com comportamento de listas'],
      realWorldExample: 'Copiar uma célula de planilha não cria vínculo com a original.',
    },
    difficulty: 'beginner',
    tags: ['variáveis', 'atribuição', 'cópia'],
    xpReward: 50,
    professionalContext: 'Sistemas financeiros: backup de valores antes de cálculos.',
    militaryApplication: 'Registro de posição anterior antes de atualizar: posicao_anterior = posicao_atual',
  },
  {
    id: 'py-fund-var-3',
    lessonId: 'py-fund-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nnome = "Maria"\nsobrenome = "Silva"\nnome_completo = nome + " " + sobrenome\nprint(nome_completo)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que acontece quando usamos + com textos?', hint: 'Textos são "colados" juntos (concatenação).' },
      { level: 2, type: 'how', question: 'Por que adicionamos " " entre nome e sobrenome?', hint: 'Sem o espaço, seria "MariaSilva".' },
    ],
    options: ['Maria Silva', 'MariaSilva', 'nome sobrenome', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Concatenação de strings é operação básica para construir textos.',
      whatFor: 'Criar mensagens dinâmicas, relatórios, outputs formatados.',
      how: 'O operador + com strings junta os textos na ordem.',
      commonMistakes: ['Esquecer o espaço entre palavras', 'Tentar concatenar string com número sem converter'],
      realWorldExample: 'Gerar nomes completos em formulários.',
    },
    difficulty: 'beginner',
    tags: ['variáveis', 'strings', 'concatenação'],
    xpReward: 50,
    professionalContext: 'Sistemas geram mensagens: "Bem-vindo, " + nome_usuario',
    militaryApplication: 'Relatórios: "Missão " + codigo + " concluída com " + status',
  },
  {
    id: 'py-fund-var-4',
    lessonId: 'py-fund-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nquantidade = "10"\npreco = 5\ntotal = quantidade * preco\nprint(total)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'quantidade é um número ou texto?', hint: 'Está entre aspas - é texto (string).' },
      { level: 2, type: 'how', question: 'O que acontece quando multiplicamos string por número?', hint: 'A string é repetida N vezes.' },
    ],
    options: ['50', '1010101010', 'Erro', '10 10 10 10 10'],
    correctAnswer: 1,
    explanation: {
      why: 'Python diferencia tipos. "10" não é igual a 10.',
      whatFor: 'Evitar bugs ao processar dados de formulários (sempre vêm como texto).',
      how: '"10" * 5 repete a string 5 vezes: "1010101010".',
      commonMistakes: ['Assumir que números entre aspas são números', 'Não converter tipos antes de operações'],
      realWorldExample: 'Dados de CSV vêm como texto e precisam de conversão.',
    },
    difficulty: 'beginner',
    tags: ['variáveis', 'tipos', 'multiplicação'],
    xpReward: 75,
    professionalContext: 'Parsing de dados de APIs frequentemente requer conversão de tipos.',
    militaryApplication: 'Leitura de sensores: valores chegam como texto, precisam virar números.',
  },
  {
    id: 'py-fund-var-5',
    lessonId: 'py-fund-2',
    type: 'code',
    question: 'Converta a string "42" para inteiro e multiplique por 3. Armazene o resultado em uma variável chamada `resultado`.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que precisamos converter antes de calcular?', hint: '"42" * 3 daria "424242", não 126.' },
      { level: 2, type: 'how', question: 'Qual função converte texto para número inteiro?', hint: 'int() converte para inteiro.' },
    ],
    starterCode: 'texto = "42"\n# Converta e calcule\n',
    expectedOutput: '126',
    testCases: [{ input: '', expectedOutput: '126', description: 'resultado deve ser 126' }],
    explanation: {
      why: 'Conversão de tipos é essencial ao processar dados externos.',
      whatFor: 'Dados de arquivos, APIs, formulários sempre chegam como texto.',
      how: 'int("42") converte string para inteiro. float() para decimal.',
      commonMistakes: ['Tentar converter texto que não é número', 'Esquecer de converter antes de calcular'],
      realWorldExample: 'Formulário web: idade do usuário chega como "25", precisa virar 25.',
    },
    difficulty: 'beginner',
    tags: ['variáveis', 'tipos', 'conversão'],
    xpReward: 75,
    professionalContext: 'ETL pipelines fazem conversões massivas de tipos.',
    militaryApplication: 'Coordenadas GPS chegam como texto, precisam virar números para cálculos.',
  },
  {
    id: 'py-fund-var-6',
    lessonId: 'py-fund-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\na = 10\nb = 3\nprint(a // b)\nprint(a % b)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Qual a diferença entre / e //?', hint: '/ dá resultado com decimal, // dá só a parte inteira.' },
      { level: 2, type: 'how', question: 'O que % (módulo) retorna?', hint: 'O resto da divisão.' },
    ],
    options: ['3\\n1', '3.33\\n0', '3\\n0', '10\\n3'],
    correctAnswer: 0,
    explanation: {
      why: 'Divisão inteira e módulo são operações distintas com usos específicos.',
      whatFor: 'Paginação (quantas páginas), distribuição igualitária, verificar par/ímpar.',
      how: '10 // 3 = 3 (divisão inteira). 10 % 3 = 1 (resto: 10 = 3*3 + 1).',
      commonMistakes: ['Confundir // com /', 'Não saber que % é o resto'],
      realWorldExample: 'Distribuir 10 tarefas entre 3 pessoas: cada um faz 3, sobra 1.',
    },
    difficulty: 'beginner',
    tags: ['variáveis', 'operadores', 'divisão'],
    xpReward: 75,
    professionalContext: 'Paginação: total_items // items_por_pagina = numero_paginas.',
    militaryApplication: 'Distribuir munição: total // soldados = por_soldado, total % soldados = sobra.',
  },

  // --- Tipos de Dados (py-fund-3) ---
  {
    id: 'py-fund-type-1',
    lessonId: 'py-fund-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nprint(type(3.14))\nprint(type("3.14"))\nprint(type(True))\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que o computador diferencia "3.14" de 3.14?', hint: 'Um é texto, outro é número. Operações diferentes.' },
      { level: 2, type: 'how', question: 'O que a função type() retorna?', hint: 'O tipo do dado: int, float, str, bool, etc.' },
    ],
    options: ["<class 'float'>\\n<class 'str'>\\n<class 'bool'>", "<class 'int'>\\n<class 'str'>\\n<class 'int'>", 'float\\nstr\\nbool', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Tipos determinam quais operações são válidas e como dados são armazenados.',
      whatFor: 'Debugging, validação de dados, escolha de operações corretas.',
      how: 'type() retorna a classe/tipo do objeto.',
      commonMistakes: ['Confundir número com string de número', 'Não saber que True/False são tipo bool'],
      realWorldExample: 'Validar que campo de idade recebeu número, não texto.',
    },
    difficulty: 'beginner',
    tags: ['tipos', 'type', 'float', 'str', 'bool'],
    xpReward: 50,
    professionalContext: 'Validação de APIs: verificar tipos antes de processar.',
    militaryApplication: 'Verificar tipo de coordenada antes de cálculo de trajetória.',
  },
  {
    id: 'py-fund-type-2',
    lessonId: 'py-fund-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nprint(bool(0))\nprint(bool(""))\nprint(bool("False"))\nprint(bool([]))\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que é considerado "falso" em Python?', hint: 'Zero, vazio, None são "falsy".' },
      { level: 2, type: 'how', question: '"False" entre aspas é texto ou booleano?', hint: 'É texto (string). E texto não-vazio é truthy.' },
    ],
    options: ['False\\nFalse\\nTrue\\nFalse', 'False\\nFalse\\nFalse\\nFalse', 'True\\nFalse\\nTrue\\nFalse', '0\\n\\nFalse\\n[]'],
    correctAnswer: 0,
    explanation: {
      why: 'Python usa "truthy" e "falsy" para avaliar qualquer valor como booleano.',
      whatFor: 'Condicionais mais elegantes: if lista: (ao invés de if len(lista) > 0:)',
      how: '0, "", [], None são falsy. Qualquer outro valor é truthy.',
      commonMistakes: ['"False" (string) é truthy, não False!', 'Lista vazia [] é falsy'],
      realWorldExample: 'if usuario: (verifica se usuário existe/não é vazio).',
    },
    difficulty: 'intermediate',
    tags: ['tipos', 'bool', 'truthy', 'falsy'],
    xpReward: 100,
    professionalContext: 'Validação: if dados: (verifica se há dados para processar).',
    militaryApplication: 'Verificação rápida: if suprimentos: (há suprimentos?) else: (reabastecer).',
  },
  {
    id: 'py-fund-type-3',
    lessonId: 'py-fund-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nx = 5\ny = 5.0\nprint(x == y)\nprint(type(x) == type(y))\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'x e y têm o mesmo valor? E o mesmo tipo?', hint: 'Valor: sim (5 = 5.0). Tipo: não (int ≠ float).' },
      { level: 2, type: 'how', question: 'O que == compara - valor ou tipo?', hint: 'Valor. Para comparar tipos, use type().' },
    ],
    options: ['True\\nFalse', 'True\\nTrue', 'False\\nFalse', 'False\\nTrue'],
    correctAnswer: 0,
    explanation: {
      why: 'Python compara valores com ==, não tipos. 5 == 5.0 é True.',
      whatFor: 'Flexibilidade em comparações, mas atenção em casos específicos.',
      how: '== compara valor. type() compara tipo. is compara identidade.',
      commonMistakes: ['Assumir que tipos diferentes nunca são iguais', 'Não verificar tipo quando necessário'],
      realWorldExample: 'Cálculos financeiros: 100 == 100.0 permite flexibilidade.',
    },
    difficulty: 'intermediate',
    tags: ['tipos', 'comparação', 'int', 'float'],
    xpReward: 75,
    professionalContext: 'Sistemas financeiros precisam cuidado com int vs float.',
    militaryApplication: 'Calibragem: 100 metros pode ser 100 ou 100.0 dependendo do sensor.',
  },

  // --- Exercícios de Prática (py-fund-4) ---
  {
    id: 'py-fund-prac-1',
    lessonId: 'py-fund-4',
    type: 'code',
    question: 'Calcule o salário líquido dado o bruto. Deduza 11% de INSS e 15% de IR (sobre o bruto). Armazene em `salario_liquido`.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que calculamos deduções sobre o bruto, não sobre o líquido?', hint: 'Dedução é sobre o que você ganha, não sobre o que sobra.' },
      { level: 2, type: 'how', question: 'Como calcular porcentagem? Ex: 11% de 1000?', hint: '1000 * 0.11 = 110 (ou 1000 * 11 / 100).' },
    ],
    starterCode: 'salario_bruto = 5000\n# Calcule as deduções e o líquido\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '3700', description: 'salario_liquido deve ser 3700' }],
    explanation: {
      why: 'Cálculos trabalhistas são comuns em análise de RH.',
      whatFor: 'Automatizar folha de pagamento, simular impactos salariais.',
      how: 'liquido = bruto - (bruto * 0.11) - (bruto * 0.15) = bruto * (1 - 0.26).',
      commonMistakes: ['Aplicar desconto sobre desconto', 'Usar porcentagem errada (11 ao invés de 0.11)'],
      realWorldExample: 'Sistemas de RH calculam isso para milhares de funcionários.',
    },
    difficulty: 'beginner',
    tags: ['cálculo', 'porcentagem', 'variáveis'],
    xpReward: 100,
    professionalContext: 'Folha de pagamento automatizada.',
    militaryApplication: 'Cálculo de soldos com deduções por dependentes e benefícios.',
  },
  {
    id: 'py-fund-prac-2',
    lessonId: 'py-fund-4',
    type: 'code',
    question: 'Converta temperatura de Celsius para Fahrenheit. Fórmula: F = C * 9/5 + 32. Dado `celsius = 25`, calcule `fahrenheit`.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que existe conversão de temperatura?', hint: 'Diferentes sistemas de medida em diferentes países.' },
      { level: 2, type: 'how', question: 'Qual a ordem de operações na fórmula?', hint: 'Multiplicação primeiro, depois soma.' },
    ],
    starterCode: 'celsius = 25\n# Converta para Fahrenheit\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '77', description: 'fahrenheit deve ser 77.0' }],
    explanation: {
      why: 'Conversões são comuns quando integrando sistemas de diferentes origens.',
      whatFor: 'Padronizar unidades antes de análises.',
      how: 'F = 25 * 9/5 + 32 = 45 + 32 = 77.',
      commonMistakes: ['Ordem errada de operações', 'Usar divisão inteira quando precisa de float'],
      realWorldExample: 'Sistemas meteorológicos integram dados de diferentes países.',
    },
    difficulty: 'beginner',
    tags: ['cálculo', 'conversão', 'fórmula'],
    xpReward: 75,
    professionalContext: 'APIs de clima podem retornar em diferentes unidades.',
    militaryApplication: 'Equipamentos de diferentes países usam unidades diferentes.',
  },

  // ============================================
  // MÓDULO 2: LÓGICA E DECISÕES (45 exercícios)
  // ============================================
  {
    id: 'py-logic-cond-1',
    lessonId: 'py-logic-1',
    type: 'output-prediction',
    question: 'Analise o código abaixo e diga qual será o output:\n\n```python\nx = 15\nif x > 20:\n    print("Grande")\nelif x > 10:\n    print("Médio")\nelse:\n    print("Pequeno")\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que existem três caminhos diferentes nesse código?', hint: 'Cada caminho representa uma "decisão" diferente baseada no valor de x.' },
      { level: 2, type: 'how', question: 'Em que ordem o Python avalia as condições?', hint: 'De cima para baixo. Assim que uma é verdadeira, executa e ignora o resto.' },
    ],
    options: ['Grande', 'Médio', 'Pequeno', 'Erro'],
    correctAnswer: 1,
    explanation: {
      why: 'Condicionais permitem programas se adaptarem a diferentes situações.',
      whatFor: 'Classificar, categorizar, tomar decisões automáticas.',
      how: '15 > 20? Não. 15 > 10? Sim! Executa "Médio" e ignora else.',
      commonMistakes: ['Esquecer dois pontos', 'Indentação errada', 'Usar = ao invés de =='],
      realWorldExample: 'Classificação de clientes por faixa de consumo.',
    },
    difficulty: 'beginner',
    tags: ['condicionais', 'if', 'elif', 'else'],
    xpReward: 75,
    professionalContext: 'Sistemas de crédito classificam risco por faixas.',
    militaryApplication: 'Classificação de ameaça: crítica, moderada, baixa.',
  },
  {
    id: 'py-logic-cond-2',
    lessonId: 'py-logic-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nnota = 85\nif nota >= 90:\n    conceito = "A"\nif nota >= 80:\n    conceito = "B"\nif nota >= 70:\n    conceito = "C"\nprint(conceito)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que usar "if" separados ao invés de "elif"?', hint: 'Cada if é avaliado independentemente!' },
      { level: 2, type: 'how', question: 'Quantos desses ifs são verdadeiros para nota=85?', hint: '85 >= 90? Não. 85 >= 80? Sim. 85 >= 70? Sim.' },
    ],
    options: ['A', 'B', 'C', 'Erro'],
    correctAnswer: 2,
    explanation: {
      why: 'ifs separados são TODOS avaliados. elif para quando quer apenas um.',
      whatFor: 'Entender diferença entre condições exclusivas e independentes.',
      how: '85 >= 80 → conceito="B". Depois 85 >= 70 → conceito="C". Último ganha.',
      commonMistakes: ['Pensar que if separados funcionam como elif', 'Não perceber que valor é sobrescrito'],
      realWorldExample: 'Bug clássico: aplicar múltiplos descontos quando só deveria ser um.',
    },
    difficulty: 'intermediate',
    tags: ['condicionais', 'if', 'bug'],
    xpReward: 100,
    professionalContext: 'Regras de negócio mal implementadas causam problemas.',
    militaryApplication: 'Múltiplas condições de alerta: cada uma deve ser elif, não if.',
  },
  {
    id: 'py-logic-cond-3',
    lessonId: 'py-logic-1',
    type: 'code',
    question: 'Escreva código que classifique uma idade: "Menor" (< 18), "Adulto" (18-64), "Idoso" (>= 65). Armazene em `categoria`.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que precisamos de múltiplas condições?', hint: 'São 3 categorias mutuamente exclusivas.' },
      { level: 2, type: 'how', question: 'Como verificar se está entre 18 e 64?', hint: 'idade >= 18 and idade < 65, ou verificar as outras primeiro.' },
    ],
    starterCode: 'idade = 45\n# Classifique a idade\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: 'Adulto', description: 'categoria deve ser "Adulto"' }],
    explanation: {
      why: 'Classificação por faixas é operação comum em análise de dados.',
      whatFor: 'Segmentar público, aplicar regras diferenciadas.',
      how: 'if idade < 18 elif idade < 65 else (65+).',
      commonMistakes: ['Esquecer casos limite (exatamente 18, 65)', 'Condições sobrepostas'],
      realWorldExample: 'Planos de saúde com preços por faixa etária.',
    },
    difficulty: 'beginner',
    tags: ['condicionais', 'classificação', 'faixas'],
    xpReward: 75,
    professionalContext: 'Segmentação de clientes por faixa etária.',
    militaryApplication: 'Classificação de efetivo: reserva, ativo, veterano.',
  },
  {
    id: 'py-logic-op-1',
    lessonId: 'py-logic-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\na = True\nb = False\nprint(a and b)\nprint(a or b)\nprint(not a)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que "and" exige para ser True?', hint: 'AMBOS precisam ser True.' },
      { level: 2, type: 'how', question: 'O que "or" exige para ser True?', hint: 'PELO MENOS UM precisa ser True.' },
    ],
    options: ['False\\nTrue\\nFalse', 'True\\nTrue\\nFalse', 'False\\nFalse\\nTrue', 'True\\nFalse\\nTrue'],
    correctAnswer: 0,
    explanation: {
      why: 'Operadores lógicos combinam condições.',
      whatFor: 'Criar condições complexas: "se A E B" ou "se A OU B".',
      how: 'and: ambos True. or: pelo menos um True. not: inverte.',
      commonMistakes: ['Confundir and com or', 'Esquecer que not inverte'],
      realWorldExample: 'Aprovar empréstimo SE renda_ok AND score_ok.',
    },
    difficulty: 'beginner',
    tags: ['operadores', 'lógica', 'and', 'or', 'not'],
    xpReward: 75,
    professionalContext: 'Regras de aprovação combinam múltiplos critérios.',
    militaryApplication: 'Autorização: patente_ok AND clearance_ok.',
  },
  {
    id: 'py-logic-op-2',
    lessonId: 'py-logic-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nx = 5\nprint(x > 3 and x < 10)\nprint(x < 3 or x > 7)\nprint(not(x == 5))\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'x está entre 3 e 10?', hint: '5 > 3? Sim. 5 < 10? Sim. Ambos True → True.' },
      { level: 2, type: 'how', question: 'x é menor que 3 OU maior que 7?', hint: '5 < 3? Não. 5 > 7? Não. Nenhum True → False.' },
    ],
    options: ['True\\nFalse\\nFalse', 'True\\nTrue\\nFalse', 'False\\nFalse\\nTrue', 'True\\nFalse\\nTrue'],
    correctAnswer: 0,
    explanation: {
      why: 'Combinar comparações com operadores lógicos.',
      whatFor: 'Verificar intervalos, exclusões, condições compostas.',
      how: '5 > 3 and 5 < 10 → True. 5 < 3 or 5 > 7 → False. not(True) → False.',
      commonMistakes: ['Confundir precedência', 'Não usar parênteses quando necessário'],
      realWorldExample: 'Filtrar produtos: preco >= 10 and preco <= 50.',
    },
    difficulty: 'beginner',
    tags: ['operadores', 'lógica', 'comparação'],
    xpReward: 75,
    professionalContext: 'Filtros de e-commerce usam and/or.',
    militaryApplication: 'Critérios de seleção: altura >= 1.60 and idade <= 30.',
  },
  {
    id: 'py-logic-op-3',
    lessonId: 'py-logic-2',
    type: 'code',
    question: 'Verifique se um ano é bissexto. Regra: divisível por 4, EXCETO se divisível por 100 (a menos que também seja divisível por 400). Armazene True/False em `bissexto`.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que a regra é complexa?', hint: 'Calendário precisa de ajustes para manter sincronização com o Sol.' },
      { level: 2, type: 'how', question: 'Como verificar divisibilidade?', hint: 'ano % 4 == 0 significa divisível por 4.' },
      { level: 3, type: 'how', question: 'Como combinar as condições?', hint: '(div por 4 AND não div por 100) OR (div por 400).' },
    ],
    starterCode: 'ano = 2024\n# Verifique se é bissexto\n',
    expectedOutput: '',
    testCases: [
      { input: '', expectedOutput: 'True', description: '2024 é bissexto' },
    ],
    explanation: {
      why: 'Lógica de calendário é exemplo clássico de condições compostas.',
      whatFor: 'Cálculo de datas, validações de formulários.',
      how: '(ano % 4 == 0 and ano % 100 != 0) or (ano % 400 == 0).',
      commonMistakes: ['Esquecer a exceção do século', 'Ordem errada de avaliação'],
      realWorldExample: 'Sistemas de calendário, cálculo de dias entre datas.',
    },
    difficulty: 'intermediate',
    tags: ['lógica', 'operadores', 'algoritmo'],
    xpReward: 125,
    professionalContext: 'Bibliotecas de datas implementam isso internamente.',
    militaryApplication: 'Planejamento de operações considera calendário preciso.',
  },

  // ============================================
  // MÓDULO 3: LOOPS (50 exercícios)
  // ============================================
  {
    id: 'py-loop-for-1',
    lessonId: 'py-loops-1',
    type: 'output-prediction',
    question: 'O que este código imprime?\n\n```python\nresultado = 0\nfor numero in [1, 2, 3, 4, 5]:\n    resultado = resultado + numero\nprint(resultado)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que usamos um loop ao invés de somar manualmente?', hint: 'E se a lista tivesse 1000 números?' },
      { level: 2, type: 'how', question: 'O que acontece com `resultado` a cada iteração?', hint: 'resultado começa em 0. Depois: 0+1=1, 1+2=3, 3+3=6...' },
    ],
    options: ['15', '5', '0', '[1, 2, 3, 4, 5]'],
    correctAnswer: 0,
    explanation: {
      why: 'Loops existem para automatizar repetições.',
      whatFor: 'Processar qualquer quantidade de dados com o mesmo código.',
      how: '0+1=1, 1+2=3, 3+3=6, 6+4=10, 10+5=15.',
      commonMistakes: ['Esquecer de inicializar acumulador', 'Modificar lista durante iteração'],
      realWorldExample: 'Somar vendas do mês.',
    },
    difficulty: 'beginner',
    tags: ['loops', 'for', 'acumulador'],
    xpReward: 75,
    professionalContext: 'Relatórios somam milhares de transações.',
    militaryApplication: 'Somar efetivo de todas as unidades.',
  },
  {
    id: 'py-loop-for-2',
    lessonId: 'py-loops-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nfor i in range(3):\n    for j in range(2):\n        print(f"{i},{j}", end=" ")\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que significa ter um loop dentro de outro?', hint: 'Para cada valor de i, j percorre todos os seus valores.' },
      { level: 2, type: 'how', question: 'Quantas vezes o print é executado?', hint: '3 valores de i × 2 valores de j = 6 execuções.' },
    ],
    options: ['0,0 0,1 1,0 1,1 2,0 2,1', '0,0 1,1 2,2', '0,1 1,2 2,3', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Loops aninhados processam combinações/matrizes.',
      whatFor: 'Tabelas, grades, todas combinações possíveis.',
      how: 'i=0: j=0,1. i=1: j=0,1. i=2: j=0,1.',
      commonMistakes: ['Confundir qual loop é externo/interno', 'Esquecer que range(3) é 0,1,2'],
      realWorldExample: 'Processar matriz linha por linha.',
    },
    difficulty: 'intermediate',
    tags: ['loops', 'aninhado', 'range'],
    xpReward: 100,
    professionalContext: 'Tabelas pivot, análise de matriz.',
    militaryApplication: 'Grade de coordenadas: cada célula do mapa.',
  },
  {
    id: 'py-loop-for-3',
    lessonId: 'py-loops-1',
    type: 'code',
    question: 'Calcule o fatorial de n usando um loop. Fatorial de 5 = 5 × 4 × 3 × 2 × 1 = 120. Armazene em `fatorial`.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que multiplicar em sequência?', hint: 'Fatorial é produto de todos números de n até 1.' },
      { level: 2, type: 'how', question: 'Como iterar de n até 1?', hint: 'range(n, 0, -1) ou range(1, n+1).' },
    ],
    starterCode: 'n = 5\nfatorial = 1\n# Complete o loop\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '120', description: 'fatorial deve ser 120' }],
    explanation: {
      why: 'Fatorial é base para cálculos de combinação/permutação.',
      whatFor: 'Probabilidade, estatística, análise combinatória.',
      how: 'fatorial = 1. Para i de 1 a n: fatorial *= i.',
      commonMistakes: ['Inicializar com 0 (multiplicar por 0 = 0)', 'Esquecer de incluir n no range'],
      realWorldExample: 'Calcular número de combinações possíveis.',
    },
    difficulty: 'intermediate',
    tags: ['loops', 'matemática', 'fatorial'],
    xpReward: 100,
    professionalContext: 'Base para cálculos estatísticos.',
    militaryApplication: 'Quantas formas de organizar patrulha de n soldados?',
  },
  {
    id: 'py-loop-while-1',
    lessonId: 'py-loops-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nx = 10\nwhile x > 0:\n    print(x, end=" ")\n    x = x - 3\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Quando while para de executar?', hint: 'Quando x <= 0.' },
      { level: 2, type: 'how', question: 'Quais valores de x são impressos?', hint: '10, 7, 4, 1. Depois x=-2 e para.' },
    ],
    options: ['10 7 4 1', '10 7 4 1 -2', '10 9 8 7 6 5 4 3 2 1', 'Loop infinito'],
    correctAnswer: 0,
    explanation: {
      why: 'While continua enquanto condição é True.',
      whatFor: 'Quando não sabemos quantas iterações precisamos.',
      how: 'x=10 (print), x=7 (print), x=4 (print), x=1 (print), x=-2 (para).',
      commonMistakes: ['Esquecer de atualizar a variável (loop infinito)', 'Condição errada'],
      realWorldExample: 'Processar até acabar o estoque.',
    },
    difficulty: 'beginner',
    tags: ['loops', 'while', 'condição'],
    xpReward: 75,
    professionalContext: 'Consumir fila até esvaziar.',
    militaryApplication: 'Continuar busca enquanto há área não explorada.',
  },
  {
    id: 'py-loop-comp-1',
    lessonId: 'py-loops-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nnumeros = [1, 2, 3, 4, 5]\ndobros = [x * 2 for x in numeros]\nprint(dobros)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que usar list comprehension ao invés de loop normal?', hint: 'Mais conciso e "Pythonic".' },
      { level: 2, type: 'how', question: 'O que a expressão "x * 2 for x in numeros" faz?', hint: 'Para cada x, calcula x*2 e coloca na lista.' },
    ],
    options: ['[2, 4, 6, 8, 10]', '[1, 2, 3, 4, 5, 1, 2, 3, 4, 5]', '10', '[1, 4, 9, 16, 25]'],
    correctAnswer: 0,
    explanation: {
      why: 'List comprehension é forma concisa de criar listas.',
      whatFor: 'Transformar, filtrar, criar listas de forma elegante.',
      how: '[expressão for item in iterável] aplica expressão a cada item.',
      commonMistakes: ['Esquecer os colchetes', 'Confundir ordem (expressão vem antes do for)'],
      realWorldExample: 'Converter todas temperaturas de C para F.',
    },
    difficulty: 'intermediate',
    tags: ['loops', 'comprehension', 'lista'],
    xpReward: 100,
    professionalContext: 'Transformar colunas de dados.',
    militaryApplication: 'Calcular distância para cada alvo: [dist(alvo) for alvo in alvos].',
  },
  {
    id: 'py-loop-comp-2',
    lessonId: 'py-loops-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nnumeros = [1, 2, 3, 4, 5, 6]\npares = [x for x in numeros if x % 2 == 0]\nprint(pares)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que o "if" faz dentro da comprehension?', hint: 'Filtra: só inclui se condição for True.' },
      { level: 2, type: 'how', question: 'x % 2 == 0 verifica o quê?', hint: 'Se x é divisível por 2 (par).' },
    ],
    options: ['[2, 4, 6]', '[1, 3, 5]', '[1, 2, 3, 4, 5, 6]', '[0, 0, 0]'],
    correctAnswer: 0,
    explanation: {
      why: 'Comprehension com filtro é forma concisa de selecionar elementos.',
      whatFor: 'Filtrar dados sem criar variáveis intermediárias.',
      how: '[x for x in lista if condição] inclui x apenas se condição True.',
      commonMistakes: ['Posição errada do if', 'Confundir com if-else (que vem antes do for)'],
      realWorldExample: 'Filtrar transações acima de certo valor.',
    },
    difficulty: 'intermediate',
    tags: ['loops', 'comprehension', 'filtro'],
    xpReward: 100,
    professionalContext: 'emails_validos = [e for e in emails if "@" in e].',
    militaryApplication: 'alvos_prioritarios = [a for a in alvos if a.ameaca > 7].',
  },

  // ============================================
  // MÓDULO 4: ESTRUTURAS DE DADOS (45 exercícios)
  // ============================================
  {
    id: 'py-struct-list-1',
    lessonId: 'py-struct-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nlista = [10, 20, 30, 40, 50]\nprint(lista[1])\nprint(lista[-1])\nprint(lista[1:4])\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que índices começam em 0?', hint: 'Convenção da maioria das linguagens.' },
      { level: 2, type: 'how', question: 'O que índice negativo significa?', hint: 'Conta de trás para frente. -1 é o último.' },
    ],
    options: ['20\\n50\\n[20, 30, 40]', '10\\n50\\n[20, 30, 40]', '20\\n40\\n[10, 20, 30, 40]', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Índices permitem acessar elementos específicos.',
      whatFor: 'Selecionar, modificar, fatiar dados.',
      how: 'lista[1]=20. lista[-1]=50. lista[1:4] inclui índices 1,2,3.',
      commonMistakes: ['Pensar que índice 1 é o primeiro', 'Esquecer que slice exclui o último índice'],
      realWorldExample: 'Últimos 3 meses de vendas: vendas[-3:].',
    },
    difficulty: 'beginner',
    tags: ['lista', 'índice', 'slice'],
    xpReward: 75,
    professionalContext: 'Séries temporais: acessar períodos específicos.',
    militaryApplication: 'Últimas 5 posições reportadas: posicoes[-5:].',
  },
  {
    id: 'py-struct-list-2',
    lessonId: 'py-struct-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nlista = [3, 1, 4, 1, 5]\nlista.append(9)\nlista.sort()\nprint(lista)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'append() retorna algo ou modifica a lista?', hint: 'Modifica a lista original (in-place).' },
      { level: 2, type: 'how', question: 'sort() ordena crescente ou decrescente?', hint: 'Crescente por padrão. Use reverse=True para decrescente.' },
    ],
    options: ['[1, 1, 3, 4, 5, 9]', '[3, 1, 4, 1, 5, 9]', '[9, 5, 4, 3, 1, 1]', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Métodos de lista modificam a lista original.',
      whatFor: 'Construir e organizar coleções de dados.',
      how: 'append adiciona 9. sort ordena crescente.',
      commonMistakes: ['Fazer lista = lista.append() (append retorna None)', 'Confundir sort() com sorted()'],
      realWorldExample: 'Adicionar nova venda e reordenar ranking.',
    },
    difficulty: 'beginner',
    tags: ['lista', 'métodos', 'append', 'sort'],
    xpReward: 75,
    professionalContext: 'Manter lista de transações ordenada.',
    militaryApplication: 'Ordenar alvos por prioridade.',
  },
  {
    id: 'py-struct-dict-1',
    lessonId: 'py-struct-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\npessoa = {"nome": "Ana", "idade": 25}\npessoa["cidade"] = "SP"\nprint(pessoa.get("cargo", "N/A"))\nprint(len(pessoa))\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que usar get() ao invés de pessoa["cargo"]?', hint: 'get() retorna valor padrão se chave não existe.' },
      { level: 2, type: 'how', question: 'Quantas chaves tem o dicionário no final?', hint: 'nome, idade + cidade adicionada = 3.' },
    ],
    options: ['N/A\\n3', 'Erro\\n3', 'None\\n3', 'N/A\\n2'],
    correctAnswer: 0,
    explanation: {
      why: 'get() é seguro para acessar chaves que podem não existir.',
      whatFor: 'Evitar erros ao processar dados incompletos.',
      how: 'get("cargo", "N/A") retorna "N/A" porque cargo não existe.',
      commonMistakes: ['Usar [] com chave inexistente (gera KeyError)', 'Esquecer de adicionar chaves novas'],
      realWorldExample: 'Dados de API podem ter campos opcionais.',
    },
    difficulty: 'beginner',
    tags: ['dicionário', 'get', 'chave'],
    xpReward: 75,
    professionalContext: 'JSONs de APIs frequentemente têm campos opcionais.',
    militaryApplication: 'Ficha de soldado: get("especialidade", "Infantaria").',
  },
  {
    id: 'py-struct-dict-2',
    lessonId: 'py-struct-3',
    type: 'code',
    question: 'Dado o dicionário de vendas por região, calcule o total de vendas. Armazene em `total`.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Como iterar sobre valores de um dicionário?', hint: 'dict.values() retorna apenas os valores.' },
      { level: 2, type: 'how', question: 'Como somar todos os valores?', hint: 'sum(dict.values()) ou loop acumulador.' },
    ],
    starterCode: 'vendas = {"Norte": 15000, "Sul": 22000, "Leste": 18000, "Oeste": 12000}\n# Calcule o total\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '67000', description: 'total deve ser 67000' }],
    explanation: {
      why: 'Dicionários são ótimos para dados categorizados.',
      whatFor: 'Agregações por categoria são operação comum.',
      how: 'sum(vendas.values()) soma todos os valores.',
      commonMistakes: ['Tentar somar o dicionário diretamente', 'Esquecer .values()'],
      realWorldExample: 'Total de vendas por filial.',
    },
    difficulty: 'beginner',
    tags: ['dicionário', 'values', 'soma'],
    xpReward: 75,
    professionalContext: 'Consolidar métricas de diferentes fontes.',
    militaryApplication: 'Total de efetivo: sum(unidades.values()).',
  },

  // ============================================
  // MÓDULO 5: FUNÇÕES (40 exercícios)
  // ============================================
  {
    id: 'py-func-def-1',
    lessonId: 'py-func-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\ndef saudacao(nome):\n    return f"Olá, {nome}!"\n\nmsg = saudacao("Maria")\nprint(msg)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que "return" faz?', hint: 'Envia o resultado de volta para onde a função foi chamada.' },
      { level: 2, type: 'how', question: 'O que é atribuído a msg?', hint: 'O valor que a função retorna.' },
    ],
    options: ['Olá, Maria!', 'saudacao("Maria")', 'None', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Funções encapsulam lógica reutilizável.',
      whatFor: 'Evitar repetição, organizar código, facilitar testes.',
      how: 'def define, parâmetros recebem valores, return devolve resultado.',
      commonMistakes: ['Esquecer o return (retorna None)', 'Confundir parâmetro com argumento'],
      realWorldExample: 'Função de formatação usada em todo o sistema.',
    },
    difficulty: 'beginner',
    tags: ['função', 'def', 'return'],
    xpReward: 75,
    professionalContext: 'Padronizar formatação de mensagens.',
    militaryApplication: 'Função de briefing padronizado.',
  },
  {
    id: 'py-func-def-2',
    lessonId: 'py-func-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\ndef potencia(base, exp=2):\n    return base ** exp\n\nprint(potencia(3))\nprint(potencia(2, 3))\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que é exp=2 na definição?', hint: 'Valor padrão: se não passar exp, usa 2.' },
      { level: 2, type: 'how', question: 'Na primeira chamada, qual é exp?', hint: '2 (padrão). Na segunda, 3 (passado explicitamente).' },
    ],
    options: ['9\\n8', '6\\n6', '9\\n6', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Valores padrão permitem flexibilidade sem repetição.',
      whatFor: 'Criar funções versáteis com comportamento padrão sensato.',
      how: 'potencia(3) = 3**2 = 9. potencia(2,3) = 2**3 = 8.',
      commonMistakes: ['Parâmetros com default devem vir depois dos sem', 'Usar objeto mutável como default'],
      realWorldExample: 'Função de desconto com taxa padrão.',
    },
    difficulty: 'beginner',
    tags: ['função', 'parâmetros', 'default'],
    xpReward: 75,
    professionalContext: 'API com parâmetros opcionais.',
    militaryApplication: 'Função de alerta com nível padrão.',
  },
  {
    id: 'py-func-scope-1',
    lessonId: 'py-func-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nx = 10\n\ndef mudar():\n    x = 20\n    print(x)\n\nmudar()\nprint(x)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'x dentro da função é o mesmo x de fora?', hint: 'Não! x = 20 cria variável LOCAL.' },
      { level: 2, type: 'how', question: 'O x global é modificado?', hint: 'Não. O x dentro da função é diferente.' },
    ],
    options: ['20\\n10', '20\\n20', '10\\n10', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Escopo protege variáveis de modificações acidentais.',
      whatFor: 'Funções isoladas não interferem no resto do código.',
      how: 'x=20 dentro cria variável local. x global continua 10.',
      commonMistakes: ['Pensar que modifica variável global', 'Usar global sem necessidade'],
      realWorldExample: 'Cada função tem suas próprias variáveis.',
    },
    difficulty: 'intermediate',
    tags: ['função', 'escopo', 'local', 'global'],
    xpReward: 100,
    professionalContext: 'Evitar efeitos colaterais em código complexo.',
    militaryApplication: 'Cada operação tem seus próprios parâmetros isolados.',
  },

  // ============================================
  // MÓDULO 6: PANDAS INTRO (35 exercícios)
  // ============================================
  {
    id: 'pd-intro-series-1',
    lessonId: 'pd-intro-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ns = pd.Series([10, 20, 30], index=["a", "b", "c"])\nprint(s["b"])\nprint(s.sum())\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que Series tem índice customizado?', hint: 'Para acessar por nome significativo, não só posição.' },
      { level: 2, type: 'how', question: 'sum() soma os valores ou os índices?', hint: 'Os valores: 10 + 20 + 30.' },
    ],
    options: ['20\\n60', 'b\\n60', '20\\n6', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Series é array com índice, base do Pandas.',
      whatFor: 'Acessar dados por nome, aplicar operações vetorizadas.',
      how: 's["b"] = 20. sum() = 10+20+30 = 60.',
      commonMistakes: ['Confundir índice com posição', 'Esquecer que Series tem métodos estatísticos'],
      realWorldExample: 'Vendas por mês com índice de meses.',
    },
    difficulty: 'beginner',
    tags: ['pandas', 'series', 'índice'],
    xpReward: 75,
    professionalContext: 'Séries temporais de métricas.',
    militaryApplication: 'Efetivo por unidade com índice de código.',
  },
  {
    id: 'pd-intro-df-1',
    lessonId: 'pd-intro-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ndf = pd.DataFrame({\n    "A": [1, 2, 3],\n    "B": [4, 5, 6]\n})\nprint(df.shape)\nprint(df["A"].mean())\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que shape retorna?', hint: '(linhas, colunas) - dimensões do DataFrame.' },
      { level: 2, type: 'how', question: 'df["A"] retorna o quê?', hint: 'Uma Series com os valores da coluna A.' },
    ],
    options: ['(3, 2)\\n2.0', '(2, 3)\\n2.0', '(3, 2)\\n6', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'DataFrame é tabela 2D com linhas e colunas.',
      whatFor: 'Estrutura central do Pandas para dados tabulares.',
      how: 'shape = (3 linhas, 2 colunas). mean([1,2,3]) = 2.0.',
      commonMistakes: ['Confundir ordem de shape', 'Esquecer que df["col"] retorna Series'],
      realWorldExample: 'Verificar dimensões de dataset carregado.',
    },
    difficulty: 'beginner',
    tags: ['pandas', 'dataframe', 'shape', 'mean'],
    xpReward: 75,
    professionalContext: 'Verificar tamanho de datasets.',
    militaryApplication: 'Quantas entradas de log, quantos campos.',
  },

  // ============================================
  // MÓDULO 7: PANDAS MANIPULAÇÃO (50 exercícios)
  // ============================================
  {
    id: 'pd-manip-loc-1',
    lessonId: 'pd-manip-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ndf = pd.DataFrame({\n    "nome": ["Ana", "Carlos", "Maria"],\n    "vendas": [15000, 12000, 18000]\n})\nresultado = df.loc[df["vendas"] > 13000, "nome"]\nprint(resultado.tolist())\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que df["vendas"] > 13000 retorna?', hint: 'Uma Series de True/False para cada linha.' },
      { level: 2, type: 'how', question: 'O que loc[condição, "nome"] faz?', hint: 'Retorna coluna "nome" apenas onde condição é True.' },
    ],
    options: ["['Ana', 'Maria']", "['Carlos']", "['Ana', 'Carlos', 'Maria']", 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'loc permite filtrar linhas E selecionar colunas.',
      whatFor: 'Extrair exatamente os dados necessários.',
      how: 'Ana (15k > 13k ✓) e Maria (18k > 13k ✓).',
      commonMistakes: ['Esquecer parênteses na condição', 'Confundir loc com iloc'],
      realWorldExample: 'Nomes de vendedores acima da meta.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'loc', 'filtro'],
    xpReward: 100,
    professionalContext: 'Relatórios filtrados por critérios.',
    militaryApplication: 'Lista de unidades acima de certo efetivo.',
  },
  {
    id: 'pd-manip-filter-1',
    lessonId: 'pd-manip-2',
    type: 'code',
    question: 'Dado um DataFrame `df` com as colunas "nome", "idade" e "salario", filtre apenas os funcionários com salário maior que 5000 E idade menor que 30.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que precisamos combinar duas condições aqui?', hint: 'Queremos funcionários que atendam AMBOS os critérios.' },
      { level: 2, type: 'how', question: 'Em Pandas, como combinamos condições?', hint: 'Use & para "E", cada condição entre parênteses.' },
    ],
    starterCode: 'import pandas as pd\n\ndf = pd.DataFrame({\n    "nome": ["Ana", "Carlos", "Maria", "João"],\n    "idade": [25, 35, 28, 42],\n    "salario": [6000, 8000, 4500, 7000]\n})\n\n# Filtre\nresultado = ',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '', description: 'Deve retornar Ana e Maria' }],
    explanation: {
      why: 'Filtros combinados são essenciais em análise.',
      whatFor: 'Segmentar dados por múltiplos critérios.',
      how: 'df[(df["salario"] > 5000) & (df["idade"] < 30)].',
      commonMistakes: ['Usar "and" ao invés de "&"', 'Esquecer parênteses'],
      realWorldExample: 'Candidatos qualificados: experiência E formação.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'filtro', 'booleano'],
    xpReward: 100,
    professionalContext: 'Segmentação de público-alvo.',
    militaryApplication: 'Seleção: patente >= X AND especialidade == Y.',
  },

  // ============================================
  // MÓDULO 8: PANDAS ANÁLISE (40 exercícios)
  // ============================================
  {
    id: 'pd-analysis-groupby-1',
    lessonId: 'pd-analysis-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ndf = pd.DataFrame({\n    "regiao": ["Sul", "Norte", "Sul", "Norte"],\n    "vendas": [100, 200, 150, 180]\n})\nresultado = df.groupby("regiao")["vendas"].sum()\nprint(resultado["Sul"])\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que groupby faz?', hint: 'Agrupa linhas pelo valor de uma coluna.' },
      { level: 2, type: 'how', question: 'sum() é aplicado a quê?', hint: 'À coluna "vendas" de cada grupo.' },
    ],
    options: ['250', '100', '380', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'GroupBy permite agregar por categoria.',
      whatFor: 'Relatórios por região, período, categoria.',
      how: 'Sul: 100 + 150 = 250.',
      commonMistakes: ['Esquecer de selecionar coluna de valor', 'Confundir resultado com DataFrame'],
      realWorldExample: 'Total de vendas por filial.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'groupby', 'agregação'],
    xpReward: 100,
    professionalContext: 'Dashboard de métricas por segmento.',
    militaryApplication: 'Efetivo total por região operacional.',
  },

  // ============================================
  // MÓDULO 9: PANDAS AVANÇADO (30 exercícios)
  // ============================================
  {
    id: 'pd-adv-merge-1',
    lessonId: 'pd-adv-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ndf1 = pd.DataFrame({"id": [1, 2], "nome": ["Ana", "Carlos"]})\ndf2 = pd.DataFrame({"id": [1, 3], "vendas": [100, 200]})\nresultado = pd.merge(df1, df2, on="id", how="inner")\nprint(len(resultado))\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que "inner" join retorna?', hint: 'Apenas linhas com match em AMBOS DataFrames.' },
      { level: 2, type: 'how', question: 'Qual id existe em ambos?', hint: 'id=1 existe em df1 e df2. id=2 só df1. id=3 só df2.' },
    ],
    options: ['1', '2', '3', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Inner join retorna interseção.',
      whatFor: 'Combinar apenas registros completos.',
      how: 'Só id=1 existe em ambos = 1 linha.',
      commonMistakes: ['Confundir tipos de join', 'Não verificar chaves duplicadas'],
      realWorldExample: 'Pedidos com dados de cliente (só pedidos de clientes cadastrados).',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'merge', 'join'],
    xpReward: 125,
    professionalContext: 'Cruzar vendas com cadastro de clientes.',
    militaryApplication: 'Cruzar missões com pessoal disponível.',
  },

  // ============================================
  // INGLÊS TÉCNICO (30 exercícios)
  // ============================================
  {
    id: 'eng-read-vocab-1',
    lessonId: 'eng-read-1',
    type: 'output-prediction',
    question: 'What does "deprecated" mean in technical documentation?',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que software marca coisas como deprecated?', hint: 'Para avisar que será removido em versões futuras.' },
    ],
    options: [
      'New and recommended feature',
      'Feature that will be removed in future versions',
      'Critical bug in the code',
      'Performance optimization'
    ],
    correctAnswer: 1,
    explanation: {
      why: 'Deprecated indica funcionalidade em desuso.',
      whatFor: 'Evitar usar código que será removido.',
      how: 'Procure alternativa recomendada na documentação.',
      commonMistakes: ['Ignorar avisos de deprecation', 'Confundir com "broken"'],
      realWorldExample: 'pandas.DataFrame.append é deprecated, use pd.concat.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'vocabulário', 'documentação'],
    xpReward: 50,
    professionalContext: 'Manter código atualizado.',
    militaryApplication: 'Equipamento deprecated = será substituído.',
  },
  {
    id: 'eng-read-vocab-2',
    lessonId: 'eng-read-1',
    type: 'output-prediction',
    question: 'In the phrase "This method returns a boolean indicating whether the operation was successful", what does "returns" mean?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que uma função faz quando termina?', hint: 'Devolve (returns) um resultado.' },
    ],
    options: [
      'Recebe como entrada',
      'Devolve/retorna como saída',
      'Armazena internamente',
      'Imprime na tela'
    ],
    correctAnswer: 1,
    explanation: {
      why: 'Returns indica o output da função.',
      whatFor: 'Saber o que esperar ao chamar a função.',
      how: 'Seção "Returns" da documentação explica o tipo/valor retornado.',
      commonMistakes: ['Confundir return com print', 'Não verificar tipo de retorno'],
      realWorldExample: 'len() returns an integer.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'vocabulário', 'função'],
    xpReward: 50,
    professionalContext: 'Ler documentação de APIs.',
    militaryApplication: 'Relatório "returns" status da missão.',
  },
  {
    id: 'eng-pattern-cond-1',
    lessonId: 'eng-pattern-2',
    type: 'output-prediction',
    question: 'What does "unless otherwise specified" mean?',
    socraticHints: [
      { level: 1, type: 'how', question: '"Unless" é similar a qual palavra?', hint: 'Exceto se, a menos que.' },
    ],
    options: [
      'Always do this',
      'Never do this',
      'Except if stated differently',
      'Only in special cases'
    ],
    correctAnswer: 2,
    explanation: {
      why: 'Padrão comum para indicar comportamento default.',
      whatFor: 'Entender quando padrão se aplica.',
      how: '"Unless X" = "Exceto se X for verdade".',
      commonMistakes: ['Confundir unless com if', 'Não perceber que é comportamento padrão'],
      realWorldExample: 'The default port is 8080 unless otherwise specified.',
    },
    difficulty: 'intermediate',
    tags: ['inglês', 'padrões', 'condicional'],
    xpReward: 75,
    professionalContext: 'Configurações com defaults.',
    militaryApplication: 'Procedimento padrão unless comandante ordene diferente.',
  },

  // ============================================
  // EXPANSÃO: MAIS EXERCÍCIOS FUNDAMENTOS (30+)
  // ============================================
  {
    id: 'py-fund-var-7',
    lessonId: 'py-fund-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\na = 5\nb = a\na = a + 3\nprint(a + b)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Quando b = a, b recebe o valor ou uma referência?', hint: 'Para inteiros, b recebe uma CÓPIA do valor.' },
      { level: 2, type: 'how', question: 'a muda para 8, mas b continua quanto?', hint: 'b continua 5 (valor original copiado).' },
      { level: 3, type: 'how', question: 'Então a + b = ?', hint: '8 + 5 = 13.' },
    ],
    options: ['13', '16', '10', '8'],
    correctAnswer: 0,
    explanation: {
      why: 'Entender cópia de valores é fundamental para evitar bugs.',
      whatFor: 'Saber que alterar uma variável não afeta cópias já feitas.',
      how: 'b = a copia 5 para b. a += 3 faz a = 8. a + b = 8 + 5 = 13.',
      commonMistakes: ['Pensar que b acompanha mudanças em a', 'Confundir com comportamento de listas'],
      realWorldExample: 'Backup de saldo antes de transação.',
    },
    difficulty: 'beginner',
    tags: ['variáveis', 'atribuição', 'cópia'],
    xpReward: 50,
    professionalContext: 'Sistemas financeiros guardam histórico de valores.',
    militaryApplication: 'Posição anterior salva antes de atualizar posição atual.',
  },
  {
    id: 'py-fund-var-8',
    lessonId: 'py-fund-2',
    type: 'code',
    question: 'Troque os valores de duas variáveis `a` e `b` sem usar uma terceira variável. Dica: Python permite atribuição múltipla.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que trocar valores é operação comum?', hint: 'Ordenação, reorganização de dados.' },
      { level: 2, type: 'how', question: 'Python permite a, b = b, a. Por quê funciona?', hint: 'O lado direito é avaliado primeiro, depois atribuído.' },
    ],
    starterCode: 'a = 10\nb = 20\n# Troque os valores\n\nprint(a, b)  # Deve imprimir: 20 10',
    expectedOutput: '20 10',
    testCases: [{ input: '', expectedOutput: '20 10', description: 'a deve ser 20 e b deve ser 10' }],
    explanation: {
      why: 'Troca de valores é base para algoritmos de ordenação.',
      whatFor: 'Reorganizar dados sem perder informação.',
      how: 'a, b = b, a faz a troca em uma linha.',
      commonMistakes: ['Tentar a = b; b = a (perde valor original de a)', 'Usar temp quando não precisa'],
      realWorldExample: 'Ordenar lista trocando elementos fora de ordem.',
    },
    difficulty: 'beginner',
    tags: ['variáveis', 'atribuição', 'swap'],
    xpReward: 75,
    professionalContext: 'Algoritmos de ordenação usam swap.',
    militaryApplication: 'Troca de posições em formação.',
  },
  {
    id: 'py-fund-var-9',
    lessonId: 'py-fund-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nx, y, z = 1, 2, 3\nprint(y)\nx, y = y, x + y\nprint(y)\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'Na primeira linha, cada variável recebe qual valor?', hint: 'x=1, y=2, z=3.' },
      { level: 2, type: 'how', question: 'Na atribuição múltipla, o lado direito é avaliado primeiro. y=2 e x+y=?', hint: 'y recebe x antigo (1) + y antigo (2) = 3.' },
    ],
    options: ['2\\n3', '2\\n2', '1\\n3', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Atribuição múltipla avalia tudo antes de atribuir.',
      whatFor: 'Operações simultâneas como Fibonacci.',
      how: 'Primeiro print: y=2. Depois x,y = 2,3. Segundo print: y=3.',
      commonMistakes: ['Pensar que x muda antes de calcular x+y', 'Confundir ordem'],
      realWorldExample: 'Cálculo de Fibonacci: a, b = b, a + b.',
    },
    difficulty: 'intermediate',
    tags: ['variáveis', 'atribuição', 'múltipla'],
    xpReward: 75,
    professionalContext: 'Sequência Fibonacci em finanças.',
    militaryApplication: 'Rotação de turnos simultânea.',
  },
  {
    id: 'py-fund-str-1',
    lessonId: 'py-fund-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\ntexto = "Python"\nprint(texto[0])\nprint(texto[-1])\nprint(texto[1:4])\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Strings são sequências. O que isso significa?', hint: 'Cada caractere tem uma posição (índice).' },
      { level: 2, type: 'how', question: 'Índice 0 é o primeiro. E -1?', hint: '-1 é o último caractere.' },
    ],
    options: ['P\\nn\\nyth', 'P\\nn\\nytho', 'P\\no\\nyth', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Strings são sequências indexáveis.',
      whatFor: 'Extrair partes de texto: iniciais, extensões, códigos.',
      how: 'texto[0]="P", texto[-1]="n", texto[1:4]="yth" (índices 1,2,3).',
      commonMistakes: ['Pensar que índice 1 é o primeiro', 'Esquecer que slice exclui último índice'],
      realWorldExample: 'Extrair extensão: nome_arquivo[-3:].',
    },
    difficulty: 'beginner',
    tags: ['strings', 'índice', 'slice'],
    xpReward: 50,
    professionalContext: 'Parsing de códigos, CPFs, telefones.',
    militaryApplication: 'Extrair código de unidade de identificador militar.',
  },
  {
    id: 'py-fund-str-2',
    lessonId: 'py-fund-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nnome = "ana"\nprint(nome.upper())\nprint(nome.capitalize())\nprint(nome.replace("a", "o"))\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'upper() faz o quê?', hint: 'Converte para maiúsculas.' },
      { level: 2, type: 'how', question: 'replace substitui todas as ocorrências?', hint: 'Sim, todas por padrão.' },
    ],
    options: ['ANA\\nAna\\nono', 'ana\\nAna\\nono', 'ANA\\nANA\\nano', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Métodos de string são essenciais para limpeza de dados.',
      whatFor: 'Padronizar textos, normalizar entradas.',
      how: 'upper="ANA", capitalize="Ana", replace("a","o")="ono".',
      commonMistakes: ['Esquecer que strings são imutáveis (métodos retornam nova string)'],
      realWorldExample: 'Normalizar emails para lowercase.',
    },
    difficulty: 'beginner',
    tags: ['strings', 'métodos'],
    xpReward: 50,
    professionalContext: 'Limpeza de dados de formulários.',
    militaryApplication: 'Padronizar códigos para upper case.',
  },
  {
    id: 'py-fund-str-3',
    lessonId: 'py-fund-2',
    type: 'code',
    question: 'Dado um CPF no formato "12345678901", formate-o como "123.456.789-01".',
    socraticHints: [
      { level: 1, type: 'how', question: 'Como acessar partes da string?', hint: 'Usando slice: cpf[0:3], cpf[3:6], etc.' },
      { level: 2, type: 'how', question: 'Como juntar as partes com pontos e traço?', hint: 'Concatenação: parte1 + "." + parte2...' },
    ],
    starterCode: 'cpf = "12345678901"\n# Formate o CPF\ncpf_formatado = ',
    expectedOutput: '123.456.789-01',
    testCases: [{ input: '', expectedOutput: '123.456.789-01', description: 'CPF formatado corretamente' }],
    explanation: {
      why: 'Formatação é comum ao exibir dados para usuários.',
      whatFor: 'Melhorar legibilidade de códigos e identificadores.',
      how: 'cpf[0:3] + "." + cpf[3:6] + "." + cpf[6:9] + "-" + cpf[9:11].',
      commonMistakes: ['Índices errados', 'Esquecer o traço antes dos dois últimos'],
      realWorldExample: 'Formatação de documentos em sistemas.',
    },
    difficulty: 'beginner',
    tags: ['strings', 'slice', 'formatação'],
    xpReward: 75,
    professionalContext: 'Exibição de documentos em interfaces.',
    militaryApplication: 'Formatação de números de registro militar.',
  },
  {
    id: 'py-fund-str-4',
    lessonId: 'py-fund-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nfrase = "  Python é legal  "\nprint(len(frase))\nprint(len(frase.strip()))\nprint(frase.strip())\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'strip() remove o quê?', hint: 'Espaços em branco no início e fim.' },
      { level: 2, type: 'how', question: 'Quantos caracteres são removidos?', hint: 'Original tem 18. Strip remove 4 espaços (2 de cada lado).' },
    ],
    options: ['18\\n14\\nPython é legal', '18\\n18\\n  Python é legal  ', '14\\n14\\nPython é legal', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Dados externos frequentemente têm espaços extras.',
      whatFor: 'Limpar inputs de usuário, dados de arquivos.',
      how: 'strip() remove espaços das pontas, não do meio.',
      commonMistakes: ['Pensar que strip remove todos os espaços', 'Não aplicar antes de comparações'],
      realWorldExample: 'Limpar emails antes de validar.',
    },
    difficulty: 'beginner',
    tags: ['strings', 'strip', 'limpeza'],
    xpReward: 50,
    professionalContext: 'Limpeza de dados de inputs.',
    militaryApplication: 'Padronizar mensagens recebidas por rádio.',
  },
  {
    id: 'py-fund-str-5',
    lessonId: 'py-fund-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nnome = "Python"\nprint(f"Eu amo {nome}!")\nprint(f"{nome} tem {len(nome)} letras")\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que são f-strings?', hint: 'Strings formatadas que permitem inserir expressões.' },
      { level: 2, type: 'how', question: 'Dentro das {} pode ter expressões?', hint: 'Sim! len(nome) é avaliado e inserido.' },
    ],
    options: ['Eu amo Python!\\nPython tem 6 letras', 'Eu amo {nome}!\\nPython tem 6 letras', 'Erro', 'Eu amo Python!\\nPython tem {len(nome)} letras'],
    correctAnswer: 0,
    explanation: {
      why: 'F-strings são forma moderna e legível de formatar.',
      whatFor: 'Criar mensagens dinâmicas, relatórios.',
      how: 'f"..." com {} para inserir variáveis/expressões.',
      commonMistakes: ['Esquecer o f antes das aspas', 'Usar + ao invés de f-string'],
      realWorldExample: 'Logs: f"Usuário {user} fez {acao}".',
    },
    difficulty: 'beginner',
    tags: ['strings', 'f-string', 'formatação'],
    xpReward: 50,
    professionalContext: 'Geração de mensagens personalizadas.',
    militaryApplication: 'Relatórios: f"Unidade {codigo} em posição {coord}".',
  },

  // ============================================
  // EXPANSÃO: MAIS EXERCÍCIOS LÓGICA (30+)
  // ============================================
  {
    id: 'py-logic-cond-4',
    lessonId: 'py-logic-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nvalor = 0\nif valor:\n    print("Truthy")\nelse:\n    print("Falsy")\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que acontece quando usamos um número em if?', hint: 'É convertido para boolean.' },
      { level: 2, type: 'how', question: 'Qual número é considerado False?', hint: 'Zero é False, qualquer outro é True.' },
    ],
    options: ['Falsy', 'Truthy', '0', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Python usa truthy/falsy para qualquer valor em condições.',
      whatFor: 'Código mais conciso: if lista: (ao invés de if len(lista) > 0:).',
      how: '0, None, "", [], {} são falsy. Outros são truthy.',
      commonMistakes: ['Não saber que 0 é falsy', 'Confundir com string "0" (que é truthy)'],
      realWorldExample: 'if saldo: (verifica se há saldo).',
    },
    difficulty: 'beginner',
    tags: ['condicionais', 'truthy', 'falsy'],
    xpReward: 50,
    professionalContext: 'Validação de dados antes de processamento.',
    militaryApplication: 'if municao: (há munição disponível?).',
  },
  {
    id: 'py-logic-cond-5',
    lessonId: 'py-logic-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nx = 5\nresultado = "par" if x % 2 == 0 else "ímpar"\nprint(resultado)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que é essa estrutura com if e else na mesma linha?', hint: 'Operador ternário: valor_se_true if condição else valor_se_false.' },
      { level: 2, type: 'how', question: '5 % 2 é igual a 0?', hint: '5 % 2 = 1, então é False.' },
    ],
    options: ['ímpar', 'par', '5', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Operador ternário deixa código mais conciso.',
      whatFor: 'Atribuição condicional em uma linha.',
      how: '5 % 2 = 1, não é 0, então resultado = "ímpar".',
      commonMistakes: ['Confundir ordem (valor_true vem primeiro)', 'Usar quando lógica é complexa'],
      realWorldExample: 'status = "ativo" if usuario.ativo else "inativo".',
    },
    difficulty: 'beginner',
    tags: ['condicionais', 'ternário'],
    xpReward: 75,
    professionalContext: 'Definir status baseado em condição.',
    militaryApplication: 'prioridade = "alta" if ameaca > 7 else "baixa".',
  },
  {
    id: 'py-logic-cond-6',
    lessonId: 'py-logic-1',
    type: 'code',
    question: 'Dado um número, classifique-o como "positivo", "negativo" ou "zero". Armazene em `classificacao`.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Quantos casos diferentes existem?', hint: 'Três: maior que zero, menor que zero, igual a zero.' },
      { level: 2, type: 'how', question: 'Como verificar se é igual a zero?', hint: 'numero == 0 (dois sinais de igual).' },
    ],
    starterCode: 'numero = -5\n# Classifique\n',
    expectedOutput: 'negativo',
    testCases: [{ input: '', expectedOutput: 'negativo', description: 'classificacao deve ser "negativo"' }],
    explanation: {
      why: 'Classificação em categorias é operação básica.',
      whatFor: 'Separar dados por características.',
      how: 'if numero > 0 elif numero < 0 else.',
      commonMistakes: ['Esquecer o caso zero', 'Usar = ao invés de =='],
      realWorldExample: 'Classificar transações como entrada/saída.',
    },
    difficulty: 'beginner',
    tags: ['condicionais', 'classificação'],
    xpReward: 50,
    professionalContext: 'Análise de lucros e prejuízos.',
    militaryApplication: 'Direção: avanço, recuo ou posição mantida.',
  },
  {
    id: 'py-logic-cond-7',
    lessonId: 'py-logic-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\na = 5\nb = 5\nprint(a == b)\nprint(a is b)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Qual a diferença entre == e is?', hint: '== compara valor, is compara identidade (mesmo objeto).' },
      { level: 2, type: 'how', question: 'Para inteiros pequenos, Python reutiliza objetos?', hint: 'Sim, Python otimiza inteiros de -5 a 256.' },
    ],
    options: ['True\\nTrue', 'True\\nFalse', 'False\\nTrue', 'False\\nFalse'],
    correctAnswer: 0,
    explanation: {
      why: 'Entender == vs is evita bugs sutis.',
      whatFor: 'Comparar valores (==) ou verificar se é mesmo objeto (is).',
      how: 'Valores iguais = True. Inteiros pequenos são mesmo objeto (otimização).',
      commonMistakes: ['Usar is para comparar valores', 'Não saber do caching de inteiros'],
      realWorldExample: 'Verificar None: if x is None.',
    },
    difficulty: 'intermediate',
    tags: ['condicionais', 'comparação', 'identidade'],
    xpReward: 100,
    professionalContext: 'Verificar None em dados faltantes.',
    militaryApplication: 'Verificar se é exatamente o mesmo equipamento.',
  },
  {
    id: 'py-logic-cond-8',
    lessonId: 'py-logic-1',
    type: 'code',
    question: 'Implemente um sistema de notas: A (>=90), B (>=80), C (>=70), D (>=60), F (<60). Armazene a letra em `conceito`.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que usar elif e não if separados?', hint: 'Com elif, para na primeira condição verdadeira.' },
      { level: 2, type: 'how', question: 'Por que verificar >= 90 primeiro?', hint: 'Se começar por >= 60, nota 95 seria D!' },
    ],
    starterCode: 'nota = 85\n# Determine o conceito\n',
    expectedOutput: 'B',
    testCases: [{ input: '', expectedOutput: 'B', description: 'conceito deve ser "B"' }],
    explanation: {
      why: 'Faixas mutuamente exclusivas requerem elif.',
      whatFor: 'Classificação em categorias ordenadas.',
      how: 'Verificar de maior para menor para pegar a faixa correta.',
      commonMistakes: ['Usar if separados (múltiplas condições verdadeiras)', 'Ordem errada de verificação'],
      realWorldExample: 'Classificação de crédito por score.',
    },
    difficulty: 'beginner',
    tags: ['condicionais', 'classificação', 'faixas'],
    xpReward: 75,
    professionalContext: 'Rating de clientes.',
    militaryApplication: 'Nível de prontidão por % de efetivo.',
  },
  {
    id: 'py-logic-op-4',
    lessonId: 'py-logic-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nprint(True and "Python")\nprint(False or "Default")\nprint("" or "Vazio")\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'and/or retornam True/False?', hint: 'Não! Retornam o valor que determinou o resultado.' },
      { level: 2, type: 'how', question: 'True and X retorna?', hint: 'Se True, resultado depende de X. Retorna X.' },
    ],
    options: ['Python\\nDefault\\nVazio', 'True\\nTrue\\nTrue', 'True\\nDefault\\nVazio', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Short-circuit evaluation retorna o valor determinante.',
      whatFor: 'Definir valores padrão: nome = input or "Anônimo".',
      how: 'and retorna primeiro falsy ou último. or retorna primeiro truthy.',
      commonMistakes: ['Pensar que sempre retorna boolean', 'Não usar para defaults'],
      realWorldExample: 'usuario = dados.get("nome") or "Visitante".',
    },
    difficulty: 'advanced',
    tags: ['operadores', 'short-circuit', 'truthy'],
    xpReward: 125,
    professionalContext: 'Valores padrão em configurações.',
    militaryApplication: 'canal = canal_principal or canal_backup.',
  },
  {
    id: 'py-logic-op-5',
    lessonId: 'py-logic-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nnumero = 15\nif numero >= 10 and numero <= 20:\n    print("Dentro")\nif 10 <= numero <= 20:\n    print("Também dentro")\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'As duas condições são equivalentes?', hint: 'Sim! Python permite comparações encadeadas.' },
      { level: 2, type: 'how', question: '10 <= numero <= 20 é avaliado como?', hint: 'Como (10 <= numero) and (numero <= 20).' },
    ],
    options: ['Dentro\\nTambém dentro', 'Dentro', 'Também dentro', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Python permite comparações encadeadas para intervalos.',
      whatFor: 'Código mais legível e matemático.',
      how: 'a <= x <= b é equivalente a a <= x and x <= b.',
      commonMistakes: ['Não saber que Python permite isso', 'Outras linguagens não permitem'],
      realWorldExample: 'Verificar se valor está em faixa aceitável.',
    },
    difficulty: 'intermediate',
    tags: ['operadores', 'comparação', 'intervalo'],
    xpReward: 75,
    professionalContext: 'Validar valores em faixas.',
    militaryApplication: 'Verificar se coordenada está em área de operação.',
  },
  {
    id: 'py-logic-op-6',
    lessonId: 'py-logic-2',
    type: 'code',
    question: 'Verifique se um número é divisível por 3 E por 5 (FizzBuzz). Armazene True/False em `fizzbuzz`.',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que significa ser divisível por N?', hint: 'Resto da divisão é zero: numero % N == 0.' },
      { level: 2, type: 'how', question: 'Como combinar as duas condições?', hint: 'Use and: div_por_3 and div_por_5.' },
    ],
    starterCode: 'numero = 15\n# Verifique\n',
    expectedOutput: 'True',
    testCases: [{ input: '', expectedOutput: 'True', description: 'fizzbuzz deve ser True para 15' }],
    explanation: {
      why: 'FizzBuzz é exercício clássico de lógica.',
      whatFor: 'Praticar condições compostas.',
      how: 'fizzbuzz = (numero % 3 == 0) and (numero % 5 == 0).',
      commonMistakes: ['Usar or ao invés de and', 'Esquecer parênteses'],
      realWorldExample: 'Verificar múltiplos critérios de aprovação.',
    },
    difficulty: 'beginner',
    tags: ['operadores', 'módulo', 'divisibilidade'],
    xpReward: 75,
    professionalContext: 'Critérios compostos de validação.',
    militaryApplication: 'Critério de seleção: altura_ok AND aptidão_ok.',
  },
  {
    id: 'py-logic-match-1',
    lessonId: 'py-logic-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\ndia = 3\nmatch dia:\n    case 1:\n        print("Segunda")\n    case 2:\n        print("Terça")\n    case 3:\n        print("Quarta")\n    case _:\n        print("Outro")\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que é match-case?', hint: 'Estrutura similar a switch em outras linguagens.' },
      { level: 2, type: 'how', question: 'O que case _ significa?', hint: 'Caso padrão (default), pega qualquer valor.' },
    ],
    options: ['Quarta', 'Segunda', 'Outro', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Match-case é mais legível para múltiplas opções.',
      whatFor: 'Substituir cadeias longas de if-elif.',
      how: 'dia=3 casa com case 3, imprime "Quarta".',
      commonMistakes: ['Esquecer case _ para default', 'Match requer Python 3.10+'],
      realWorldExample: 'Processar comandos de menu.',
    },
    difficulty: 'intermediate',
    tags: ['condicionais', 'match', 'case'],
    xpReward: 100,
    professionalContext: 'Roteamento de ações por tipo.',
    militaryApplication: 'Processar códigos de operação.',
  },

  // ============================================
  // EXPANSÃO: MAIS EXERCÍCIOS LOOPS (40+)
  // ============================================
  {
    id: 'py-loop-for-4',
    lessonId: 'py-loops-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nfor i in range(5, 0, -1):\n    print(i, end=" ")\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'range(5, 0, -1) gera quais números?', hint: 'Começa em 5, vai até 0 (exclusive), passo -1.' },
      { level: 2, type: 'how', question: 'Qual o último número gerado?', hint: '1 (para antes do 0).' },
    ],
    options: ['5 4 3 2 1', '5 4 3 2 1 0', '0 1 2 3 4 5', '4 3 2 1 0'],
    correctAnswer: 0,
    explanation: {
      why: 'Range com step negativo conta de trás para frente.',
      whatFor: 'Contagem regressiva, iterar de trás para frente.',
      how: 'range(início, fim, passo). Fim é exclusivo.',
      commonMistakes: ['Esquecer que fim é exclusivo', 'Passo errado (positivo)'],
      realWorldExample: 'Contagem regressiva de lançamento.',
    },
    difficulty: 'beginner',
    tags: ['loops', 'range', 'regressivo'],
    xpReward: 75,
    professionalContext: 'Processar do mais recente ao mais antigo.',
    militaryApplication: 'Contagem regressiva de operação.',
  },
  {
    id: 'py-loop-for-5',
    lessonId: 'py-loops-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\npalavra = "DATA"\nfor i, letra in enumerate(palavra):\n    print(f"{i}:{letra}", end=" ")\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que enumerate faz?', hint: 'Retorna índice E valor juntos.' },
      { level: 2, type: 'how', question: 'Qual é o índice da primeira letra?', hint: 'Índices começam em 0.' },
    ],
    options: ['0:D 1:A 2:T 3:A', '1:D 2:A 3:T 4:A', 'D:0 A:1 T:2 A:3', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Enumerate evita contador manual.',
      whatFor: 'Quando precisa de índice E valor.',
      how: 'enumerate retorna tuplas (índice, valor).',
      commonMistakes: ['Confundir ordem (índice vem primeiro)', 'Usar range(len()) quando enumerate é melhor'],
      realWorldExample: 'Numerar itens de lista.',
    },
    difficulty: 'beginner',
    tags: ['loops', 'enumerate', 'índice'],
    xpReward: 75,
    professionalContext: 'Numerar registros para relatório.',
    militaryApplication: 'Numerar checkpoints de patrulha.',
  },
  {
    id: 'py-loop-for-6',
    lessonId: 'py-loops-1',
    type: 'code',
    question: 'Encontre o maior número em uma lista. Armazene em `maior`.',
    socraticHints: [
      { level: 1, type: 'how', question: 'Como acompanhar o maior valor visto até agora?', hint: 'Use uma variável que atualiza quando encontra valor maior.' },
      { level: 2, type: 'how', question: 'Como inicializar essa variável?', hint: 'Com o primeiro elemento ou -infinito.' },
    ],
    starterCode: 'numeros = [34, 12, 89, 56, 23]\n# Encontre o maior\n',
    expectedOutput: '89',
    testCases: [{ input: '', expectedOutput: '89', description: 'maior deve ser 89' }],
    explanation: {
      why: 'Encontrar extremos é operação fundamental.',
      whatFor: 'Análise de dados: máximo, mínimo.',
      how: 'maior = numeros[0]. Para cada n: se n > maior, maior = n.',
      commonMistakes: ['Inicializar com 0 (e se todos forem negativos?)', 'Comparar com variável errada'],
      realWorldExample: 'Maior venda do mês.',
    },
    difficulty: 'beginner',
    tags: ['loops', 'máximo', 'algoritmo'],
    xpReward: 75,
    professionalContext: 'Relatório de pico de vendas.',
    militaryApplication: 'Maior distância percorrida por unidade.',
  },
  {
    id: 'py-loop-for-7',
    lessonId: 'py-loops-1',
    type: 'code',
    question: 'Conte quantos números pares existem na lista. Armazene em `quantidade_pares`.',
    socraticHints: [
      { level: 1, type: 'how', question: 'Como verificar se número é par?', hint: 'numero % 2 == 0.' },
      { level: 2, type: 'how', question: 'Como contar?', hint: 'Inicialize contador em 0, incremente quando achar par.' },
    ],
    starterCode: 'numeros = [1, 2, 3, 4, 5, 6, 7, 8]\n# Conte os pares\n',
    expectedOutput: '4',
    testCases: [{ input: '', expectedOutput: '4', description: 'quantidade_pares deve ser 4' }],
    explanation: {
      why: 'Contar elementos que satisfazem condição é comum.',
      whatFor: 'Estatísticas, validações.',
      how: 'Padrão contador: inicializa 0, incrementa quando condição é True.',
      commonMistakes: ['Esquecer de inicializar contador', 'Incrementar fora do if'],
      realWorldExample: 'Contar transações acima de certo valor.',
    },
    difficulty: 'beginner',
    tags: ['loops', 'contador', 'condição'],
    xpReward: 50,
    professionalContext: 'Contagem de itens por categoria.',
    militaryApplication: 'Contar equipamentos operacionais.',
  },
  {
    id: 'py-loop-while-2',
    lessonId: 'py-loops-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\ni = 0\nwhile i < 5:\n    if i == 3:\n        break\n    print(i, end=" ")\n    i += 1\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que break faz?', hint: 'Sai do loop imediatamente.' },
      { level: 2, type: 'how', question: 'Quando i chega em 3, o que acontece?', hint: 'Executa break antes do print.' },
    ],
    options: ['0 1 2', '0 1 2 3', '0 1 2 3 4', '3'],
    correctAnswer: 0,
    explanation: {
      why: 'Break permite sair cedo quando encontra o que procura.',
      whatFor: 'Parar busca assim que encontrar, economizar processamento.',
      how: 'i=3 → break executa → sai do loop sem imprimir 3.',
      commonMistakes: ['Não saber quando print executa', 'Confundir break com continue'],
      realWorldExample: 'Parar busca quando encontrar item.',
    },
    difficulty: 'beginner',
    tags: ['loops', 'break', 'controle'],
    xpReward: 75,
    professionalContext: 'Busca otimizada com parada antecipada.',
    militaryApplication: 'Parar varredura ao encontrar alvo.',
  },
  {
    id: 'py-loop-while-3',
    lessonId: 'py-loops-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nfor i in range(5):\n    if i == 2:\n        continue\n    print(i, end=" ")\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que continue faz?', hint: 'Pula para a próxima iteração, ignora o resto do corpo.' },
      { level: 2, type: 'how', question: 'Quando i=2, o print executa?', hint: 'Não! Continue pula antes.' },
    ],
    options: ['0 1 3 4', '0 1 2 3 4', '2', '0 1'],
    correctAnswer: 0,
    explanation: {
      why: 'Continue permite pular casos específicos.',
      whatFor: 'Ignorar itens inválidos ou especiais.',
      how: 'i=2 → continue → volta para próximo i, não imprime 2.',
      commonMistakes: ['Confundir continue com break', 'Pensar que loop termina'],
      realWorldExample: 'Processar lista ignorando itens inválidos.',
    },
    difficulty: 'beginner',
    tags: ['loops', 'continue', 'controle'],
    xpReward: 75,
    professionalContext: 'Pular registros com erro.',
    militaryApplication: 'Processar alvos exceto aliados.',
  },
  {
    id: 'py-loop-while-4',
    lessonId: 'py-loops-2',
    type: 'code',
    question: 'Simule uma contagem regressiva de 10 até 0 usando while, depois imprima "Lançamento!".',
    socraticHints: [
      { level: 1, type: 'how', question: 'Qual a condição para continuar?', hint: 'Enquanto contador >= 0.' },
      { level: 2, type: 'how', question: 'O que fazer em cada iteração?', hint: 'Imprimir e decrementar.' },
    ],
    starterCode: '# Implemente a contagem\n',
    expectedOutput: '10 9 8 7 6 5 4 3 2 1 0\\nLançamento!',
    testCases: [{ input: '', expectedOutput: '', description: 'Contagem de 10 a 0 seguida de Lançamento!' }],
    explanation: {
      why: 'While é ideal quando número de iterações depende de condição.',
      whatFor: 'Loops de espera, contadores dinâmicos.',
      how: 'n=10. while n >= 0: print, n-=1. Depois print("Lançamento!").',
      commonMistakes: ['Loop infinito (esquecer decremento)', 'Off-by-one (não imprimir 0)'],
      realWorldExample: 'Timer de sessão.',
    },
    difficulty: 'beginner',
    tags: ['loops', 'while', 'contagem'],
    xpReward: 75,
    professionalContext: 'Countdown de ofertas.',
    militaryApplication: 'Contagem regressiva de detonação.',
  },
  {
    id: 'py-loop-zip-1',
    lessonId: 'py-loops-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nnomes = ["Ana", "Carlos"]\nidades = [25, 30]\nfor nome, idade in zip(nomes, idades):\n    print(f"{nome}: {idade}")\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que zip faz?', hint: 'Combina listas em pares (tuplas).' },
      { level: 2, type: 'how', question: 'Quantas iterações haverá?', hint: 'Tamanho da menor lista (ambas têm 2).' },
    ],
    options: ['Ana: 25\\nCarlos: 30', 'Ana\\nCarlos\\n25\\n30', '(Ana, 25)\\n(Carlos, 30)', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Zip itera sobre múltiplas listas simultaneamente.',
      whatFor: 'Combinar dados relacionados que estão em listas separadas.',
      how: 'zip(a, b) cria pares: (a[0], b[0]), (a[1], b[1])...',
      commonMistakes: ['Listas de tamanhos diferentes (para na menor)', 'Confundir com enumerate'],
      realWorldExample: 'Combinar nomes com emails.',
    },
    difficulty: 'intermediate',
    tags: ['loops', 'zip', 'iteração'],
    xpReward: 100,
    professionalContext: 'Combinar dados de diferentes fontes.',
    militaryApplication: 'Associar soldados com equipamentos.',
  },
  {
    id: 'py-loop-comp-3',
    lessonId: 'py-loops-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nquadrados = {x: x**2 for x in range(1, 4)}\nprint(quadrados)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Isso é uma list comprehension?', hint: 'Não! É dict comprehension (usa {}).' },
      { level: 2, type: 'how', question: 'Qual a estrutura chave:valor?', hint: 'x é a chave, x**2 é o valor.' },
    ],
    options: ['{1: 1, 2: 4, 3: 9}', '[1, 4, 9]', '{1, 4, 9}', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Dict comprehension cria dicionários de forma concisa.',
      whatFor: 'Transformar dados em mapeamentos.',
      how: '{chave: valor for x in iterável} cria dicionário.',
      commonMistakes: ['Confundir com set comprehension', 'Esquecer os dois pontos'],
      realWorldExample: 'Mapear IDs para nomes.',
    },
    difficulty: 'intermediate',
    tags: ['loops', 'comprehension', 'dicionário'],
    xpReward: 100,
    professionalContext: 'Indexar dados por chave.',
    militaryApplication: 'Mapear código de unidade para nome.',
  },
  {
    id: 'py-loop-nested-1',
    lessonId: 'py-loops-4',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nmatriz = [[1, 2], [3, 4], [5, 6]]\ntotal = 0\nfor linha in matriz:\n    for valor in linha:\n        total += valor\nprint(total)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que dois loops?', hint: 'Um para linhas, outro para elementos de cada linha.' },
      { level: 2, type: 'how', question: 'Quantos valores são somados?', hint: '6 valores: 1+2+3+4+5+6.' },
    ],
    options: ['21', '6', '15', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Loops aninhados processam estruturas 2D.',
      whatFor: 'Matrizes, tabelas, grades.',
      how: 'Loop externo: linhas. Loop interno: elementos.',
      commonMistakes: ['Confundir linha com valor', 'Não perceber que matriz[i] é uma lista'],
      realWorldExample: 'Somar todas células de planilha.',
    },
    difficulty: 'intermediate',
    tags: ['loops', 'aninhado', 'matriz'],
    xpReward: 100,
    professionalContext: 'Processar planilhas.',
    militaryApplication: 'Varrer todas células do mapa.',
  },

  // ============================================
  // EXPANSÃO: MAIS EXERCÍCIOS ESTRUTURAS (40+)
  // ============================================
  {
    id: 'py-struct-list-3',
    lessonId: 'py-struct-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nlista = [1, 2, 3]\nlista2 = lista\nlista.append(4)\nprint(lista2)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'lista2 = lista cria uma cópia?', hint: 'Não! Cria uma referência ao mesmo objeto.' },
      { level: 2, type: 'how', question: 'Se modificar lista, o que acontece com lista2?', hint: 'Também muda, pois são o mesmo objeto.' },
    ],
    options: ['[1, 2, 3, 4]', '[1, 2, 3]', '[4]', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Listas são mutáveis e atribuição cria referência.',
      whatFor: 'Evitar bugs ao passar listas para funções.',
      how: 'Para copiar: lista2 = lista.copy() ou lista[:].',
      commonMistakes: ['Pensar que atribuição copia', 'Modificar lista original acidentalmente'],
      realWorldExample: 'Modificar lista passada para função afeta original.',
    },
    difficulty: 'intermediate',
    tags: ['lista', 'referência', 'mutável'],
    xpReward: 100,
    professionalContext: 'Efeitos colaterais em funções.',
    militaryApplication: 'Lista de objetivos compartilhada entre unidades.',
  },
  {
    id: 'py-struct-list-4',
    lessonId: 'py-struct-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nlista = [3, 1, 4, 1, 5]\nprint(lista.count(1))\nprint(lista.index(4))\nlista.remove(1)\nprint(lista)\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'count() conta o quê?', hint: 'Quantas vezes o valor aparece.' },
      { level: 2, type: 'how', question: 'index() retorna o quê?', hint: 'A posição da PRIMEIRA ocorrência.' },
      { level: 3, type: 'how', question: 'remove() remove qual 1?', hint: 'O primeiro encontrado.' },
    ],
    options: ['2\\n2\\n[3, 4, 1, 5]', '2\\n2\\n[3, 4, 5]', '1\\n2\\n[3, 4, 1, 5]', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Métodos de lista para busca e remoção.',
      whatFor: 'Manipular listas de forma precisa.',
      how: 'count=2, index=2, remove tira primeiro 1.',
      commonMistakes: ['remove apaga todos (não, só o primeiro)', 'index de item inexistente dá erro'],
      realWorldExample: 'Remover primeiro registro duplicado.',
    },
    difficulty: 'beginner',
    tags: ['lista', 'métodos', 'count', 'index', 'remove'],
    xpReward: 75,
    professionalContext: 'Limpeza de dados duplicados.',
    militaryApplication: 'Remover primeira ocorrência de equipamento defeituoso.',
  },
  {
    id: 'py-struct-list-5',
    lessonId: 'py-struct-2',
    type: 'code',
    question: 'Inverta uma lista SEM usar o método reverse(). Armazene em `invertida`.',
    socraticHints: [
      { level: 1, type: 'how', question: 'Qual slice pega a lista de trás para frente?', hint: 'lista[::-1] usa passo negativo.' },
      { level: 2, type: 'how', question: 'Isso modifica a original?', hint: 'Não, cria uma nova lista.' },
    ],
    starterCode: 'original = [1, 2, 3, 4, 5]\n# Inverta\n',
    expectedOutput: '[5, 4, 3, 2, 1]',
    testCases: [{ input: '', expectedOutput: '[5, 4, 3, 2, 1]', description: 'invertida deve ser [5, 4, 3, 2, 1]' }],
    explanation: {
      why: 'Slicing com passo negativo é técnica Pythonica.',
      whatFor: 'Inverter sem modificar original.',
      how: 'lista[::-1] lê do fim ao início.',
      commonMistakes: ['Confundir com reverse() que modifica in-place', 'Esquecer os dois pontos'],
      realWorldExample: 'Exibir histórico do mais recente ao mais antigo.',
    },
    difficulty: 'beginner',
    tags: ['lista', 'slice', 'inverter'],
    xpReward: 75,
    professionalContext: 'Ordenação reversa de logs.',
    militaryApplication: 'Reproduzir rota de trás para frente.',
  },
  {
    id: 'py-struct-tuple-1',
    lessonId: 'py-struct-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\ncoordenada = (10, 20)\nx, y = coordenada\nprint(x + y)\n# coordenada[0] = 5  # O que aconteceria?\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Qual a diferença entre tupla e lista?', hint: 'Tupla é imutável.' },
      { level: 2, type: 'how', question: 'O que é unpacking?', hint: 'Atribuir elementos a variáveis separadas.' },
    ],
    options: ['30', '(10, 20)', 'Erro', '[10, 20]'],
    correctAnswer: 0,
    explanation: {
      why: 'Tuplas são imutáveis e usadas para dados que não devem mudar.',
      whatFor: 'Coordenadas, configurações fixas, retornos múltiplos.',
      how: 'x, y = (10, 20) desempacota. x=10, y=20.',
      commonMistakes: ['Tentar modificar tupla (erro)', 'Confundir () com []'],
      realWorldExample: 'Coordenadas GPS são fixas uma vez definidas.',
    },
    difficulty: 'beginner',
    tags: ['tupla', 'unpacking', 'imutável'],
    xpReward: 50,
    professionalContext: 'Retornos múltiplos de funções.',
    militaryApplication: 'Coordenadas de posição fixa.',
  },
  {
    id: 'py-struct-set-1',
    lessonId: 'py-struct-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\na = {1, 2, 3, 3, 2, 1}\nb = {3, 4, 5}\nprint(len(a))\nprint(a & b)\nprint(a | b)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que len(a) não é 6?', hint: 'Sets não permitem duplicatas.' },
      { level: 2, type: 'how', question: 'O que & e | fazem com sets?', hint: 'Interseção e união.' },
    ],
    options: ['3\\n{3}\\n{1, 2, 3, 4, 5}', '6\\n{3}\\n{1, 2, 3, 4, 5}', '3\\n{1, 2}\\n{3, 4, 5}', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Sets armazenam valores únicos.',
      whatFor: 'Remover duplicatas, operações de conjunto.',
      how: 'a tem 3 únicos. & = interseção {3}. | = união {1-5}.',
      commonMistakes: ['Esperar duplicatas', 'Não saber operadores de conjunto'],
      realWorldExample: 'Encontrar clientes em comum entre duas listas.',
    },
    difficulty: 'intermediate',
    tags: ['set', 'conjunto', 'operações'],
    xpReward: 100,
    professionalContext: 'Encontrar itens únicos/comuns.',
    militaryApplication: 'Interseção de áreas de patrulha.',
  },
  {
    id: 'py-struct-dict-2',
    lessonId: 'py-struct-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nestoque = {"maçã": 10, "banana": 5}\nfor fruta, qtd in estoque.items():\n    print(f"{fruta}: {qtd}")\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que items() retorna?', hint: 'Pares (chave, valor).' },
      { level: 2, type: 'how', question: 'Como desempacotar os pares?', hint: 'for chave, valor in dict.items().' },
    ],
    options: ['maçã: 10\\nbanana: 5', 'maçã\\nbanana', '10\\n5', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'items() permite iterar sobre pares chave-valor.',
      whatFor: 'Processar dicionários completos.',
      how: 'for k, v in d.items() desempacota cada par.',
      commonMistakes: ['Iterar só sobre keys por padrão', 'Esquecer items()'],
      realWorldExample: 'Relatório de estoque com nomes e quantidades.',
    },
    difficulty: 'beginner',
    tags: ['dicionário', 'items', 'iteração'],
    xpReward: 75,
    professionalContext: 'Processar registros de banco.',
    militaryApplication: 'Listar equipamentos e quantidades.',
  },
  {
    id: 'py-struct-dict-3',
    lessonId: 'py-struct-3',
    type: 'code',
    question: 'Conte a frequência de cada palavra em uma lista. Armazene em `frequencia`.',
    socraticHints: [
      { level: 1, type: 'how', question: 'Como usar dicionário para contagem?', hint: 'Chave = palavra, valor = contagem.' },
      { level: 2, type: 'how', question: 'E se a palavra ainda não existe?', hint: 'Use get(palavra, 0) para retornar 0 como padrão.' },
    ],
    starterCode: 'palavras = ["a", "b", "a", "c", "b", "a"]\n# Conte\nfrequencia = {}\n',
    expectedOutput: "{'a': 3, 'b': 2, 'c': 1}",
    testCases: [{ input: '', expectedOutput: '', description: 'a=3, b=2, c=1' }],
    explanation: {
      why: 'Contagem de frequência é padrão comum.',
      whatFor: 'Análise de texto, estatísticas.',
      how: 'freq[p] = freq.get(p, 0) + 1 para cada palavra.',
      commonMistakes: ['KeyError ao acessar chave inexistente', 'Não usar get()'],
      realWorldExample: 'Análise de palavras mais usadas.',
    },
    difficulty: 'intermediate',
    tags: ['dicionário', 'contagem', 'frequência'],
    xpReward: 100,
    professionalContext: 'Análise de logs, palavras-chave.',
    militaryApplication: 'Frequência de códigos de operação.',
  },
  {
    id: 'py-struct-dict-4',
    lessonId: 'py-struct-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nd = {"a": 1, "b": 2}\nd.update({"b": 3, "c": 4})\nprint(d)\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que update() faz?', hint: 'Adiciona/atualiza múltiplas chaves.' },
      { level: 2, type: 'how', question: 'Se chave já existe, o que acontece?', hint: 'Valor é substituído.' },
    ],
    options: ["{'a': 1, 'b': 3, 'c': 4}", "{'a': 1, 'b': 2, 'c': 4}", "{'b': 3, 'c': 4}", 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'update() mescla dicionários.',
      whatFor: 'Combinar configurações, atualizar dados.',
      how: 'Chaves novas são adicionadas, existentes atualizadas.',
      commonMistakes: ['Pensar que preserva valor original', 'Confundir com setdefault'],
      realWorldExample: 'Atualizar configurações com override.',
    },
    difficulty: 'beginner',
    tags: ['dicionário', 'update', 'mesclar'],
    xpReward: 75,
    professionalContext: 'Merge de configurações.',
    militaryApplication: 'Atualizar intel com novas informações.',
  },

  // ============================================
  // EXPANSÃO: MAIS EXERCÍCIOS FUNÇÕES (35+)
  // ============================================
  {
    id: 'py-func-def-3',
    lessonId: 'py-func-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\ndef greet(nome, msg="Olá"):\n    return f"{msg}, {nome}!"\n\nprint(greet("Ana"))\nprint(greet("Carlos", "Oi"))\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'Qual parâmetro tem valor padrão?', hint: 'msg tem padrão "Olá".' },
      { level: 2, type: 'how', question: 'Na primeira chamada, msg é?', hint: '"Olá" (padrão, pois não foi passado).' },
    ],
    options: ['Olá, Ana!\\nOi, Carlos!', 'Olá, Ana!\\nOlá, Carlos!', 'None\\nOi, Carlos!', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Parâmetros padrão tornam funções mais flexíveis.',
      whatFor: 'Evitar repetir valores comuns.',
      how: 'Se não passar argumento, usa valor padrão.',
      commonMistakes: ['Parâmetros com default devem vir depois', 'Mudar default mutável (lista/dict)'],
      realWorldExample: 'Função de log com nível padrão INFO.',
    },
    difficulty: 'beginner',
    tags: ['função', 'parâmetros', 'default'],
    xpReward: 75,
    professionalContext: 'APIs com parâmetros opcionais.',
    militaryApplication: 'Alerta com prioridade padrão.',
  },
  {
    id: 'py-func-def-4',
    lessonId: 'py-func-1',
    type: 'code',
    question: 'Crie uma função `calcular_media` que recebe uma lista de números e retorna a média.',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que é média?', hint: 'Soma de todos dividida pela quantidade.' },
      { level: 2, type: 'how', question: 'Quais funções nativas ajudam?', hint: 'sum() e len().' },
    ],
    starterCode: '# Defina a função\n\n# Teste\nnotas = [7, 8, 9, 6]\nprint(calcular_media(notas))',
    expectedOutput: '7.5',
    testCases: [{ input: '', expectedOutput: '7.5', description: 'Média de [7,8,9,6] é 7.5' }],
    explanation: {
      why: 'Funções encapsulam lógica reutilizável.',
      whatFor: 'Calcular média em qualquer lugar do código.',
      how: 'return sum(numeros) / len(numeros).',
      commonMistakes: ['Divisão inteira', 'Lista vazia (divisão por zero)'],
      realWorldExample: 'Média de avaliações de produto.',
    },
    difficulty: 'beginner',
    tags: ['função', 'média', 'matemática'],
    xpReward: 75,
    professionalContext: 'Métricas de dashboard.',
    militaryApplication: 'Média de desempenho de tropas.',
  },
  {
    id: 'py-func-args-1',
    lessonId: 'py-func-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\ndef soma(*args):\n    return sum(args)\n\nprint(soma(1, 2, 3))\nprint(soma(10, 20, 30, 40))\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que *args significa?', hint: 'Recebe número variável de argumentos posicionais.' },
      { level: 2, type: 'how', question: 'args é uma tupla?', hint: 'Sim! (1, 2, 3) ou (10, 20, 30, 40).' },
    ],
    options: ['6\\n100', '(1, 2, 3)\\n(10, 20, 30, 40)', 'Erro', '6\\n40'],
    correctAnswer: 0,
    explanation: {
      why: '*args permite funções flexíveis.',
      whatFor: 'Funções que aceitam qualquer quantidade de argumentos.',
      how: '*args coleta argumentos em tupla.',
      commonMistakes: ['Confundir *args com **kwargs', 'Esquecer asterisco'],
      realWorldExample: 'print() aceita qualquer número de argumentos.',
    },
    difficulty: 'intermediate',
    tags: ['função', 'args', 'variádica'],
    xpReward: 100,
    professionalContext: 'Funções utilitárias flexíveis.',
    militaryApplication: 'Somar suprimentos de múltiplas unidades.',
  },
  {
    id: 'py-func-args-2',
    lessonId: 'py-func-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\ndef info(**kwargs):\n    for k, v in kwargs.items():\n        print(f"{k}={v}")\n\ninfo(nome="Ana", idade=25)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que **kwargs significa?', hint: 'Recebe argumentos nomeados como dicionário.' },
      { level: 2, type: 'how', question: 'Como acessar os valores?', hint: 'kwargs é um dicionário normal.' },
    ],
    options: ['nome=Ana\\nidade=25', "{'nome': 'Ana', 'idade': 25}", 'Erro', 'Ana\\n25'],
    correctAnswer: 0,
    explanation: {
      why: '**kwargs permite argumentos nomeados flexíveis.',
      whatFor: 'Funções de configuração, wrappers.',
      how: '**kwargs coleta argumentos nomeados em dicionário.',
      commonMistakes: ['Confundir com *args', 'Não iterar corretamente'],
      realWorldExample: 'Configuração de componentes UI.',
    },
    difficulty: 'intermediate',
    tags: ['função', 'kwargs', 'dicionário'],
    xpReward: 100,
    professionalContext: 'Funções de configuração.',
    militaryApplication: 'Parâmetros de missão flexíveis.',
  },
  {
    id: 'py-func-lambda-1',
    lessonId: 'py-func-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\ndobro = lambda x: x * 2\nprint(dobro(5))\n\nnumeros = [1, 2, 3, 4]\ndobros = list(map(dobro, numeros))\nprint(dobros)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que é lambda?', hint: 'Função anônima de uma linha.' },
      { level: 2, type: 'how', question: 'map() faz o quê?', hint: 'Aplica função a cada elemento.' },
    ],
    options: ['10\\n[2, 4, 6, 8]', '5\\n[1, 2, 3, 4]', 'Erro', '10\\n[10, 10, 10, 10]'],
    correctAnswer: 0,
    explanation: {
      why: 'Lambda é útil para funções simples e rápidas.',
      whatFor: 'Passar funções curtas como argumento.',
      how: 'lambda args: expressão. map aplica a cada item.',
      commonMistakes: ['Lambda só pode ter uma expressão', 'Esquecer list() em map'],
      realWorldExample: 'Transformar dados em pipeline.',
    },
    difficulty: 'intermediate',
    tags: ['função', 'lambda', 'map'],
    xpReward: 100,
    professionalContext: 'Pipelines de dados.',
    militaryApplication: 'Transformar coordenadas: map(converter, coords).',
  },
  {
    id: 'py-func-lambda-2',
    lessonId: 'py-func-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nnumeros = [3, 1, 4, 1, 5, 9]\npares = list(filter(lambda x: x % 2 == 0, numeros))\nprint(pares)\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'filter() faz o quê?', hint: 'Mantém apenas elementos onde função retorna True.' },
      { level: 2, type: 'how', question: 'x % 2 == 0 verifica?', hint: 'Se x é par.' },
    ],
    options: ['[4]', '[3, 1, 1, 5, 9]', '[]', '[2, 4, 6]'],
    correctAnswer: 0,
    explanation: {
      why: 'Filter seleciona elementos que passam no teste.',
      whatFor: 'Filtrar dados sem loop explícito.',
      how: 'filter(func, iter) mantém onde func(x) é True.',
      commonMistakes: ['filter não retorna lista direto', 'Confundir com map'],
      realWorldExample: 'Filtrar registros válidos.',
    },
    difficulty: 'intermediate',
    tags: ['função', 'lambda', 'filter'],
    xpReward: 100,
    professionalContext: 'Seleção de dados.',
    militaryApplication: 'Filtrar alvos válidos.',
  },
  {
    id: 'py-func-recursion-1',
    lessonId: 'py-func-4',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\ndef fatorial(n):\n    if n <= 1:\n        return 1\n    return n * fatorial(n - 1)\n\nprint(fatorial(5))\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que é recursão?', hint: 'Função que chama a si mesma.' },
      { level: 2, type: 'how', question: 'fatorial(5) chama?', hint: '5 * fatorial(4), que chama 4 * fatorial(3)...' },
    ],
    options: ['120', '5', '1', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Recursão resolve problemas que se dividem em subproblemas.',
      whatFor: 'Árvores, grafos, problemas matemáticos.',
      how: 'Caso base (n<=1) para, senão chama com n-1.',
      commonMistakes: ['Esquecer caso base (loop infinito)', 'Stack overflow com n grande'],
      realWorldExample: 'Navegação em estruturas hierárquicas.',
    },
    difficulty: 'intermediate',
    tags: ['função', 'recursão', 'fatorial'],
    xpReward: 125,
    professionalContext: 'Processamento de árvores.',
    militaryApplication: 'Análise de cadeia de comando.',
  },

  // ============================================
  // EXPANSÃO: MAIS EXERCÍCIOS PANDAS (60+)
  // ============================================
  {
    id: 'pd-intro-series-2',
    lessonId: 'pd-intro-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ns = pd.Series([10, 20, 30, 40])\nprint(s[s > 20].values)\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 's > 20 retorna o quê?', hint: 'Series de True/False para cada elemento.' },
      { level: 2, type: 'how', question: 's[boolean_series] faz?', hint: 'Filtra, mantendo apenas True.' },
    ],
    options: ['[30 40]', '[20 30 40]', '[10 20]', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Filtro booleano é operação fundamental em Pandas.',
      whatFor: 'Selecionar dados que satisfazem condição.',
      how: 's > 20 → [F, F, T, T]. s[...] → valores True.',
      commonMistakes: ['Esquecer .values para array', 'Confundir com loc/iloc'],
      realWorldExample: 'Valores acima de threshold.',
    },
    difficulty: 'beginner',
    tags: ['pandas', 'series', 'filtro'],
    xpReward: 75,
    professionalContext: 'Filtrar métricas acima da meta.',
    militaryApplication: 'Unidades acima do efetivo mínimo.',
  },
  {
    id: 'pd-intro-df-2',
    lessonId: 'pd-intro-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ndf = pd.DataFrame({\n    "nome": ["Ana", "Carlos", "Maria"],\n    "vendas": [100, 200, 150]\n})\nprint(df["vendas"].max())\nprint(df["vendas"].idxmax())\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'max() retorna?', hint: 'O maior valor.' },
      { level: 2, type: 'how', question: 'idxmax() retorna?', hint: 'O ÍNDICE do maior valor.' },
    ],
    options: ['200\\n1', '200\\nCarlos', '100\\n0', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Distinguir valor de índice é crucial.',
      whatFor: 'Encontrar qual registro tem o extremo.',
      how: 'max=200. idxmax=1 (índice numérico).',
      commonMistakes: ['Confundir valor com índice', 'idxmax com índice custom'],
      realWorldExample: 'Encontrar cliente top.',
    },
    difficulty: 'beginner',
    tags: ['pandas', 'dataframe', 'max', 'idxmax'],
    xpReward: 75,
    professionalContext: 'Ranking de performance.',
    militaryApplication: 'Unidade com maior pontuação.',
  },
  {
    id: 'pd-intro-df-3',
    lessonId: 'pd-intro-3',
    type: 'code',
    question: 'Adicione uma coluna "bonus" ao DataFrame calculada como 10% das vendas.',
    socraticHints: [
      { level: 1, type: 'how', question: 'Como criar nova coluna?', hint: 'df["nova_coluna"] = valor.' },
      { level: 2, type: 'how', question: 'Operações são vetorizadas?', hint: 'Sim! df["vendas"] * 0.10 aplica a cada linha.' },
    ],
    starterCode: 'import pandas as pd\ndf = pd.DataFrame({\n    "nome": ["Ana", "Carlos"],\n    "vendas": [1000, 2000]\n})\n# Adicione a coluna bonus\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '', description: 'bonus deve ser [100.0, 200.0]' }],
    explanation: {
      why: 'Criar colunas calculadas é operação comum.',
      whatFor: 'Derivar métricas, normalizar dados.',
      how: 'df["bonus"] = df["vendas"] * 0.10.',
      commonMistakes: ['Usar loop (desnecessário)', 'Esquecer que retorna float'],
      realWorldExample: 'Calcular impostos, comissões.',
    },
    difficulty: 'beginner',
    tags: ['pandas', 'dataframe', 'coluna', 'cálculo'],
    xpReward: 75,
    professionalContext: 'Calcular comissões.',
    militaryApplication: 'Calcular cota de munição por efetivo.',
  },
  {
    id: 'pd-manip-loc-2',
    lessonId: 'pd-manip-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ndf = pd.DataFrame({\n    "A": [1, 2, 3],\n    "B": [4, 5, 6]\n}, index=["x", "y", "z"])\nprint(df.loc["y", "A"])\nprint(df.iloc[1, 0])\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Qual a diferença entre loc e iloc?', hint: 'loc usa labels, iloc usa posição numérica.' },
      { level: 2, type: 'how', question: 'Ambos acessam o mesmo valor?', hint: 'Sim! "y" é índice 1, "A" é coluna 0.' },
    ],
    options: ['2\\n2', '2\\n5', '5\\n2', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'loc/iloc são formas de acessar dados.',
      whatFor: 'loc quando sabe o label, iloc quando sabe a posição.',
      how: 'loc["y", "A"] = iloc[1, 0] = 2.',
      commonMistakes: ['Confundir loc com iloc', 'Usar label em iloc'],
      realWorldExample: 'Acessar registro por ID vs por posição.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'loc', 'iloc'],
    xpReward: 100,
    professionalContext: 'Acesso preciso a dados.',
    militaryApplication: 'Buscar unidade por código ou posição na lista.',
  },
  {
    id: 'pd-manip-filter-2',
    lessonId: 'pd-manip-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ndf = pd.DataFrame({\n    "categoria": ["A", "B", "A", "C"],\n    "valor": [10, 20, 30, 40]\n})\nresult = df[df["categoria"].isin(["A", "C"])]\nprint(len(result))\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que isin() faz?', hint: 'Verifica se valor está na lista.' },
      { level: 2, type: 'how', question: 'Quantas linhas têm "A" ou "C"?', hint: 'A aparece 2x, C aparece 1x = 3.' },
    ],
    options: ['3', '2', '4', '1'],
    correctAnswer: 0,
    explanation: {
      why: 'isin é mais legível que múltiplos or.',
      whatFor: 'Filtrar por múltiplos valores possíveis.',
      how: 'Linhas 0,2,3 têm "A" ou "C" = 3 linhas.',
      commonMistakes: ['Usar == com lista (erro)', 'Confundir com contains'],
      realWorldExample: 'Filtrar por lista de categorias.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'isin', 'filtro'],
    xpReward: 100,
    professionalContext: 'Filtrar por múltiplas categorias.',
    militaryApplication: 'Selecionar unidades de tipos específicos.',
  },
  {
    id: 'pd-manip-sort-1',
    lessonId: 'pd-manip-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ndf = pd.DataFrame({\n    "nome": ["Ana", "Carlos", "Maria"],\n    "vendas": [150, 200, 100]\n})\ndf_sorted = df.sort_values("vendas", ascending=False)\nprint(df_sorted["nome"].iloc[0])\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'ascending=False ordena como?', hint: 'Decrescente (maior primeiro).' },
      { level: 2, type: 'how', question: 'Quem tem mais vendas?', hint: 'Carlos com 200.' },
    ],
    options: ['Carlos', 'Ana', 'Maria', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Ordenação é essencial para rankings.',
      whatFor: 'Top N, pior N, ordenar para exibição.',
      how: 'Ordenar desc, pegar primeiro = maior.',
      commonMistakes: ['Esquecer ascending=False', 'Modificar df original (sort_values não modifica in-place)'],
      realWorldExample: 'Ranking de vendedores.',
    },
    difficulty: 'beginner',
    tags: ['pandas', 'sort', 'ordenação'],
    xpReward: 75,
    professionalContext: 'Relatórios de ranking.',
    militaryApplication: 'Classificação de desempenho.',
  },
  {
    id: 'pd-manip-null-1',
    lessonId: 'pd-manip-4',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\nimport numpy as np\ndf = pd.DataFrame({\n    "A": [1, np.nan, 3],\n    "B": [4, 5, np.nan]\n})\nprint(df.isna().sum().sum())\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'isna() retorna o quê?', hint: 'DataFrame de True/False onde há NaN.' },
      { level: 2, type: 'how', question: 'sum().sum() faz?', hint: 'Primeiro soma por coluna, depois soma totais.' },
    ],
    options: ['2', '3', '1', '6'],
    correctAnswer: 0,
    explanation: {
      why: 'Contar nulos é passo essencial de limpeza.',
      whatFor: 'Decidir estratégia: remover ou preencher.',
      how: '2 NaNs total (1 em A, 1 em B).',
      commonMistakes: ['Usar == None (não funciona)', 'Esquecer segundo sum()'],
      realWorldExample: 'Verificar qualidade dos dados.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'nan', 'limpeza'],
    xpReward: 100,
    professionalContext: 'Auditoria de qualidade de dados.',
    militaryApplication: 'Verificar dados faltantes em relatórios.',
  },
  {
    id: 'pd-manip-null-2',
    lessonId: 'pd-manip-4',
    type: 'code',
    question: 'Preencha valores NaN na coluna "idade" com a média da coluna.',
    socraticHints: [
      { level: 1, type: 'how', question: 'Qual método preenche NaN?', hint: 'fillna().' },
      { level: 2, type: 'how', question: 'Como calcular a média ignorando NaN?', hint: 'mean() ignora NaN por padrão.' },
    ],
    starterCode: 'import pandas as pd\nimport numpy as np\ndf = pd.DataFrame({\n    "nome": ["Ana", "Carlos", "Maria"],\n    "idade": [25, np.nan, 35]\n})\n# Preencha NaN com a média\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '', description: 'idade de Carlos deve ser 30.0' }],
    explanation: {
      why: 'Imputação por média é técnica comum.',
      whatFor: 'Não perder linhas com dados parciais.',
      how: 'df["idade"].fillna(df["idade"].mean()).',
      commonMistakes: ['Calcular média antes de fillna inclui NaN?', 'Não atribuir de volta'],
      realWorldExample: 'Preencher dados faltantes em surveys.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'fillna', 'imputação'],
    xpReward: 100,
    professionalContext: 'Tratamento de dados faltantes.',
    militaryApplication: 'Estimar dados faltantes de sensores.',
  },
  {
    id: 'pd-analysis-groupby-2',
    lessonId: 'pd-analysis-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ndf = pd.DataFrame({\n    "dept": ["TI", "RH", "TI", "RH"],\n    "salario": [5000, 4000, 6000, 3500]\n})\nresult = df.groupby("dept")["salario"].agg(["mean", "count"])\nprint(result.loc["TI", "mean"])\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'agg() com lista faz?', hint: 'Aplica múltiplas agregações.' },
      { level: 2, type: 'how', question: 'Média de TI é?', hint: '(5000 + 6000) / 2 = 5500.' },
    ],
    options: ['5500.0', '2', '11000', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Múltiplas agregações em um comando.',
      whatFor: 'Relatórios resumidos por grupo.',
      how: 'agg(["mean", "count"]) retorna ambas métricas.',
      commonMistakes: ['Acessar resultado errado', 'Esquecer que retorna DataFrame'],
      realWorldExample: 'Relatório de salários por departamento.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'groupby', 'agg'],
    xpReward: 125,
    professionalContext: 'Análise departamental.',
    militaryApplication: 'Estatísticas por unidade.',
  },
  {
    id: 'pd-analysis-groupby-3',
    lessonId: 'pd-analysis-1',
    type: 'code',
    question: 'Encontre o vendedor com mais vendas em cada região usando groupby.',
    socraticHints: [
      { level: 1, type: 'how', question: 'Como pegar o índice do máximo por grupo?', hint: 'groupby + idxmax().' },
      { level: 2, type: 'how', question: 'Como usar o índice para pegar a linha?', hint: 'df.loc[indices].' },
    ],
    starterCode: 'import pandas as pd\ndf = pd.DataFrame({\n    "regiao": ["Sul", "Sul", "Norte", "Norte"],\n    "vendedor": ["Ana", "Carlos", "Maria", "João"],\n    "vendas": [100, 150, 200, 180]\n})\n# Encontre o top vendedor por região\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '', description: 'Sul: Carlos, Norte: Maria' }],
    explanation: {
      why: 'Encontrar extremo por grupo é análise comum.',
      whatFor: 'Premiar top performers por região.',
      how: 'groupby("regiao")["vendas"].idxmax() → df.loc[...].',
      commonMistakes: ['Usar max() ao invés de idxmax()', 'Não acessar linha completa'],
      realWorldExample: 'Funcionário do mês por filial.',
    },
    difficulty: 'advanced',
    tags: ['pandas', 'groupby', 'idxmax'],
    xpReward: 150,
    professionalContext: 'Premiação por desempenho.',
    militaryApplication: 'Melhor atirador por pelotão.',
  },
  {
    id: 'pd-analysis-pivot-1',
    lessonId: 'pd-analysis-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ndf = pd.DataFrame({\n    "mes": ["Jan", "Jan", "Fev", "Fev"],\n    "produto": ["A", "B", "A", "B"],\n    "vendas": [10, 20, 15, 25]\n})\npivot = df.pivot(index="mes", columns="produto", values="vendas")\nprint(pivot.loc["Jan", "A"])\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que pivot faz?', hint: 'Reorganiza dados em formato de tabela cruzada.' },
      { level: 2, type: 'how', question: 'Jan + A = qual valor?', hint: 'Vendas de Jan para produto A = 10.' },
    ],
    options: ['10', '15', '30', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Pivot transforma dados longos em tabela cruzada.',
      whatFor: 'Visualização de comparações.',
      how: 'Linhas = mês, colunas = produto, valores = vendas.',
      commonMistakes: ['Confundir index/columns', 'Dados duplicados precisam de pivot_table'],
      realWorldExample: 'Vendas por mês x produto.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'pivot', 'reshape'],
    xpReward: 125,
    professionalContext: 'Relatórios cruzados.',
    militaryApplication: 'Efetivo por mês x unidade.',
  },
  {
    id: 'pd-adv-merge-2',
    lessonId: 'pd-adv-1',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ndf1 = pd.DataFrame({"id": [1, 2, 3], "nome": ["A", "B", "C"]})\ndf2 = pd.DataFrame({"id": [2, 3, 4], "vendas": [100, 200, 300]})\nresult = pd.merge(df1, df2, on="id", how="left")\nprint(result["vendas"].isna().sum())\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'Left join mantém quais linhas?', hint: 'Todas do DataFrame da esquerda (df1).' },
      { level: 2, type: 'how', question: 'id=1 existe em df2?', hint: 'Não, então vendas será NaN.' },
    ],
    options: ['1', '0', '2', '3'],
    correctAnswer: 0,
    explanation: {
      why: 'Left join preserva todos registros da esquerda.',
      whatFor: 'Manter registros mesmo sem match.',
      how: 'id=1 não tem match → vendas NaN = 1 NaN.',
      commonMistakes: ['Confundir left com inner', 'Não verificar NaN após join'],
      realWorldExample: 'Clientes com/sem pedidos.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'merge', 'left join'],
    xpReward: 125,
    professionalContext: 'Análise de clientes ativos/inativos.',
    militaryApplication: 'Soldados com/sem designação.',
  },
  {
    id: 'pd-adv-apply-1',
    lessonId: 'pd-adv-2',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ndf = pd.DataFrame({"valor": [1, 2, 3, 4]})\ndf["categoria"] = df["valor"].apply(lambda x: "alto" if x > 2 else "baixo")\nprint(df["categoria"].value_counts()["alto"])\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'apply() faz o quê?', hint: 'Aplica função a cada elemento.' },
      { level: 2, type: 'how', question: 'Quantos valores são > 2?', hint: '3 e 4 são > 2 = 2 valores.' },
    ],
    options: ['2', '3', '1', '4'],
    correctAnswer: 0,
    explanation: {
      why: 'apply() permite transformações customizadas.',
      whatFor: 'Criar categorias, aplicar lógica complexa.',
      how: '3,4 > 2 → "alto". value_counts conta cada.',
      commonMistakes: ['Usar loop ao invés de apply', 'Não retornar valor na lambda'],
      realWorldExample: 'Classificar clientes por valor.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'apply', 'categorização'],
    xpReward: 100,
    professionalContext: 'Segmentação de dados.',
    militaryApplication: 'Classificar ameaças por nível.',
  },
  {
    id: 'pd-adv-concat-1',
    lessonId: 'pd-adv-3',
    type: 'output-prediction',
    question: 'Qual será o output?\n\n```python\nimport pandas as pd\ndf1 = pd.DataFrame({"A": [1, 2]})\ndf2 = pd.DataFrame({"A": [3, 4]})\nresult = pd.concat([df1, df2], ignore_index=True)\nprint(len(result))\nprint(result["A"].iloc[-1])\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'concat empilha DataFrames como?', hint: 'Verticalmente por padrão.' },
      { level: 2, type: 'how', question: 'ignore_index=True faz?', hint: 'Reseta índices para 0, 1, 2, 3.' },
    ],
    options: ['4\\n4', '2\\n4', '4\\n2', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'concat une DataFrames vertical ou horizontalmente.',
      whatFor: 'Combinar dados de múltiplas fontes.',
      how: '2 + 2 = 4 linhas. Último valor = 4.',
      commonMistakes: ['Índices duplicados sem ignore_index', 'Colunas não alinhadas'],
      realWorldExample: 'Unir dados mensais.',
    },
    difficulty: 'beginner',
    tags: ['pandas', 'concat', 'união'],
    xpReward: 75,
    professionalContext: 'Consolidar relatórios.',
    militaryApplication: 'Unir logs de múltiplas unidades.',
  },

  // ============================================
  // EXPANSÃO: MAIS EXERCÍCIOS INGLÊS (30+)
  // ============================================
  {
    id: 'eng-read-vocab-3',
    lessonId: 'eng-read-1',
    type: 'output-prediction',
    question: 'What does "instantiate" mean in programming?',
    socraticHints: [
      { level: 1, type: 'how', question: '"Instance" em português é...?', hint: 'Instância - uma ocorrência específica.' },
    ],
    options: [
      'Delete an object',
      'Create an instance of a class',
      'Import a library',
      'Debug a program'
    ],
    correctAnswer: 1,
    explanation: {
      why: 'Instantiate significa criar uma instância.',
      whatFor: 'Entender OOP e documentação.',
      how: 'To instantiate a class = criar objeto dessa classe.',
      commonMistakes: ['Confundir com initialize', 'Não saber que cria objeto'],
      realWorldExample: 'df = pd.DataFrame() instantiates a DataFrame.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'vocabulário', 'OOP'],
    xpReward: 50,
    professionalContext: 'Documentação de bibliotecas.',
    militaryApplication: 'Instanciar objeto de missão.',
  },
  {
    id: 'eng-read-vocab-4',
    lessonId: 'eng-read-1',
    type: 'output-prediction',
    question: 'What does "mutable" mean?',
    socraticHints: [
      { level: 1, type: 'why', question: '"Mutate" significa mudar. E mutable?', hint: 'Que pode ser mudado.' },
    ],
    options: [
      'Cannot be changed',
      'Can be changed after creation',
      'Must be initialized',
      'Is automatically deleted'
    ],
    correctAnswer: 1,
    explanation: {
      why: 'Mutable = pode ser alterado após criação.',
      whatFor: 'Entender comportamento de listas vs tuplas.',
      how: 'Lists are mutable, tuples are immutable.',
      commonMistakes: ['Confundir mutable/immutable', 'Não saber quais tipos são mutáveis'],
      realWorldExample: 'Lists are mutable, strings are immutable.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'vocabulário', 'tipos'],
    xpReward: 50,
    professionalContext: 'Escolha de estruturas de dados.',
    militaryApplication: 'Ordens são immutable uma vez dadas.',
  },
  {
    id: 'eng-read-vocab-5',
    lessonId: 'eng-read-1',
    type: 'output-prediction',
    question: 'What does "iterate" mean?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que um loop faz com elementos?', hint: 'Passa por cada um, repetidamente.' },
    ],
    options: [
      'Skip elements',
      'Go through elements one by one',
      'Delete elements',
      'Sort elements'
    ],
    correctAnswer: 1,
    explanation: {
      why: 'Iterate = percorrer elementos sequencialmente.',
      whatFor: 'Entender loops e iteradores.',
      how: 'For loop iterates over a list.',
      commonMistakes: ['Confundir com reiterate', 'Não associar com loops'],
      realWorldExample: 'Iterate through the DataFrame rows.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'vocabulário', 'loops'],
    xpReward: 50,
    professionalContext: 'Documentação de APIs.',
    militaryApplication: 'Iterate through checkpoints.',
  },
  {
    id: 'eng-read-vocab-6',
    lessonId: 'eng-read-1',
    type: 'output-prediction',
    question: 'What does "raise an exception" mean?',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que acontece quando algo dá errado?', hint: 'Um erro é "levantado".' },
    ],
    options: [
      'Fix an error',
      'Trigger an error condition',
      'Ignore an error',
      'Log an error'
    ],
    correctAnswer: 1,
    explanation: {
      why: 'Raise = disparar/levantar uma exceção.',
      whatFor: 'Sinalizar condições de erro.',
      how: 'raise ValueError("message") triggers error.',
      commonMistakes: ['Confundir raise com return', 'Não tratar exceções raised'],
      realWorldExample: 'This method raises TypeError if...',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'vocabulário', 'exceções'],
    xpReward: 50,
    professionalContext: 'Tratamento de erros.',
    militaryApplication: 'Raise alert for anomaly.',
  },
  {
    id: 'eng-pattern-cond-2',
    lessonId: 'eng-pattern-2',
    type: 'output-prediction',
    question: 'What does "if applicable" mean?',
    socraticHints: [
      { level: 1, type: 'how', question: '"Applicable" vem de "apply". Se aplica quando?', hint: 'Quando é relevante/apropriado.' },
    ],
    options: [
      'Always required',
      'When relevant or appropriate',
      'Never needed',
      'Only for experts'
    ],
    correctAnswer: 1,
    explanation: {
      why: 'If applicable = se for aplicável/relevante.',
      whatFor: 'Indicar passos condicionais.',
      how: '"Add index, if applicable" = adicione se fizer sentido.',
      commonMistakes: ['Pensar que é obrigatório', 'Ignorar quando é aplicável'],
      realWorldExample: 'Set timeout if applicable.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'padrões', 'condicional'],
    xpReward: 50,
    professionalContext: 'Documentação flexível.',
    militaryApplication: 'Procedimento opcional conforme situação.',
  },
  {
    id: 'eng-pattern-seq-1',
    lessonId: 'eng-pattern-3',
    type: 'output-prediction',
    question: 'In documentation: "First, import the library. Then, create an instance. Finally, call the method." What is the correct order?',
    socraticHints: [
      { level: 1, type: 'how', question: 'Quais palavras indicam sequência?', hint: 'First, Then, Finally.' },
    ],
    options: [
      'Import → Instance → Method',
      'Instance → Import → Method',
      'Method → Import → Instance',
      'Any order is fine'
    ],
    correctAnswer: 0,
    explanation: {
      why: 'Marcadores de sequência indicam ordem.',
      whatFor: 'Seguir instruções corretamente.',
      how: 'First → Then → Finally = ordem obrigatória.',
      commonMistakes: ['Pular passos', 'Inverter ordem'],
      realWorldExample: 'Tutoriais seguem sequência lógica.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'padrões', 'sequência'],
    xpReward: 50,
    professionalContext: 'Seguir tutoriais técnicos.',
    militaryApplication: 'Procedimentos operacionais padrão.',
  },
  {
    id: 'eng-pattern-seq-2',
    lessonId: 'eng-pattern-3',
    type: 'output-prediction',
    question: 'What does "prior to" mean?',
    socraticHints: [
      { level: 1, type: 'how', question: '"Prior" em português é...?', hint: 'Anterior, prévio.' },
    ],
    options: [
      'After',
      'Before',
      'During',
      'Instead of'
    ],
    correctAnswer: 1,
    explanation: {
      why: 'Prior to = antes de.',
      whatFor: 'Entender pré-requisitos.',
      how: '"Prior to installation" = antes de instalar.',
      commonMistakes: ['Confundir com "after"', 'Pular passos prévios'],
      realWorldExample: 'Prior to deployment, run tests.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'padrões', 'tempo'],
    xpReward: 50,
    professionalContext: 'Pré-requisitos de instalação.',
    militaryApplication: 'Prior to mission, conduct briefing.',
  },
  {
    id: 'eng-error-1',
    lessonId: 'eng-pattern-4',
    type: 'output-prediction',
    question: 'Error: "IndexError: list index out of range". What happened?',
    socraticHints: [
      { level: 1, type: 'how', question: '"Out of range" significa?', hint: 'Fora do intervalo válido.' },
    ],
    options: [
      'List is empty',
      'Tried to access index that does not exist',
      'Wrong data type',
      'Memory error'
    ],
    correctAnswer: 1,
    explanation: {
      why: 'Index out of range = índice além do tamanho.',
      whatFor: 'Debugar erros de acesso a lista.',
      how: 'lista[5] em lista de 3 elementos causa erro.',
      commonMistakes: ['Não verificar tamanho antes', 'Off-by-one errors'],
      realWorldExample: 'Acessar último elemento corretamente: lista[-1].',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'erros', 'debugging'],
    xpReward: 75,
    professionalContext: 'Interpretação de erros.',
    militaryApplication: 'Índice fora do range de alvos.',
  },
  {
    id: 'eng-error-2',
    lessonId: 'eng-pattern-4',
    type: 'output-prediction',
    question: 'Error: "TypeError: unsupported operand type(s) for +: \'int\' and \'str\'". What is the issue?',
    socraticHints: [
      { level: 1, type: 'how', question: '"Unsupported operand" significa?', hint: 'Operação não suportada entre esses tipos.' },
    ],
    options: [
      'Variable not defined',
      'Cannot add integer and string together',
      'Division by zero',
      'File not found'
    ],
    correctAnswer: 1,
    explanation: {
      why: 'TypeError = tipos incompatíveis para operação.',
      whatFor: 'Identificar onde converter tipos.',
      how: '5 + "texto" falha. Use str(5) + "texto".',
      commonMistakes: ['Não converter tipos', 'Confundir com ValueError'],
      realWorldExample: 'Concatenar idade com string.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'erros', 'tipos'],
    xpReward: 75,
    professionalContext: 'Debugging de tipos.',
    militaryApplication: 'Erro ao processar dados de sensores.',
  },
  {
    id: 'eng-error-3',
    lessonId: 'eng-pattern-4',
    type: 'output-prediction',
    question: 'Error: "KeyError: \'name\'". What happened?',
    socraticHints: [
      { level: 1, type: 'how', question: '"KeyError" envolve qual estrutura?', hint: 'Dicionário - chave não encontrada.' },
    ],
    options: [
      'Variable name is reserved',
      'Dictionary key does not exist',
      'Function name is wrong',
      'Import failed'
    ],
    correctAnswer: 1,
    explanation: {
      why: 'KeyError = chave não existe no dicionário.',
      whatFor: 'Verificar existência de chaves.',
      how: 'd["name"] falha se "name" não existe. Use d.get("name").',
      commonMistakes: ['Não verificar se chave existe', 'Typo no nome da chave'],
      realWorldExample: 'API retornou JSON sem campo esperado.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'erros', 'dicionário'],
    xpReward: 75,
    professionalContext: 'Parsing de APIs.',
    militaryApplication: 'Campo faltante em relatório.',
  },
  {
    id: 'eng-doc-1',
    lessonId: 'eng-read-2',
    type: 'output-prediction',
    question: 'In Pandas documentation: "Parameters: axis : {0 or \'index\', 1 or \'columns\'}, default 0". What does this mean?',
    socraticHints: [
      { level: 1, type: 'how', question: '"Default 0" significa?', hint: 'Se não especificar, usa 0 (linhas).' },
    ],
    options: [
      'Only axis=0 is allowed',
      'axis can be 0/index or 1/columns, with 0 as default',
      'You must always specify axis',
      'axis is optional and has no default'
    ],
    correctAnswer: 1,
    explanation: {
      why: 'Entender sintaxe de documentação é essencial.',
      whatFor: 'Saber quais valores são válidos e qual é padrão.',
      how: '{opcões} mostra valores válidos, default indica padrão.',
      commonMistakes: ['Não saber que 0="index"', 'Esquecer de mudar default quando necessário'],
      realWorldExample: 'df.sum() usa axis=0 por padrão.',
    },
    difficulty: 'intermediate',
    tags: ['inglês', 'documentação', 'parâmetros'],
    xpReward: 100,
    professionalContext: 'Leitura de documentação.',
    militaryApplication: 'Parâmetros de configuração.',
  },
  {
    id: 'eng-doc-2',
    lessonId: 'eng-read-2',
    type: 'output-prediction',
    question: 'In documentation: "Returns: DataFrame if multiple columns are passed, Series if single column." What determines the return type?',
    socraticHints: [
      { level: 1, type: 'how', question: 'A frase usa "if" duas vezes. O que isso indica?', hint: 'Retorno depende da condição (número de colunas).' },
    ],
    options: [
      'Always returns DataFrame',
      'Always returns Series',
      'Depends on number of columns passed',
      'Random'
    ],
    correctAnswer: 2,
    explanation: {
      why: 'Retorno condicional é comum em APIs.',
      whatFor: 'Saber o que esperar do resultado.',
      how: 'Uma coluna → Series. Múltiplas → DataFrame.',
      commonMistakes: ['Assumir tipo fixo', 'Não verificar tipo retornado'],
      realWorldExample: 'df["col"] vs df[["col1", "col2"]].',
    },
    difficulty: 'intermediate',
    tags: ['inglês', 'documentação', 'retorno'],
    xpReward: 100,
    professionalContext: 'Uso correto de APIs.',
    militaryApplication: 'Entender outputs variáveis.',
  },
  {
    id: 'eng-doc-3',
    lessonId: 'eng-read-2',
    type: 'output-prediction',
    question: '"Note: This method modifies the object in-place and returns None." What does "in-place" mean?',
    socraticHints: [
      { level: 1, type: 'how', question: '"In-place" vs "return new"?', hint: 'Modifica o original vs retorna cópia modificada.' },
    ],
    options: [
      'Creates a new copy',
      'Modifies the original object directly',
      'Only works on specific locations',
      'Requires extra memory'
    ],
    correctAnswer: 1,
    explanation: {
      why: 'In-place significa modificar o próprio objeto.',
      whatFor: 'Saber se original muda ou não.',
      how: 'list.sort() modifica in-place. sorted(list) retorna nova.',
      commonMistakes: ['Atribuir resultado de método in-place', 'Pensar que preserva original'],
      realWorldExample: 'df.sort_values(inplace=True).',
    },
    difficulty: 'intermediate',
    tags: ['inglês', 'documentação', 'comportamento'],
    xpReward: 100,
    professionalContext: 'Evitar bugs com mutabilidade.',
    militaryApplication: 'Alterar ordem in-place vs criar cópia.',
  },
  
  // ============================================
  // EXPANSÃO: MAIS EXERCÍCIOS PYTHON BÁSICO (20)
  // ============================================
  
  {
    id: 'py-fund-exp-1',
    lessonId: 'py-fund-3',
    type: 'output-prediction',
    question: 'Qual o tipo de dado do resultado de: 10 / 3?',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que divisão sempre retorna float em Python 3?', hint: 'Para evitar perda de precisão acidental.' },
      { level: 2, type: 'how', question: 'Qual operador usaria para divisão inteira?', hint: 'Use // para divisão inteira.' },
      { level: 3, type: 'what-for', question: 'Quando faria diferença usar / vs //?', hint: 'Ao indexar listas ou contar unidades inteiras.' },
    ],
    options: ['int', 'float', 'str', 'Erro'],
    correctAnswer: 1,
    explanation: {
      why: 'Python 3 sempre retorna float em divisão / para preservar precisão.',
      whatFor: 'Evitar erros silenciosos de truncamento.',
      how: '10 / 3 = 3.333... (float). 10 // 3 = 3 (int).',
      commonMistakes: ['Esperar int como em outras linguagens', 'Confundir / com //'],
      realWorldExample: 'Calcular média: soma / quantidade sempre será float.',
    },
    difficulty: 'beginner',
    tags: ['tipos', 'divisão', 'float'],
    xpReward: 50,
    professionalContext: 'Cálculos financeiros precisam de precisão decimal.',
    militaryApplication: 'Distribuição de recursos: 100 rações / 7 pelotões = 14.28... por pelotão.',
  },
  {
    id: 'py-fund-exp-2',
    lessonId: 'py-fund-3',
    type: 'output-prediction',
    question: 'Qual o resultado de: bool("") + bool("texto") + bool(0) + bool(1)?',
    socraticHints: [
      { level: 1, type: 'why', question: 'Strings vazias e zero são truthy ou falsy?', hint: 'Vazios e zeros são falsy (False = 0).' },
      { level: 2, type: 'how', question: 'Quando bool() converte para True, qual valor numérico?', hint: 'True = 1, False = 0.' },
    ],
    options: ['0', '1', '2', '4'],
    correctAnswer: 2,
    explanation: {
      why: 'Booleans são internamente 0 e 1.',
      whatFor: 'Entender truthy/falsy é essencial para condicionais.',
      how: 'bool("") = False(0), bool("texto") = True(1), bool(0) = False(0), bool(1) = True(1). Total = 2.',
      commonMistakes: ['Achar que string com espaço é falsy', 'Esquecer que True soma como 1'],
      realWorldExample: 'Contar campos preenchidos: sum([bool(x) for x in campos]).',
    },
    difficulty: 'beginner',
    tags: ['bool', 'truthy', 'falsy'],
    xpReward: 60,
    professionalContext: 'Validação de formulários: contar campos obrigatórios preenchidos.',
    militaryApplication: 'Checklist operacional: quantos itens da lista estão confirmados?',
  },
  {
    id: 'py-fund-exp-3',
    lessonId: 'py-fund-2',
    type: 'code',
    question: 'Crie três variáveis em uma única linha: latitude = -15.79, longitude = -47.88, altitude = 1172. Use desempacotamento.',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que Python permite múltiplas atribuições em uma linha?', hint: 'Eficiência e clareza quando valores são relacionados.' },
      { level: 2, type: 'how', question: 'Qual a sintaxe para atribuir 3 valores a 3 variáveis simultaneamente?', hint: 'a, b, c = valor1, valor2, valor3.' },
    ],
    starterCode: '# Coordenadas de Brasília\n\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '', description: 'Três variáveis devem ser criadas' }],
    explanation: {
      why: 'Desempacotamento torna código mais legível quando valores são relacionados.',
      whatFor: 'Coordenadas geográficas são naturalmente agrupadas.',
      how: 'latitude, longitude, altitude = -15.79, -47.88, 1172.',
      commonMistakes: ['Número diferente de variáveis e valores', 'Esquecer vírgulas'],
      realWorldExample: 'nome, idade, cargo = registro.values().',
    },
    difficulty: 'beginner',
    tags: ['variáveis', 'desempacotamento', 'atribuição'],
    xpReward: 50,
    professionalContext: 'Processamento de registros CSV com múltiplos campos.',
    militaryApplication: 'Coordenadas de waypoints para navegação tática.',
  },
  {
    id: 'py-fund-exp-4',
    lessonId: 'py-fund-3',
    type: 'output-prediction',
    question: 'Qual o resultado de: type(3.14).__name__?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que type() retorna?', hint: 'Retorna um objeto tipo, não string.' },
      { level: 2, type: 'what-for', question: 'Para que serve __name__ em um tipo?', hint: 'Obtém o nome do tipo como string.' },
    ],
    options: ['float', '<class "float">', 'type', '3.14'],
    correctAnswer: 0,
    explanation: {
      why: '__name__ retorna apenas o nome da classe como string limpa.',
      whatFor: 'Útil para logs e mensagens de erro.',
      how: 'type(3.14) = <class "float">. __name__ extrai "float".',
      commonMistakes: ['Confundir type() com __name__', 'Esperar resultado com <class>'],
      realWorldExample: 'Logs: f"Tipo recebido: {type(dado).__name__}".',
    },
    difficulty: 'intermediate',
    tags: ['type', 'introspecção', 'metadados'],
    xpReward: 75,
    professionalContext: 'Debugging e validação de tipos em runtime.',
    militaryApplication: 'Validar tipos de dados em transmissões seguras.',
  },
  {
    id: 'py-fund-exp-5',
    lessonId: 'py-fund-4',
    type: 'code',
    question: 'Dado efetivo = 847, calcule quantos pelotões completos de 30 soldados podem ser formados e quantos soldados sobram.',
    socraticHints: [
      { level: 1, type: 'how', question: 'Qual operador dá o quociente inteiro?', hint: '// para divisão inteira.' },
      { level: 2, type: 'how', question: 'E para o resto da divisão?', hint: '% (módulo) dá o resto.' },
      { level: 3, type: 'why', question: 'Por que separar quociente e resto é útil?', hint: 'Planejamento: pelotões completos + reserva.' },
    ],
    starterCode: 'efetivo = 847\ntam_pelotao = 30\n\n# Calcule pelotoes_completos e soldados_restantes\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '', description: 'pelotoes_completos=28, soldados_restantes=7' }],
    explanation: {
      why: 'Divisão inteira e módulo são fundamentais para alocação de recursos.',
      whatFor: 'Planejar distribuição sem frações de unidade.',
      how: '847 // 30 = 28 pelotões. 847 % 30 = 7 sobram.',
      commonMistakes: ['Usar / em vez de //', 'Confundir ordem de // e %'],
      realWorldExample: 'Páginas: 247 itens / 20 por página = 12 páginas + 7 na última.',
    },
    difficulty: 'beginner',
    tags: ['divisão', 'módulo', 'cálculo'],
    xpReward: 60,
    professionalContext: 'Paginação de resultados em aplicações web.',
    militaryApplication: 'Organização de efetivos em unidades táticas.',
  },
  {
    id: 'py-fund-exp-6',
    lessonId: 'py-fund-3',
    type: 'multiple-choice',
    question: 'Qual tipo de dado é imutável em Python?',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que significa "imutável"?', hint: 'Não pode ser alterado após criação.' },
      { level: 2, type: 'what-for', question: 'Por que Python tem tipos imutáveis?', hint: 'Segurança e eficiência (podem ser cacheados).' },
    ],
    options: ['list', 'dict', 'tuple', 'set'],
    correctAnswer: 2,
    explanation: {
      why: 'Imutabilidade garante que valores não mudem acidentalmente.',
      whatFor: 'Tuplas podem ser chaves de dicionários; listas não.',
      how: 'tuple, str, int, float são imutáveis. list, dict, set são mutáveis.',
      commonMistakes: ['Pensar que todas as sequências são mutáveis', 'Confundir tuple com list'],
      realWorldExample: 'Coordenadas fixas: posicao = (lat, lon) - não deve mudar.',
    },
    difficulty: 'beginner',
    tags: ['tipos', 'imutabilidade', 'tuple'],
    xpReward: 50,
    professionalContext: 'Dados que não devem ser alterados acidentalmente.',
    militaryApplication: 'Coordenadas de objetivos fixos não devem ser editáveis.',
  },
  {
    id: 'py-fund-exp-7',
    lessonId: 'py-fund-4',
    type: 'output-prediction',
    question: 'Qual o resultado de: "ALFA" * 3?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que * faz com strings?', hint: 'Repete a string n vezes.' },
    ],
    options: ['ALFA3', 'ALFAALFAALFA', 'Erro', '["ALFA", "ALFA", "ALFA"]'],
    correctAnswer: 1,
    explanation: {
      why: 'Operador * com strings causa repetição.',
      whatFor: 'Criar separadores, padrões repetitivos.',
      how: '"ALFA" * 3 concatena "ALFA" três vezes.',
      commonMistakes: ['Esperar multiplicação matemática', 'Confundir com lista'],
      realWorldExample: 'Criar linha: "-" * 40 para separadores.',
    },
    difficulty: 'beginner',
    tags: ['strings', 'operadores', 'repetição'],
    xpReward: 40,
    professionalContext: 'Formatação de relatórios em terminal.',
    militaryApplication: 'Código de confirmação de mensagem: "BRAVO" * 2.',
  },
  {
    id: 'py-fund-exp-8',
    lessonId: 'py-fund-3',
    type: 'output-prediction',
    question: 'Qual o resultado de: isinstance(True, int)?',
    socraticHints: [
      { level: 1, type: 'why', question: 'bool é subclasse de qual tipo em Python?', hint: 'bool herda de int.' },
      { level: 2, type: 'how', question: 'O que isinstance verifica?', hint: 'Se objeto é instância de classe ou subclasse.' },
    ],
    options: ['True', 'False', 'Erro', 'None'],
    correctAnswer: 0,
    explanation: {
      why: 'Em Python, bool é subclasse de int. True=1, False=0.',
      whatFor: 'Entender herança de tipos evita surpresas.',
      how: 'isinstance(True, int) = True porque bool herda de int.',
      commonMistakes: ['Achar que bool é tipo completamente separado', 'Não saber que True + True = 2'],
      realWorldExample: 'Verificações de tipo em funções genéricas.',
    },
    difficulty: 'intermediate',
    tags: ['bool', 'int', 'isinstance'],
    xpReward: 75,
    professionalContext: 'Validação de tipos em APIs.',
    militaryApplication: 'Sistemas de flag: ativo=True pode ser somado a contagens.',
  },
  {
    id: 'py-fund-exp-9',
    lessonId: 'py-fund-2',
    type: 'debug',
    question: 'Corrija o erro:\n\n```python\n1st_mission = "Reconhecimento"\nprint(1st_mission)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que nomes de variáveis não podem começar com números?', hint: 'Causaria ambiguidade com literais numéricos.' },
      { level: 2, type: 'how', question: 'Qual convenção usar para indicar ordem?', hint: 'Use underscore ou escreva por extenso: first_mission ou mission_1.' },
    ],
    starterCode: '1st_mission = "Reconhecimento"\nprint(1st_mission)',
    expectedOutput: 'Reconhecimento',
    explanation: {
      why: 'Nomes de variáveis devem começar com letra ou underscore.',
      whatFor: 'Regra de sintaxe para evitar ambiguidade com números.',
      how: 'Renomear para first_mission ou mission_1.',
      commonMistakes: ['Usar número no início', 'Usar espaços em nomes'],
      realWorldExample: 'Convenção: column_1, item_first, first_item.',
    },
    difficulty: 'beginner',
    tags: ['variáveis', 'sintaxe', 'debug'],
    xpReward: 50,
    professionalContext: 'Naming conventions em código.',
    militaryApplication: 'Nomenclatura de missões: mission_alpha, op_1.',
  },
  {
    id: 'py-fund-exp-10',
    lessonId: 'py-fund-4',
    type: 'output-prediction',
    question: 'Qual o resultado de: 2 ** 10?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que ** faz em Python?', hint: 'Exponenciação: base ** expoente.' },
    ],
    options: ['20', '100', '1024', '12'],
    correctAnswer: 2,
    explanation: {
      why: '** é o operador de potência em Python.',
      whatFor: 'Cálculos matemáticos, conversões de unidades.',
      how: '2 ** 10 = 2¹⁰ = 1024.',
      commonMistakes: ['Confundir com * (multiplicação)', 'Confundir com ^ (XOR bit a bit)'],
      realWorldExample: 'Tamanho em bytes: 2**10 = 1 KB, 2**20 = 1 MB.',
    },
    difficulty: 'beginner',
    tags: ['operadores', 'exponenciação', 'matemática'],
    xpReward: 40,
    professionalContext: 'Cálculos de capacidade de armazenamento.',
    militaryApplication: 'Criptografia: chaves de 2^256 combinações.',
  },
  
  // ============================================
  // EXPANSÃO: LÓGICA E DECISÕES (25)
  // ============================================
  
  {
    id: 'py-logic-exp-1',
    lessonId: 'py-logic-1',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\nalerta = "vermelho"\nif alerta == "verde":\n    print("Liberado")\nelif alerta == "amarelo":\n    print("Atenção")\nelse:\n    print("Bloqueado")\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'Qual condição será verdadeira?', hint: 'alerta é "vermelho", nenhum if/elif casa.' },
      { level: 2, type: 'what-for', question: 'Quando else é executado?', hint: 'Quando nenhuma condição anterior foi True.' },
    ],
    options: ['Liberado', 'Atenção', 'Bloqueado', 'Erro'],
    correctAnswer: 2,
    explanation: {
      why: 'else captura todos os casos não cobertos por if/elif.',
      whatFor: 'Garantir que sempre há uma ação para qualquer entrada.',
      how: 'alerta não é "verde" nem "amarelo", então else executa.',
      commonMistakes: ['Esquecer else e deixar casos sem tratamento', 'Ordem errada de condições'],
      realWorldExample: 'Sistema de semáforo: estado padrão é bloqueio.',
    },
    difficulty: 'beginner',
    tags: ['if-else', 'condicionais', 'controle'],
    xpReward: 50,
    professionalContext: 'Sistemas de alerta e notificação.',
    militaryApplication: 'Níveis de alerta operacional: DEFCON.',
  },
  {
    id: 'py-logic-exp-2',
    lessonId: 'py-logic-2',
    type: 'output-prediction',
    question: 'Qual o resultado de: True and False or True?',
    socraticHints: [
      { level: 1, type: 'how', question: 'Qual operador tem precedência: and ou or?', hint: 'and tem precedência maior que or.' },
      { level: 2, type: 'how', question: 'Avalie passo a passo: (True and False) primeiro...', hint: '(True and False) = False. False or True = True.' },
    ],
    options: ['True', 'False', 'Erro', 'None'],
    correctAnswer: 0,
    explanation: {
      why: 'and tem precedência sobre or.',
      whatFor: 'Entender ordem de avaliação evita bugs lógicos.',
      how: '(True and False) = False. False or True = True.',
      commonMistakes: ['Avaliar da esquerda pra direita sem considerar precedência', 'Não usar parênteses para clareza'],
      realWorldExample: 'Condições complexas de acesso: admin or (logged_in and authorized).',
    },
    difficulty: 'intermediate',
    tags: ['operadores', 'precedência', 'booleanos'],
    xpReward: 75,
    professionalContext: 'Regras de negócio com múltiplas condições.',
    militaryApplication: 'Autorização: comandante OR (oficial AND autorizado).',
  },
  {
    id: 'py-logic-exp-3',
    lessonId: 'py-logic-2',
    type: 'output-prediction',
    question: 'Qual o resultado de: not not True?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que not True retorna?', hint: 'not True = False.' },
      { level: 2, type: 'how', question: 'E not False?', hint: 'not False = True.' },
    ],
    options: ['True', 'False', 'Erro', 'not True'],
    correctAnswer: 0,
    explanation: {
      why: 'Dupla negação retorna ao valor original.',
      whatFor: 'Às vezes usado para converter para bool: not not valor.',
      how: 'not True = False. not False = True.',
      commonMistakes: ['Confundir com operador -', 'Não simplificar dupla negação'],
      realWorldExample: 'Conversão: not not [] = False (lista vazia é falsy).',
    },
    difficulty: 'beginner',
    tags: ['not', 'negação', 'booleanos'],
    xpReward: 40,
    professionalContext: 'Simplificação de expressões lógicas.',
    militaryApplication: 'Lógica de confirmação: NOT NOT confirmado = confirmado.',
  },
  {
    id: 'py-logic-exp-4',
    lessonId: 'py-logic-3',
    type: 'output-prediction',
    question: 'Qual o resultado de: 5 > 3 > 1?',
    socraticHints: [
      { level: 1, type: 'why', question: 'Python permite comparações encadeadas?', hint: 'Sim! É avaliado como (5>3) and (3>1).' },
      { level: 2, type: 'how', question: 'Se fosse 5 > 3 > 4, qual seria o resultado?', hint: 'False, porque 3 > 4 é False.' },
    ],
    options: ['True', 'False', 'Erro de sintaxe', '5'],
    correctAnswer: 0,
    explanation: {
      why: 'Python permite comparações encadeadas para maior legibilidade.',
      whatFor: 'Verificar se valor está em um intervalo: low < x < high.',
      how: '5 > 3 > 1 equivale a (5 > 3) and (3 > 1) = True and True = True.',
      commonMistakes: ['Não saber que encadeamento existe', 'Achar que é erro de sintaxe'],
      realWorldExample: '18 <= idade < 65 para verificar idade ativa.',
    },
    difficulty: 'intermediate',
    tags: ['comparação', 'encadeamento', 'operadores'],
    xpReward: 75,
    professionalContext: 'Validação de faixas de valores.',
    militaryApplication: 'Verificar faixa de frequência: 30 <= freq_mhz <= 88.',
  },
  {
    id: 'py-logic-exp-5',
    lessonId: 'py-logic-1',
    type: 'code',
    question: 'Escreva código que classifica combustivel_litros:\n- Se >= 50: "Autonomia alta"\n- Se >= 20: "Autonomia média"\n- Senão: "Reabastecer urgente"',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que a ordem das condições importa?', hint: 'Se >= 20 viesse primeiro, >= 50 nunca seria alcançado.' },
      { level: 2, type: 'how', question: 'Qual a estrutura correta: if-elif-else?', hint: 'Condição mais restritiva primeiro.' },
    ],
    starterCode: 'combustivel_litros = 35\n\n# Classifique e print o status\n',
    expectedOutput: 'Autonomia média',
    explanation: {
      why: 'Ordem de condições é crucial: mais específica primeiro.',
      whatFor: 'Classificação por faixas de valores.',
      how: 'if >= 50, elif >= 20, else para o resto.',
      commonMistakes: ['Ordem errada de condições', 'Usar if-if-if em vez de if-elif-else'],
      realWorldExample: 'Classificação de notas, níveis de estoque.',
    },
    difficulty: 'beginner',
    tags: ['if-elif-else', 'classificação', 'faixas'],
    xpReward: 60,
    professionalContext: 'Alertas de estoque em sistemas logísticos.',
    militaryApplication: 'Monitoramento de combustível de veículos blindados.',
  },
  {
    id: 'py-logic-exp-6',
    lessonId: 'py-logic-2',
    type: 'output-prediction',
    question: 'Qual o valor de resultado?\n\n```python\nresultado = "SIM" if 10 > 5 else "NÃO"\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'Qual a sintaxe do operador ternário?', hint: 'valor_se_true if condição else valor_se_false.' },
    ],
    options: ['SIM', 'NÃO', 'True', '10'],
    correctAnswer: 0,
    explanation: {
      why: 'Operador ternário permite atribuição condicional em uma linha.',
      whatFor: 'Código mais conciso para decisões simples.',
      how: '10 > 5 é True, então resultado = "SIM".',
      commonMistakes: ['Confundir ordem de if e else', 'Usar para lógica complexa'],
      realWorldExample: 'status = "Aprovado" if nota >= 7 else "Reprovado".',
    },
    difficulty: 'beginner',
    tags: ['ternário', 'condicional', 'atribuição'],
    xpReward: 50,
    professionalContext: 'Validações simples em uma linha.',
    militaryApplication: 'Status: "ATIVO" if em_servico else "RESERVA".',
  },
  {
    id: 'py-logic-exp-7',
    lessonId: 'py-logic-3',
    type: 'output-prediction',
    question: 'Qual o resultado de: [] or "default"?',
    socraticHints: [
      { level: 1, type: 'why', question: 'Lista vazia é truthy ou falsy?', hint: 'Vazios são falsy.' },
      { level: 2, type: 'how', question: 'Como or funciona com valores não-booleanos?', hint: 'Retorna primeiro truthy ou último valor.' },
    ],
    options: ['[]', 'default', 'True', 'False'],
    correctAnswer: 1,
    explanation: {
      why: 'or retorna primeiro valor truthy ou último se todos falsy.',
      whatFor: 'Definir valores padrão de forma elegante.',
      how: '[] é falsy, então or avalia e retorna "default".',
      commonMistakes: ['Esperar True/False', 'Não saber que or retorna valores'],
      realWorldExample: 'nome = user_input or "Anônimo".',
    },
    difficulty: 'intermediate',
    tags: ['or', 'falsy', 'default'],
    xpReward: 75,
    professionalContext: 'Valores padrão em formulários.',
    militaryApplication: 'call_sign or "UNIDENTIFIED" para aeronaves.',
  },
  {
    id: 'py-logic-exp-8',
    lessonId: 'py-logic-2',
    type: 'output-prediction',
    question: 'Qual o resultado de: "ALFA" and "BRAVO"?',
    socraticHints: [
      { level: 1, type: 'how', question: 'Como and funciona com valores não-booleanos?', hint: 'Se primeiro é truthy, retorna o segundo.' },
    ],
    options: ['ALFA', 'BRAVO', 'True', 'ALFABRAVO'],
    correctAnswer: 1,
    explanation: {
      why: 'and retorna último valor se todos truthy, ou primeiro falsy.',
      whatFor: 'Entender short-circuit evaluation.',
      how: '"ALFA" é truthy, então and retorna "BRAVO".',
      commonMistakes: ['Esperar concatenação', 'Esperar True'],
      realWorldExample: 'validado and enviar() - só envia se validado.',
    },
    difficulty: 'intermediate',
    tags: ['and', 'truthy', 'short-circuit'],
    xpReward: 75,
    professionalContext: 'Execução condicional de funções.',
    militaryApplication: 'autorizado and transmitir() - só transmite se autorizado.',
  },
  {
    id: 'py-logic-exp-9',
    lessonId: 'py-logic-1',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\nx = 10\nif x > 5:\n    print("A")\nif x > 8:\n    print("B")\nif x > 12:\n    print("C")\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Múltiplos ifs são independentes ou excludentes?', hint: 'Independentes - cada um é avaliado separadamente.' },
      { level: 2, type: 'how', question: 'Quantas condições são verdadeiras?', hint: '10>5 e 10>8 são True. 10>12 é False.' },
    ],
    options: ['A', 'A\\nB', 'A\\nB\\nC', 'B'],
    correctAnswer: 1,
    explanation: {
      why: 'Múltiplos ifs são avaliados independentemente.',
      whatFor: 'Quando quer verificar múltiplas condições não-excludentes.',
      how: 'x=10: 10>5=True (A), 10>8=True (B), 10>12=False (nada).',
      commonMistakes: ['Confundir múltiplos if com if-elif', 'Achar que para no primeiro True'],
      realWorldExample: 'Aplicar múltiplos descontos independentes.',
    },
    difficulty: 'intermediate',
    tags: ['múltiplos-if', 'condicionais', 'independência'],
    xpReward: 60,
    professionalContext: 'Regras de negócio cumulativas.',
    militaryApplication: 'Checklist: cada verificação é independente.',
  },
  {
    id: 'py-logic-exp-10',
    lessonId: 'py-logic-3',
    type: 'output-prediction',
    question: 'Qual o resultado de: None == False?',
    socraticHints: [
      { level: 1, type: 'why', question: 'None e False são a mesma coisa?', hint: 'Não. None é ausência de valor, False é valor booleano.' },
    ],
    options: ['True', 'False', 'None', 'Erro'],
    correctAnswer: 1,
    explanation: {
      why: 'None é um tipo próprio (NoneType), diferente de bool.',
      whatFor: 'Distinguir "sem valor" de "valor falso".',
      how: 'None == False é False. Mas bool(None) == False é True.',
      commonMistakes: ['Confundir None com False', 'Usar == None em vez de is None'],
      realWorldExample: 'Verificar se função retornou valor: result is not None.',
    },
    difficulty: 'intermediate',
    tags: ['None', 'False', 'comparação'],
    xpReward: 75,
    professionalContext: 'Tratamento de valores ausentes vs falsos.',
    militaryApplication: 'Dados não recebidos (None) vs confirmação negativa (False).',
  },
  {
    id: 'py-logic-exp-11',
    lessonId: 'py-logic-2',
    type: 'multiple-choice',
    question: 'Qual operador verifica se um valor está em uma sequência?',
    socraticHints: [
      { level: 1, type: 'what-for', question: 'Para que serve verificar pertencimento?', hint: 'Checar se item existe em lista, string, etc.' },
    ],
    options: ['==', 'in', 'is', 'has'],
    correctAnswer: 1,
    explanation: {
      why: 'in é o operador de pertencimento em Python.',
      whatFor: 'Verificar existência em listas, strings, dicts.',
      how: '"a" in "abc" = True. 5 in [1,2,3] = False.',
      commonMistakes: ['Confundir in com ==', 'Esquecer que funciona com strings também'],
      realWorldExample: 'if "admin" in user_roles.',
    },
    difficulty: 'beginner',
    tags: ['in', 'pertencimento', 'operadores'],
    xpReward: 40,
    professionalContext: 'Verificação de permissões.',
    militaryApplication: 'Verificar se ID está na lista de autorizados.',
  },
  {
    id: 'py-logic-exp-12',
    lessonId: 'py-logic-3',
    type: 'output-prediction',
    question: 'Qual o resultado de: "python" in "python is great"?',
    socraticHints: [
      { level: 1, type: 'how', question: 'in funciona para substrings?', hint: 'Sim! Verifica se substring existe na string maior.' },
    ],
    options: ['True', 'False', '0', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'in verifica substring em strings.',
      whatFor: 'Busca simples em textos.',
      how: '"python" está contido em "python is great".',
      commonMistakes: ['Achar que in só funciona com listas', 'Confundir com índice'],
      realWorldExample: 'Verificar palavras-chave em logs.',
    },
    difficulty: 'beginner',
    tags: ['in', 'strings', 'substring'],
    xpReward: 40,
    professionalContext: 'Filtro de logs por palavras-chave.',
    militaryApplication: 'Detectar termos em comunicações interceptadas.',
  },
  {
    id: 'py-logic-exp-13',
    lessonId: 'py-logic-1',
    type: 'code',
    question: 'Escreva código que verifica patente e imprime a saudação correta:\n- "General": "Sim, General!"\n- "Coronel" ou "Major": "Às ordens!"\n- Outros: "Apresentando-se!"',
    socraticHints: [
      { level: 1, type: 'how', question: 'Como verificar se patente é "Coronel" OU "Major"?', hint: 'Use or: patente == "Coronel" or patente == "Major".' },
      { level: 2, type: 'how', question: 'Alternativa com in?', hint: 'patente in ["Coronel", "Major"].' },
    ],
    starterCode: 'patente = "Major"\n\n# Escreva a estrutura condicional\n',
    expectedOutput: 'Às ordens!',
    explanation: {
      why: 'Condições podem ser combinadas com or ou simplificadas com in.',
      whatFor: 'Tratar múltiplos valores da mesma forma.',
      how: 'if patente == "General": ... elif patente in ["Coronel", "Major"]: ... else: ...',
      commonMistakes: ['Escrever if patente == "Coronel" or "Major"', 'Esquecer que or compara booleanos'],
      realWorldExample: 'Permissões: role in ["admin", "moderator"].',
    },
    difficulty: 'intermediate',
    tags: ['if-elif-else', 'or', 'in'],
    xpReward: 75,
    professionalContext: 'Sistemas de permissão baseados em roles.',
    militaryApplication: 'Protocolo de saudação por patente.',
  },
  {
    id: 'py-logic-exp-14',
    lessonId: 'py-logic-2',
    type: 'output-prediction',
    question: 'Qual o resultado de: not (True or False)?',
    socraticHints: [
      { level: 1, type: 'how', question: 'Primeiro avalie dentro dos parênteses.', hint: 'True or False = True.' },
      { level: 2, type: 'how', question: 'Depois aplique not.', hint: 'not True = False.' },
    ],
    options: ['True', 'False', 'Erro', 'None'],
    correctAnswer: 1,
    explanation: {
      why: 'Parênteses alteram ordem de avaliação.',
      whatFor: 'Controlar precedência de operadores lógicos.',
      how: '(True or False) = True. not True = False.',
      commonMistakes: ['Esquecer precedência de not', 'Não usar parênteses quando necessário'],
      realWorldExample: 'Negar condição composta: not (a or b).',
    },
    difficulty: 'intermediate',
    tags: ['not', 'or', 'precedência'],
    xpReward: 60,
    professionalContext: 'Lógica de exclusão.',
    militaryApplication: 'Área segura: not (alvo_proximo or fogo_inimigo).',
  },
  {
    id: 'py-logic-exp-15',
    lessonId: 'py-logic-3',
    type: 'output-prediction',
    question: 'Qual o resultado de: 0 or "" or [] or "valor" or None?',
    socraticHints: [
      { level: 1, type: 'how', question: 'or retorna primeiro truthy ou último.', hint: '0, "", [] são falsy. "valor" é truthy.' },
    ],
    options: ['0', '""', 'valor', 'None'],
    correctAnswer: 2,
    explanation: {
      why: 'or encadeia e retorna primeiro truthy.',
      whatFor: 'Cascata de valores padrão.',
      how: '0=falsy, ""=falsy, []=falsy, "valor"=truthy. Retorna "valor".',
      commonMistakes: ['Esperar True/False', 'Não saber ordem de avaliação'],
      realWorldExample: 'nome = input1 or input2 or input3 or "default".',
    },
    difficulty: 'advanced',
    tags: ['or', 'encadeamento', 'falsy'],
    xpReward: 100,
    professionalContext: 'Múltiplos fallbacks para configurações.',
    militaryApplication: 'Canal de comunicação: primario or secundario or emergencia.',
  },
  
  // ============================================
  // EXPANSÃO: LOOPS E ITERAÇÃO (30)
  // ============================================
  
  {
    id: 'py-loops-exp-1',
    lessonId: 'py-loops-1',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\nfor i in range(3):\n    print(i, end=" ")\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'range(3) gera quais números?', hint: '0, 1, 2 (não inclui 3).' },
      { level: 2, type: 'how', question: 'O que end=" " faz?', hint: 'Muda o separador de newline para espaço.' },
    ],
    options: ['0 1 2', '1 2 3', '0 1 2 3', '0\\n1\\n2'],
    correctAnswer: 0,
    explanation: {
      why: 'range(n) gera 0 até n-1.',
      whatFor: 'Iterar um número específico de vezes.',
      how: 'range(3) = [0, 1, 2]. end=" " coloca espaço em vez de quebra.',
      commonMistakes: ['Achar que range(3) inclui 3', 'Esquecer que começa em 0'],
      realWorldExample: 'Índices de lista: for i in range(len(lista)).',
    },
    difficulty: 'beginner',
    tags: ['for', 'range', 'iteração'],
    xpReward: 40,
    professionalContext: 'Iteração padrão em processamento.',
    militaryApplication: 'Verificar cada um dos 3 checkpoints.',
  },
  {
    id: 'py-loops-exp-2',
    lessonId: 'py-loops-1',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\nfor letra in "ALFA":\n    if letra == "F":\n        break\n    print(letra, end="")\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que break faz dentro de um loop?', hint: 'Interrompe imediatamente e sai do loop.' },
      { level: 2, type: 'how', question: 'Em qual letra o break será acionado?', hint: 'Quando letra == "F".' },
    ],
    options: ['ALFA', 'AL', 'ALF', 'A'],
    correctAnswer: 1,
    explanation: {
      why: 'break interrompe o loop imediatamente.',
      whatFor: 'Parar quando encontra o que procura.',
      how: 'A e L são impressos. Quando letra="F", break executa antes do print.',
      commonMistakes: ['Achar que F é impresso', 'Confundir break com continue'],
      realWorldExample: 'Busca: parar ao encontrar item.',
    },
    difficulty: 'beginner',
    tags: ['for', 'break', 'strings'],
    xpReward: 50,
    professionalContext: 'Busca linear com parada antecipada.',
    militaryApplication: 'Parar varredura ao detectar sinal.',
  },
  {
    id: 'py-loops-exp-3',
    lessonId: 'py-loops-2',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\nn = 3\nwhile n > 0:\n    print(n)\n    n -= 1\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'Quantas vezes o while executa?', hint: 'Enquanto n > 0: 3, 2, 1.' },
    ],
    options: ['3\\n2\\n1', '3\\n2\\n1\\n0', '2\\n1\\n0', '3'],
    correctAnswer: 0,
    explanation: {
      why: 'while executa enquanto condição é True.',
      whatFor: 'Repetir até condição mudar.',
      how: 'n=3: imprime 3, n=2. n=2: imprime 2, n=1. n=1: imprime 1, n=0. n=0: para.',
      commonMistakes: ['Esquecer de decrementar n', 'Achar que 0 é impresso'],
      realWorldExample: 'Countdown: contagem regressiva.',
    },
    difficulty: 'beginner',
    tags: ['while', 'decremento', 'contagem'],
    xpReward: 50,
    professionalContext: 'Retry com contagem decrescente.',
    militaryApplication: 'Contagem regressiva para lançamento.',
  },
  {
    id: 'py-loops-exp-4',
    lessonId: 'py-loops-3',
    type: 'output-prediction',
    question: 'Qual o resultado de: [x**2 for x in range(5)]?',
    socraticHints: [
      { level: 1, type: 'how', question: 'range(5) gera quais números?', hint: '0, 1, 2, 3, 4.' },
      { level: 2, type: 'how', question: 'O que x**2 faz para cada um?', hint: 'Eleva ao quadrado.' },
    ],
    options: ['[0, 1, 4, 9, 16]', '[1, 4, 9, 16, 25]', '[0, 2, 4, 6, 8]', '[0, 1, 2, 3, 4]'],
    correctAnswer: 0,
    explanation: {
      why: 'List comprehension transforma cada elemento.',
      whatFor: 'Criar listas de forma concisa.',
      how: '0²=0, 1²=1, 2²=4, 3²=9, 4²=16.',
      commonMistakes: ['Incluir 5 no range', 'Confundir ** com *'],
      realWorldExample: 'Normalizar valores: [x/max_val for x in dados].',
    },
    difficulty: 'intermediate',
    tags: ['list-comprehension', 'range', 'matemática'],
    xpReward: 75,
    professionalContext: 'Transformação de dados em uma linha.',
    militaryApplication: 'Calcular distâncias ao quadrado para ordenação.',
  },
  {
    id: 'py-loops-exp-5',
    lessonId: 'py-loops-1',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\nfor i, letra in enumerate("ABC"):\n    print(f"{i}:{letra}", end=" ")\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Para que serve enumerate?', hint: 'Retorna índice E valor simultaneamente.' },
      { level: 2, type: 'how', question: 'Qual o par (índice, valor) para cada letra?', hint: '(0, A), (1, B), (2, C).' },
    ],
    options: ['0:A 1:B 2:C', '1:A 2:B 3:C', 'A:0 B:1 C:2', 'ABC'],
    correctAnswer: 0,
    explanation: {
      why: 'enumerate evita contador manual.',
      whatFor: 'Ter acesso ao índice durante iteração.',
      how: 'enumerate("ABC") = [(0,"A"), (1,"B"), (2,"C")].',
      commonMistakes: ['Não usar desempacotamento', 'Confundir ordem: índice vem primeiro'],
      realWorldExample: 'Numerar linhas de arquivo.',
    },
    difficulty: 'intermediate',
    tags: ['enumerate', 'for', 'desempacotamento'],
    xpReward: 75,
    professionalContext: 'Processar lista mantendo referência de posição.',
    militaryApplication: 'Numerar waypoints em sequência de rota.',
  },
  {
    id: 'py-loops-exp-6',
    lessonId: 'py-loops-1',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\nfor i in range(1, 10, 3):\n    print(i, end=" ")\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'range(start, stop, step) - o que cada argumento faz?', hint: 'Começa em 1, para antes de 10, pula de 3 em 3.' },
    ],
    options: ['1 4 7', '1 4 7 10', '1 3 6 9', '3 6 9'],
    correctAnswer: 0,
    explanation: {
      why: 'range aceita start, stop, step.',
      whatFor: 'Iterar com intervalos personalizados.',
      how: '1, 1+3=4, 4+3=7, 7+3=10 (para, não inclui 10).',
      commonMistakes: ['Incluir o stop', 'Confundir ordem dos argumentos'],
      realWorldExample: 'Processar a cada N registros.',
    },
    difficulty: 'intermediate',
    tags: ['range', 'step', 'for'],
    xpReward: 60,
    professionalContext: 'Amostragem: processar a cada 3 itens.',
    militaryApplication: 'Verificar a cada 3ª posição na formação.',
  },
  {
    id: 'py-loops-exp-7',
    lessonId: 'py-loops-4',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\nfor i in range(5):\n    if i == 2:\n        continue\n    print(i, end=" ")\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que continue faz?', hint: 'Pula para próxima iteração, sem executar o resto.' },
      { level: 2, type: 'how', question: 'Qual número não será impresso?', hint: 'O 2, porque continue é executado.' },
    ],
    options: ['0 1 2 3 4', '0 1 3 4', '0 1', '3 4'],
    correctAnswer: 1,
    explanation: {
      why: 'continue pula o resto da iteração atual.',
      whatFor: 'Ignorar certos valores sem parar o loop.',
      how: 'Quando i=2, continue pula o print. Outros valores são impressos.',
      commonMistakes: ['Confundir continue com break', 'Achar que para o loop'],
      realWorldExample: 'Pular linhas vazias: if not linha: continue.',
    },
    difficulty: 'intermediate',
    tags: ['continue', 'for', 'controle'],
    xpReward: 60,
    professionalContext: 'Filtrar dados durante iteração.',
    militaryApplication: 'Pular posições evacuadas na varredura.',
  },
  {
    id: 'py-loops-exp-8',
    lessonId: 'py-loops-3',
    type: 'output-prediction',
    question: 'Qual o resultado de: [x for x in range(10) if x % 2 == 0]?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que x % 2 == 0 verifica?', hint: 'Se x é par (resto da divisão por 2 é 0).' },
      { level: 2, type: 'how', question: 'Quais números de 0-9 são pares?', hint: '0, 2, 4, 6, 8.' },
    ],
    options: ['[0, 2, 4, 6, 8]', '[1, 3, 5, 7, 9]', '[2, 4, 6, 8, 10]', '[0, 1, 2, 3, 4]'],
    correctAnswer: 0,
    explanation: {
      why: 'List comprehension com filtro if.',
      whatFor: 'Filtrar e transformar em uma operação.',
      how: 'Só inclui x se x % 2 == 0. Pares de 0-9.',
      commonMistakes: ['Esquecer que 0 é par', 'Incluir 10'],
      realWorldExample: 'Filtrar registros: [r for r in dados if r["ativo"]].',
    },
    difficulty: 'intermediate',
    tags: ['list-comprehension', 'filtro', 'módulo'],
    xpReward: 75,
    professionalContext: 'Filtrar dados em pipelines.',
    militaryApplication: 'Selecionar IDs pares para equipe Alfa.',
  },
  {
    id: 'py-loops-exp-9',
    lessonId: 'py-loops-2',
    type: 'code',
    question: 'Escreva um while que encontra o primeiro múltiplo de 7 maior que 100.',
    socraticHints: [
      { level: 1, type: 'how', question: 'Qual condição usar no while?', hint: 'Continuar enquanto não for múltiplo de 7.' },
      { level: 2, type: 'how', question: 'Como verificar se é múltiplo de 7?', hint: 'numero % 7 == 0.' },
    ],
    starterCode: '# Encontre o primeiro múltiplo de 7 maior que 100\nnumero = 101\n\n',
    expectedOutput: '105',
    explanation: {
      why: 'while é ideal quando não sabemos quantas iterações.',
      whatFor: 'Buscar valor que satisfaça condição.',
      how: 'while numero % 7 != 0: numero += 1. 105 é o primeiro.',
      commonMistakes: ['Começar em 100 (precisa ser > 100)', 'Loop infinito por condição errada'],
      realWorldExample: 'Buscar próximo slot disponível.',
    },
    difficulty: 'intermediate',
    tags: ['while', 'busca', 'módulo'],
    xpReward: 75,
    professionalContext: 'Encontrar próximo ID disponível.',
    militaryApplication: 'Calcular próxima frequência de rádio válida.',
  },
  {
    id: 'py-loops-exp-10',
    lessonId: 'py-loops-1',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\nnomes = ["Alfa", "Bravo"]\nidades = [25, 30]\nfor nome, idade in zip(nomes, idades):\n    print(f"{nome}:{idade}", end=" ")\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'Para que serve zip?', hint: 'Combina elementos de múltiplas listas por posição.' },
    ],
    options: ['Alfa:25 Bravo:30', 'Alfa:30 Bravo:25', '(Alfa, 25) (Bravo, 30)', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'zip pareia elementos de listas paralelas.',
      whatFor: 'Iterar sobre múltiplas listas simultaneamente.',
      how: 'zip([a,b], [1,2]) = [(a,1), (b,2)].',
      commonMistakes: ['Listas de tamanhos diferentes (zip para no menor)', 'Não desempacotar tupla'],
      realWorldExample: 'Combinar nomes com valores correspondentes.',
    },
    difficulty: 'intermediate',
    tags: ['zip', 'for', 'desempacotamento'],
    xpReward: 75,
    professionalContext: 'Combinar dados de fontes diferentes.',
    militaryApplication: 'Parear call-signs com frequências.',
  },
  {
    id: 'py-loops-exp-11',
    lessonId: 'py-loops-4',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\nfor i in range(3):\n    pass\nprint(i)\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que pass faz?', hint: 'Nada - é um placeholder.' },
      { level: 2, type: 'why', question: 'A variável i existe após o loop?', hint: 'Sim, mantém o último valor.' },
    ],
    options: ['2', '3', 'Erro', 'None'],
    correctAnswer: 0,
    explanation: {
      why: 'Variáveis de loop persistem após o loop em Python.',
      whatFor: 'Pode acessar último valor processado.',
      how: 'Loop termina com i=2. print(i) imprime 2.',
      commonMistakes: ['Achar que i não existe fora do loop', 'Confundir com outras linguagens'],
      realWorldExample: 'Verificar último item processado após loop.',
    },
    difficulty: 'intermediate',
    tags: ['for', 'escopo', 'variável'],
    xpReward: 75,
    professionalContext: 'Debug: verificar onde loop parou.',
    militaryApplication: 'Identificar última posição verificada.',
  },
  {
    id: 'py-loops-exp-12',
    lessonId: 'py-loops-3',
    type: 'output-prediction',
    question: 'Qual o resultado de: {x: x**2 for x in range(3)}?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que {} com for cria?', hint: 'Dict comprehension.' },
      { level: 2, type: 'how', question: 'Qual é chave e qual é valor?', hint: 'x é chave, x**2 é valor.' },
    ],
    options: ['{0: 0, 1: 1, 2: 4}', '[0, 1, 4]', '{0, 1, 4}', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Dict comprehension cria dicionários.',
      whatFor: 'Mapear chaves para valores calculados.',
      how: 'x:x**2 cria {0:0, 1:1, 2:4}.',
      commonMistakes: ['Confundir com set (sem :)', 'Confundir com list'],
      realWorldExample: 'Criar mapa de IDs: {u["id"]: u for u in users}.',
    },
    difficulty: 'advanced',
    tags: ['dict-comprehension', 'dicionário', 'transformação'],
    xpReward: 100,
    professionalContext: 'Indexar dados por ID.',
    militaryApplication: 'Mapear código de unidade para efetivo.',
  },
  {
    id: 'py-loops-exp-13',
    lessonId: 'py-loops-1',
    type: 'code',
    question: 'Use for para calcular a soma dos números de 1 a 100 (inclusive).',
    socraticHints: [
      { level: 1, type: 'how', question: 'Qual range inclui 100?', hint: 'range(1, 101) - stop não é incluído.' },
      { level: 2, type: 'how', question: 'Como acumular a soma?', hint: 'Inicialize soma=0 e some += i a cada iteração.' },
    ],
    starterCode: '# Calcule a soma de 1 a 100\n\n',
    expectedOutput: '5050',
    explanation: {
      why: 'Loops são essenciais para cálculos acumulativos.',
      whatFor: 'Somar, contar, agregar dados.',
      how: 'soma = 0; for i in range(1, 101): soma += i. Resultado: 5050.',
      commonMistakes: ['range(100) não inclui 100', 'Esquecer de inicializar soma'],
      realWorldExample: 'Soma de vendas mensais.',
    },
    difficulty: 'beginner',
    tags: ['for', 'range', 'soma'],
    xpReward: 50,
    professionalContext: 'Totalizações em relatórios.',
    militaryApplication: 'Somar efetivos de todas as unidades.',
  },
  {
    id: 'py-loops-exp-14',
    lessonId: 'py-loops-4',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\nfor i in range(3):\n    print(i)\nelse:\n    print("FIM")\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que else faz após um for?', hint: 'Executa se loop completar normalmente (sem break).' },
    ],
    options: ['0\\n1\\n2\\nFIM', '0\\n1\\n2', 'FIM', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'else em loop executa após loop completo.',
      whatFor: 'Código que roda apenas se não houve break.',
      how: 'Loop completa normalmente, então else executa.',
      commonMistakes: ['Não saber que loops têm else', 'Confundir com if-else'],
      realWorldExample: 'Busca: else print("não encontrado").',
    },
    difficulty: 'advanced',
    tags: ['for-else', 'controle', 'loop'],
    xpReward: 100,
    professionalContext: 'Padrão busca com fallback.',
    militaryApplication: 'Varredura completa sem detecção: "ÁREA LIMPA".',
  },
  {
    id: 'py-loops-exp-15',
    lessonId: 'py-loops-2',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\ni = 0\nwhile i < 3:\n    i += 1\n    if i == 2:\n        break\nelse:\n    print("COMPLETO")\nprint(i)\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'O break interrompe o else também?', hint: 'Sim! else só executa se loop terminar sem break.' },
    ],
    options: ['COMPLETO\\n2', '2', 'COMPLETO\\n3', '3'],
    correctAnswer: 1,
    explanation: {
      why: 'break impede execução do else.',
      whatFor: 'Distinguir término normal de interrupção.',
      how: 'i=1 OK, i=2 break. else não executa. print(i) = 2.',
      commonMistakes: ['Achar que else sempre executa', 'Não saber que break cancela else'],
      realWorldExample: 'Busca com confirmação de sucesso.',
    },
    difficulty: 'advanced',
    tags: ['while-else', 'break', 'controle'],
    xpReward: 100,
    professionalContext: 'Retry com confirmação de esgotamento.',
    militaryApplication: 'Missão interrompida vs missão completa.',
  },
  
  // ============================================
  // EXPANSÃO: ESTRUTURAS DE DADOS (25)
  // ============================================
  
  {
    id: 'py-struct-exp-1',
    lessonId: 'py-struct-1',
    type: 'output-prediction',
    question: 'Qual o resultado de: [1, 2, 3] + [4, 5]?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que + faz com listas?', hint: 'Concatenação.' },
    ],
    options: ['[1, 2, 3, 4, 5]', '[5, 7]', '[[1,2,3], [4,5]]', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: '+ concatena listas.',
      whatFor: 'Juntar listas em uma.',
      how: '[1,2,3] + [4,5] = [1,2,3,4,5].',
      commonMistakes: ['Esperar soma elemento a elemento', 'Confundir com append'],
      realWorldExample: 'Combinar resultados de múltiplas queries.',
    },
    difficulty: 'beginner',
    tags: ['lista', 'concatenação', 'operadores'],
    xpReward: 40,
    professionalContext: 'Merge de listas de dados.',
    militaryApplication: 'Consolidar listas de pessoal de diferentes pelotões.',
  },
  {
    id: 'py-struct-exp-2',
    lessonId: 'py-struct-2',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\nlista = [3, 1, 4, 1, 5]\nlista.sort()\nprint(lista)\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'sort() modifica a lista original?', hint: 'Sim, in-place.' },
    ],
    options: ['[1, 1, 3, 4, 5]', '[5, 4, 3, 1, 1]', '[3, 1, 4, 1, 5]', 'None'],
    correctAnswer: 0,
    explanation: {
      why: 'sort() ordena in-place.',
      whatFor: 'Ordenar lista existente.',
      how: 'lista.sort() modifica lista para ordem crescente.',
      commonMistakes: ['Achar que retorna nova lista', 'Confundir com sorted()'],
      realWorldExample: 'Ordenar registros por data.',
    },
    difficulty: 'beginner',
    tags: ['lista', 'sort', 'ordenação'],
    xpReward: 50,
    professionalContext: 'Ordenar resultados de busca.',
    militaryApplication: 'Ordenar unidades por prioridade de suprimento.',
  },
  {
    id: 'py-struct-exp-3',
    lessonId: 'py-struct-2',
    type: 'output-prediction',
    question: 'Qual a diferença entre sort() e sorted()?\n\n```python\nlista = [3, 1, 2]\na = lista.sort()\nb = sorted([3, 1, 2])\nprint(a, b)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'sort() retorna o quê?', hint: 'None - modifica in-place.' },
      { level: 2, type: 'how', question: 'sorted() retorna o quê?', hint: 'Nova lista ordenada.' },
    ],
    options: ['None [1, 2, 3]', '[1,2,3] [1,2,3]', 'Erro', 'None None'],
    correctAnswer: 0,
    explanation: {
      why: 'sort() modifica in-place e retorna None. sorted() retorna nova lista.',
      whatFor: 'sort para modificar original, sorted para preservar.',
      how: 'a = None, b = [1, 2, 3].',
      commonMistakes: ['Atribuir resultado de sort()', 'Achar que são iguais'],
      realWorldExample: 'Manter dados originais: ordenado = sorted(dados).',
    },
    difficulty: 'intermediate',
    tags: ['sort', 'sorted', 'in-place'],
    xpReward: 75,
    professionalContext: 'Preservar dados originais em análises.',
    militaryApplication: 'Criar ranking sem alterar lista original.',
  },
  {
    id: 'py-struct-exp-4',
    lessonId: 'py-struct-3',
    type: 'output-prediction',
    question: 'Qual o resultado de: {"a": 1, "b": 2}.get("c", 0)?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que .get() faz se chave não existe?', hint: 'Retorna valor padrão.' },
    ],
    options: ['0', 'None', 'Erro (KeyError)', '{"c": 0}'],
    correctAnswer: 0,
    explanation: {
      why: 'get() evita KeyError com valor padrão.',
      whatFor: 'Acesso seguro a dicionários.',
      how: '"c" não existe, retorna 0 (padrão especificado).',
      commonMistakes: ['Usar [] e ter KeyError', 'Esquecer valor padrão'],
      realWorldExample: 'contagem.get(item, 0) + 1 para contar.',
    },
    difficulty: 'beginner',
    tags: ['dicionário', 'get', 'default'],
    xpReward: 50,
    professionalContext: 'Leitura segura de configurações.',
    militaryApplication: 'Obter status de unidade: status.get(id, "DESCONHECIDO").',
  },
  {
    id: 'py-struct-exp-5',
    lessonId: 'py-struct-3',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\nd = {"x": 1}\nd["y"] = 2\nprint(list(d.keys()))\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'Como adicionar item a dicionário?', hint: 'd[nova_chave] = valor.' },
    ],
    options: ['["x", "y"]', '["x"]', '{"x": 1, "y": 2}', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Dicionários são mutáveis.',
      whatFor: 'Adicionar pares chave-valor dinamicamente.',
      how: 'd["y"] = 2 adiciona nova chave. keys() retorna chaves.',
      commonMistakes: ['Achar que dicts são imutáveis', 'Confundir com atribuição de variável'],
      realWorldExample: 'Construir objeto resposta: result["status"] = "ok".',
    },
    difficulty: 'beginner',
    tags: ['dicionário', 'mutação', 'keys'],
    xpReward: 50,
    professionalContext: 'Construir respostas de API.',
    militaryApplication: 'Atualizar status de missão: missao["status"] = "CONCLUÍDA".',
  },
  {
    id: 'py-struct-exp-6',
    lessonId: 'py-struct-4',
    type: 'output-prediction',
    question: 'Qual o resultado de: set([1, 2, 2, 3, 3, 3])?',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que sets garantem?', hint: 'Unicidade - sem duplicatas.' },
    ],
    options: ['{1, 2, 3}', '[1, 2, 2, 3, 3, 3]', '{1, 2, 2, 3, 3, 3}', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Sets removem duplicatas automaticamente.',
      whatFor: 'Coleção de valores únicos.',
      how: 'set([1,2,2,3,3,3]) = {1, 2, 3}.',
      commonMistakes: ['Esperar ordem', 'Confundir {} vazio com set'],
      realWorldExample: 'unique_users = set(user_ids).',
    },
    difficulty: 'beginner',
    tags: ['set', 'unicidade', 'conversão'],
    xpReward: 50,
    professionalContext: 'Eliminar duplicatas de listas.',
    militaryApplication: 'IDs únicos de unidades reportadas.',
  },
  {
    id: 'py-struct-exp-7',
    lessonId: 'py-struct-4',
    type: 'output-prediction',
    question: 'Qual o resultado de: (1, 2, 3)[1]?',
    socraticHints: [
      { level: 1, type: 'how', question: 'Tuplas suportam indexação?', hint: 'Sim, como listas.' },
    ],
    options: ['2', '1', '(2)', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Tuplas são sequências, suportam índices.',
      whatFor: 'Acessar elementos por posição.',
      how: 'Índice 1 = segundo elemento = 2.',
      commonMistakes: ['Achar que tuplas não têm índices', 'Tentar modificar tupla'],
      realWorldExample: 'Coordenadas: ponto[0] = x, ponto[1] = y.',
    },
    difficulty: 'beginner',
    tags: ['tupla', 'índice', 'acesso'],
    xpReward: 40,
    professionalContext: 'Acessar elementos de registro fixo.',
    militaryApplication: 'Coordenadas: waypoint[0] = latitude.',
  },
  {
    id: 'py-struct-exp-8',
    lessonId: 'py-struct-1',
    type: 'output-prediction',
    question: 'Qual o resultado de: [1, 2, 3][-1]?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que índices negativos fazem?', hint: 'Contam do final.' },
    ],
    options: ['3', '1', '-1', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Índices negativos acessam do final.',
      whatFor: 'Pegar último elemento facilmente.',
      how: '-1 = último, -2 = penúltimo, etc.',
      commonMistakes: ['Não saber que existe', 'Confundir com erro'],
      realWorldExample: 'Último registro: logs[-1].',
    },
    difficulty: 'beginner',
    tags: ['lista', 'índice', 'negativo'],
    xpReward: 40,
    professionalContext: 'Acessar último item de listas.',
    militaryApplication: 'Última posição conhecida: posicoes[-1].',
  },
  {
    id: 'py-struct-exp-9',
    lessonId: 'py-struct-2',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\nlista = [1, 2, 3]\nlista.insert(1, "X")\nprint(lista)\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'insert(índice, valor) faz o quê?', hint: 'Insere valor NA posição índice.' },
    ],
    options: ['[1, "X", 2, 3]', '["X", 1, 2, 3]', '[1, 2, "X", 3]', '[1, 2, 3, "X"]'],
    correctAnswer: 0,
    explanation: {
      why: 'insert coloca elemento na posição especificada.',
      whatFor: 'Inserir no meio da lista.',
      how: 'insert(1, "X") coloca "X" no índice 1.',
      commonMistakes: ['Confundir com append', 'Ordem errada dos argumentos'],
      realWorldExample: 'Inserir prioridade: tarefas.insert(0, urgente).',
    },
    difficulty: 'beginner',
    tags: ['lista', 'insert', 'mutação'],
    xpReward: 50,
    professionalContext: 'Inserir item com prioridade.',
    militaryApplication: 'Inserir waypoint intermediário na rota.',
  },
  {
    id: 'py-struct-exp-10',
    lessonId: 'py-struct-3',
    type: 'code',
    question: 'Crie um dicionário que mapeia códigos NATO para letras:\nA→ALFA, B→BRAVO, C→CHARLIE',
    socraticHints: [
      { level: 1, type: 'how', question: 'Qual a sintaxe de dicionário?', hint: '{chave: valor, ...}.' },
    ],
    starterCode: '# Crie o dicionário nato\n\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '', description: 'nato["A"] deve retornar "ALFA"' }],
    explanation: {
      why: 'Dicionários mapeiam chaves para valores.',
      whatFor: 'Lookup rápido por chave.',
      how: 'nato = {"A": "ALFA", "B": "BRAVO", "C": "CHARLIE"}.',
      commonMistakes: ['Inverter chave/valor', 'Esquecer aspas em strings'],
      realWorldExample: 'Mapeamento de códigos de erro para mensagens.',
    },
    difficulty: 'beginner',
    tags: ['dicionário', 'mapeamento', 'criação'],
    xpReward: 50,
    professionalContext: 'Tabelas de lookup.',
    militaryApplication: 'Alfabeto fonético NATO.',
  },
  {
    id: 'py-struct-exp-11',
    lessonId: 'py-struct-4',
    type: 'output-prediction',
    question: 'Qual o resultado de: {1, 2, 3} & {2, 3, 4}?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que & faz com sets?', hint: 'Interseção: elementos em comum.' },
    ],
    options: ['{2, 3}', '{1, 2, 3, 4}', '{1, 4}', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: '& é interseção de conjuntos.',
      whatFor: 'Encontrar elementos em comum.',
      how: '{1,2,3} & {2,3,4} = {2, 3}.',
      commonMistakes: ['Confundir & com |', 'Achar que é concatenação'],
      realWorldExample: 'Usuários em ambos os grupos.',
    },
    difficulty: 'intermediate',
    tags: ['set', 'interseção', 'operadores'],
    xpReward: 75,
    professionalContext: 'Encontrar elementos comuns.',
    militaryApplication: 'Pessoal com dupla qualificação.',
  },
  {
    id: 'py-struct-exp-12',
    lessonId: 'py-struct-4',
    type: 'output-prediction',
    question: 'Qual o resultado de: {1, 2, 3} | {3, 4, 5}?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que | faz com sets?', hint: 'União: todos elementos.' },
    ],
    options: ['{1, 2, 3, 4, 5}', '{3}', '{1, 2, 4, 5}', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: '| é união de conjuntos.',
      whatFor: 'Combinar elementos sem duplicatas.',
      how: '{1,2,3} | {3,4,5} = {1,2,3,4,5}.',
      commonMistakes: ['Esperar duplicatas', 'Confundir com &'],
      realWorldExample: 'Todas as permissões de múltiplos grupos.',
    },
    difficulty: 'intermediate',
    tags: ['set', 'união', 'operadores'],
    xpReward: 75,
    professionalContext: 'Merge de permissões.',
    militaryApplication: 'Consolidar listas de equipamento.',
  },
  {
    id: 'py-struct-exp-13',
    lessonId: 'py-struct-1',
    type: 'output-prediction',
    question: 'Qual o resultado de: [1, 2, 3][1:3]?',
    socraticHints: [
      { level: 1, type: 'how', question: 'Slicing [start:stop] inclui stop?', hint: 'Não, vai até stop-1.' },
    ],
    options: ['[2, 3]', '[1, 2]', '[2]', '[1, 2, 3]'],
    correctAnswer: 0,
    explanation: {
      why: 'Slicing extrai subseção.',
      whatFor: 'Pegar parte de sequência.',
      how: '[1:3] = índices 1 e 2 = [2, 3].',
      commonMistakes: ['Incluir stop no resultado', 'Confundir índices'],
      realWorldExample: 'Pegar primeiras N linhas: linhas[:n].',
    },
    difficulty: 'beginner',
    tags: ['lista', 'slicing', 'subsequência'],
    xpReward: 50,
    professionalContext: 'Paginar resultados.',
    militaryApplication: 'Selecionar unidades 2 a 5: unidades[1:5].',
  },
  {
    id: 'py-struct-exp-14',
    lessonId: 'py-struct-2',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\nlista = [3, 1, 4, 1, 5]\nprint(lista.count(1))\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que count() retorna?', hint: 'Número de ocorrências do valor.' },
    ],
    options: ['2', '1', '0', '5'],
    correctAnswer: 0,
    explanation: {
      why: 'count() conta ocorrências.',
      whatFor: 'Saber quantas vezes valor aparece.',
      how: '1 aparece 2 vezes na lista.',
      commonMistakes: ['Confundir com len()', 'Confundir com index()'],
      realWorldExample: 'Contar votos: votos.count("sim").',
    },
    difficulty: 'beginner',
    tags: ['lista', 'count', 'ocorrências'],
    xpReward: 40,
    professionalContext: 'Contagem de respostas.',
    militaryApplication: 'Contar confirmações de recebimento.',
  },
  {
    id: 'py-struct-exp-15',
    lessonId: 'py-struct-3',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\nd = {"a": 1, "b": 2}\nprint(list(d.values()))\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que .values() retorna?', hint: 'Os valores do dicionário.' },
    ],
    options: ['[1, 2]', '["a", "b"]', '[("a", 1), ("b", 2)]', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'values() retorna apenas os valores.',
      whatFor: 'Iterar ou processar valores.',
      how: 'd.values() = dict_values([1, 2]).',
      commonMistakes: ['Confundir com keys()', 'Confundir com items()'],
      realWorldExample: 'Somar valores: sum(precos.values()).',
    },
    difficulty: 'beginner',
    tags: ['dicionário', 'values', 'iteração'],
    xpReward: 40,
    professionalContext: 'Agregar valores de mapeamentos.',
    militaryApplication: 'Somar efetivos de todas as unidades.',
  },
  
  // ============================================
  // EXPANSÃO: FUNÇÕES (20)
  // ============================================
  
  {
    id: 'py-func-exp-1',
    lessonId: 'py-func-1',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\ndef saudacao():\n    return "Olá"\n\nprint(saudacao())\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que return faz?', hint: 'Retorna valor para quem chamou.' },
    ],
    options: ['Olá', 'saudacao()', 'None', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'return devolve valor da função.',
      whatFor: 'Funções podem produzir resultados.',
      how: 'saudacao() retorna "Olá", print imprime.',
      commonMistakes: ['Esquecer return', 'Confundir return com print'],
      realWorldExample: 'Funções que calculam e retornam valores.',
    },
    difficulty: 'beginner',
    tags: ['função', 'return', 'chamada'],
    xpReward: 40,
    professionalContext: 'Funções reutilizáveis.',
    militaryApplication: 'Função que retorna status de missão.',
  },
  {
    id: 'py-func-exp-2',
    lessonId: 'py-func-2',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\ndef soma(a, b=10):\n    return a + b\n\nprint(soma(5))\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que b=10 significa na definição?', hint: 'Valor padrão se não for passado.' },
    ],
    options: ['15', '5', 'Erro', 'None'],
    correctAnswer: 0,
    explanation: {
      why: 'Parâmetros podem ter valores padrão.',
      whatFor: 'Flexibilidade: alguns args são opcionais.',
      how: 'soma(5) usa b=10 (padrão). 5+10=15.',
      commonMistakes: ['Não saber que padrão existe', 'Achar que dá erro'],
      realWorldExample: 'print(sep=" ") - sep tem padrão.',
    },
    difficulty: 'beginner',
    tags: ['função', 'parâmetros', 'default'],
    xpReward: 50,
    professionalContext: 'APIs com parâmetros opcionais.',
    militaryApplication: 'Função com prioridade padrão.',
  },
  {
    id: 'py-func-exp-3',
    lessonId: 'py-func-2',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\ndef info(nome, patente):\n    return f"{patente} {nome}"\n\nprint(info(patente="Cap", nome="Silva"))\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que são keyword arguments?', hint: 'Argumentos passados por nome.' },
    ],
    options: ['Cap Silva', 'Silva Cap', 'Erro', 'None'],
    correctAnswer: 0,
    explanation: {
      why: 'Keyword args permitem ordem arbitrária.',
      whatFor: 'Clareza e flexibilidade na chamada.',
      how: 'patente="Cap", nome="Silva" → "Cap Silva".',
      commonMistakes: ['Achar que ordem importa', 'Confundir com posicional'],
      realWorldExample: 'Funções com muitos parâmetros.',
    },
    difficulty: 'intermediate',
    tags: ['função', 'kwargs', 'parâmetros'],
    xpReward: 60,
    professionalContext: 'APIs com parâmetros nomeados.',
    militaryApplication: 'Identificação precisa de pessoal.',
  },
  {
    id: 'py-func-exp-4',
    lessonId: 'py-func-3',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\nx = 10\n\ndef teste():\n    x = 5\n    return x\n\nteste()\nprint(x)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'x dentro da função é a mesma variável x de fora?', hint: 'Não! São escopos diferentes.' },
    ],
    options: ['10', '5', 'Erro', 'None'],
    correctAnswer: 0,
    explanation: {
      why: 'Variáveis locais não afetam globais.',
      whatFor: 'Isolamento: funções não alteram contexto externo.',
      how: 'x=5 é local. x=10 global permanece.',
      commonMistakes: ['Achar que muda global', 'Não entender escopo'],
      realWorldExample: 'Funções não devem ter side effects.',
    },
    difficulty: 'intermediate',
    tags: ['função', 'escopo', 'local'],
    xpReward: 75,
    professionalContext: 'Evitar bugs de escopo.',
    militaryApplication: 'Variáveis de missão isoladas por operação.',
  },
  {
    id: 'py-func-exp-5',
    lessonId: 'py-func-4',
    type: 'output-prediction',
    question: 'Qual o resultado de: (lambda x: x * 2)(5)?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que lambda cria?', hint: 'Função anônima em uma linha.' },
      { level: 2, type: 'how', question: 'Os parênteses após lambda fazem o quê?', hint: 'Chamam a função imediatamente.' },
    ],
    options: ['10', '5', 'lambda', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Lambda é função anônima.',
      whatFor: 'Funções simples sem def.',
      how: 'lambda x: x*2 cria função, (5) chama com arg 5.',
      commonMistakes: ['Não saber que pode chamar imediatamente', 'Confundir com expressão'],
      realWorldExample: 'sorted(lista, key=lambda x: x[1]).',
    },
    difficulty: 'intermediate',
    tags: ['lambda', 'função', 'anônima'],
    xpReward: 75,
    professionalContext: 'Callbacks e ordenação customizada.',
    militaryApplication: 'Ordenar por prioridade: key=lambda m: m["urgencia"].',
  },
  {
    id: 'py-func-exp-6',
    lessonId: 'py-func-2',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\ndef soma(*args):\n    return sum(args)\n\nprint(soma(1, 2, 3, 4))\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que *args faz?', hint: 'Captura argumentos posicionais variáveis.' },
    ],
    options: ['10', '(1, 2, 3, 4)', 'Erro', '4'],
    correctAnswer: 0,
    explanation: {
      why: '*args captura n argumentos em tupla.',
      whatFor: 'Funções com número variável de args.',
      how: 'args = (1,2,3,4). sum(args) = 10.',
      commonMistakes: ['Achar que vira lista', 'Não saber que é tupla'],
      realWorldExample: 'print() aceita n argumentos.',
    },
    difficulty: 'intermediate',
    tags: ['função', 'args', 'variadic'],
    xpReward: 75,
    professionalContext: 'APIs flexíveis.',
    militaryApplication: 'Reportar n observações: reportar(*observacoes).',
  },
  {
    id: 'py-func-exp-7',
    lessonId: 'py-func-1',
    type: 'code',
    question: 'Crie função calcular_autonomia(combustivel, consumo_km) que retorna quantos km o veículo pode percorrer.',
    socraticHints: [
      { level: 1, type: 'how', question: 'Qual a fórmula de autonomia?', hint: 'combustivel / consumo_km.' },
    ],
    starterCode: '# Defina a função\n\n',
    expectedOutput: '',
    testCases: [{ input: 'calcular_autonomia(60, 0.1)', expectedOutput: '600.0', description: '60L com consumo 0.1L/km' }],
    explanation: {
      why: 'Funções encapsulam lógica reutilizável.',
      whatFor: 'Calcular autonomia para diferentes veículos.',
      how: 'def calcular_autonomia(c, cons): return c / cons.',
      commonMistakes: ['Inverter divisão', 'Esquecer return'],
      realWorldExample: 'Calculadora de combustível.',
    },
    difficulty: 'beginner',
    tags: ['função', 'cálculo', 'definição'],
    xpReward: 60,
    professionalContext: 'Funções de utilidade.',
    militaryApplication: 'Planejamento logístico de missões.',
  },
  {
    id: 'py-func-exp-8',
    lessonId: 'py-func-2',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\ndef potencia(base, exp=2):\n    return base ** exp\n\nprint(potencia(3, 3))\n```',
    socraticHints: [
      { level: 1, type: 'how', question: 'O valor padrão é usado?', hint: 'Não, exp=3 foi passado explicitamente.' },
    ],
    options: ['27', '9', '6', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Valor explícito sobrescreve padrão.',
      whatFor: 'Padrão só é usado se arg não for passado.',
      how: 'potencia(3, 3) = 3**3 = 27.',
      commonMistakes: ['Achar que padrão sempre vale', 'Confundir ordem'],
      realWorldExample: 'sorted(lista, reverse=True) sobrescreve padrão.',
    },
    difficulty: 'beginner',
    tags: ['função', 'parâmetros', 'sobrescrita'],
    xpReward: 50,
    professionalContext: 'Parâmetros flexíveis.',
    militaryApplication: 'Nível de alerta padrão, sobrescrito quando necessário.',
  },
  {
    id: 'py-func-exp-9',
    lessonId: 'py-func-3',
    type: 'output-prediction',
    question: 'Qual o output?\n\n```python\ncounter = 0\n\ndef incrementar():\n    global counter\n    counter += 1\n\nincrementar()\nprint(counter)\n```',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que global faz?', hint: 'Permite modificar variável global dentro da função.' },
    ],
    options: ['1', '0', 'Erro', 'None'],
    correctAnswer: 0,
    explanation: {
      why: 'global permite acesso de escrita à variável global.',
      whatFor: 'Modificar estado global (usar com cuidado).',
      how: 'global counter permite counter += 1 afetar o global.',
      commonMistakes: ['Esquecer global e ter erro', 'Usar global demais'],
      realWorldExample: 'Contadores globais (melhor usar classes).',
    },
    difficulty: 'intermediate',
    tags: ['função', 'global', 'escopo'],
    xpReward: 75,
    professionalContext: 'Gerenciamento de estado (evitar quando possível).',
    militaryApplication: 'Contador de mensagens transmitidas.',
  },
  {
    id: 'py-func-exp-10',
    lessonId: 'py-func-4',
    type: 'output-prediction',
    question: 'Qual o resultado de: list(map(lambda x: x.upper(), ["alfa", "bravo"]))?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que map() faz?', hint: 'Aplica função a cada elemento.' },
    ],
    options: ['["ALFA", "BRAVO"]', '["alfa", "bravo"]', 'map object', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'map aplica função a cada item.',
      whatFor: 'Transformar todos elementos.',
      how: 'lambda x: x.upper() aplicado a cada string.',
      commonMistakes: ['Esquecer list()', 'Não saber que map retorna iterator'],
      realWorldExample: 'Normalizar dados: map(str.strip, linhas).',
    },
    difficulty: 'intermediate',
    tags: ['map', 'lambda', 'transformação'],
    xpReward: 75,
    professionalContext: 'Processamento funcional de dados.',
    militaryApplication: 'Padronizar call-signs para maiúsculas.',
  },
  
  // ============================================
  // EXPANSÃO: PANDAS BÁSICO (25)
  // ============================================
  
  {
    id: 'pd-intro-exp-1',
    lessonId: 'pd-intro-2',
    type: 'output-prediction',
    question: 'Qual o resultado de: pd.Series([10, 20, 30]).sum()?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que .sum() faz em uma Series?', hint: 'Soma todos os valores.' },
    ],
    options: ['60', '[10, 20, 30]', '30', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'Series suporta operações vetorizadas.',
      whatFor: 'Agregação rápida de dados.',
      how: '10 + 20 + 30 = 60.',
      commonMistakes: ['Achar que retorna lista', 'Não saber métodos de Series'],
      realWorldExample: 'Total de vendas: vendas.sum().',
    },
    difficulty: 'beginner',
    tags: ['pandas', 'series', 'agregação'],
    xpReward: 50,
    professionalContext: 'Totais em relatórios.',
    militaryApplication: 'Total de efetivos: efetivos.sum().',
  },
  {
    id: 'pd-intro-exp-2',
    lessonId: 'pd-intro-3',
    type: 'output-prediction',
    question: 'Qual o resultado de: df.shape onde df tem 100 linhas e 5 colunas?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que .shape retorna?', hint: '(linhas, colunas).' },
    ],
    options: ['(100, 5)', '(5, 100)', '500', '[100, 5]'],
    correctAnswer: 0,
    explanation: {
      why: 'shape informa dimensões do DataFrame.',
      whatFor: 'Verificar tamanho dos dados.',
      how: '(linhas, colunas) = (100, 5).',
      commonMistakes: ['Inverter ordem', 'Confundir com len()'],
      realWorldExample: 'Verificar se dados foram carregados corretamente.',
    },
    difficulty: 'beginner',
    tags: ['pandas', 'dataframe', 'dimensões'],
    xpReward: 40,
    professionalContext: 'Validação de dados carregados.',
    militaryApplication: 'Verificar tamanho de relatório importado.',
  },
  {
    id: 'pd-intro-exp-3',
    lessonId: 'pd-intro-3',
    type: 'output-prediction',
    question: 'Como acessar a coluna "nome" de um DataFrame df?',
    socraticHints: [
      { level: 1, type: 'how', question: 'Duas sintaxes funcionam. Quais?', hint: 'df["nome"] ou df.nome.' },
    ],
    options: ['df["nome"] ou df.nome', 'df.get("nome")', 'df[nome]', 'df->nome'],
    correctAnswer: 0,
    explanation: {
      why: 'Colunas são acessíveis como atributos ou por chave.',
      whatFor: 'Selecionar dados específicos.',
      how: 'df["nome"] sempre funciona. df.nome se nome não tem espaços.',
      commonMistakes: ['Esquecer aspas', 'Usar df.nome com nomes inválidos'],
      realWorldExample: 'Selecionar coluna para análise.',
    },
    difficulty: 'beginner',
    tags: ['pandas', 'coluna', 'acesso'],
    xpReward: 40,
    professionalContext: 'Seleção de campos.',
    militaryApplication: 'Extrair coluna de patentes: df["patente"].',
  },
  {
    id: 'pd-intro-exp-4',
    lessonId: 'pd-intro-2',
    type: 'output-prediction',
    question: 'Qual o tipo de dado retornado por: df["coluna_unica"]?',
    socraticHints: [
      { level: 1, type: 'how', question: 'Uma coluna é...?', hint: 'Uma Series.' },
    ],
    options: ['Series', 'DataFrame', 'list', 'array'],
    correctAnswer: 0,
    explanation: {
      why: 'Uma coluna de DataFrame é uma Series.',
      whatFor: 'Series tem métodos específicos.',
      how: 'df["col"] retorna pd.Series.',
      commonMistakes: ['Achar que é DataFrame', 'Achar que é lista'],
      realWorldExample: 'df["vendas"].mean() usa método de Series.',
    },
    difficulty: 'beginner',
    tags: ['pandas', 'series', 'tipo'],
    xpReward: 50,
    professionalContext: 'Entender estrutura de dados.',
    militaryApplication: 'Operar em coluna específica.',
  },
  {
    id: 'pd-intro-exp-5',
    lessonId: 'pd-intro-3',
    type: 'output-prediction',
    question: 'Qual o resultado de: df.columns se df tem colunas ["id", "nome", "valor"]?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que .columns retorna?', hint: 'Index com nomes das colunas.' },
    ],
    options: ['Index(["id", "nome", "valor"])', '["id", "nome", "valor"]', '3', 'Erro'],
    correctAnswer: 0,
    explanation: {
      why: 'columns é um Index (tipo especial Pandas).',
      whatFor: 'Listar ou iterar sobre colunas.',
      how: 'df.columns retorna Index com nomes.',
      commonMistakes: ['Esperar lista Python', 'Confundir com shape'],
      realWorldExample: 'Verificar colunas após merge.',
    },
    difficulty: 'beginner',
    tags: ['pandas', 'columns', 'metadados'],
    xpReward: 40,
    professionalContext: 'Explorar estrutura de dados.',
    militaryApplication: 'Verificar campos disponíveis em relatório.',
  },
  {
    id: 'pd-manip-exp-1',
    lessonId: 'pd-manip-1',
    type: 'output-prediction',
    question: 'Qual a diferença entre df.loc[0] e df.iloc[0]?',
    socraticHints: [
      { level: 1, type: 'why', question: 'loc usa o quê como referência?', hint: 'Labels (índices nomeados).' },
      { level: 2, type: 'how', question: 'E iloc?', hint: 'Posições inteiras (0, 1, 2...).' },
    ],
    options: ['loc usa label, iloc usa posição', 'São idênticos', 'loc é mais lento', 'iloc só aceita slices'],
    correctAnswer: 0,
    explanation: {
      why: 'loc é baseado em labels, iloc em posições.',
      whatFor: 'Acessar dados de forma precisa.',
      how: 'Se índice é ["a","b"], loc["a"] funciona, iloc[0] funciona.',
      commonMistakes: ['Usar iloc com labels', 'Confundir quando índice é numérico'],
      realWorldExample: 'df com índice de datas: loc["2024-01-01"].',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'loc', 'iloc'],
    xpReward: 75,
    professionalContext: 'Acesso preciso a dados.',
    militaryApplication: 'Acessar registro por ID vs por posição.',
  },
  {
    id: 'pd-manip-exp-2',
    lessonId: 'pd-manip-2',
    type: 'code',
    question: 'Dado df com coluna "status", filtre apenas linhas onde status == "ATIVO".',
    socraticHints: [
      { level: 1, type: 'how', question: 'Qual a sintaxe de filtro booleano?', hint: 'df[df["coluna"] == valor].' },
    ],
    starterCode: '# df já existe com coluna "status"\n\nativos = \n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '', description: 'Apenas linhas com status ATIVO' }],
    explanation: {
      why: 'Filtros booleanos selecionam subconjuntos.',
      whatFor: 'Análise de segmentos específicos.',
      how: 'df[df["status"] == "ATIVO"].',
      commonMistakes: ['Esquecer df[] externo', 'Usar = em vez de =='],
      realWorldExample: 'Clientes ativos: df[df["ativo"] == True].',
    },
    difficulty: 'beginner',
    tags: ['pandas', 'filtro', 'booleano'],
    xpReward: 60,
    professionalContext: 'Segmentação de dados.',
    militaryApplication: 'Pessoal em serviço ativo.',
  },
  {
    id: 'pd-manip-exp-3',
    lessonId: 'pd-manip-2',
    type: 'output-prediction',
    question: 'Qual o resultado de: df[df["valor"] > 100]["nome"].count()?',
    socraticHints: [
      { level: 1, type: 'how', question: 'Quebre em partes: filtro, seleção, agregação.', hint: 'Filtra por valor, seleciona nome, conta.' },
    ],
    options: ['Número de nomes onde valor > 100', 'Lista de nomes', 'Erro', 'True/False'],
    correctAnswer: 0,
    explanation: {
      why: 'Encadeamento permite operações complexas.',
      whatFor: 'Análises multi-passo em uma linha.',
      how: 'Filtra valor>100, pega coluna nome, conta elementos.',
      commonMistakes: ['Não entender ordem das operações', 'Confundir count com sum'],
      realWorldExample: 'Quantos produtos premium vendidos.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'encadeamento', 'contagem'],
    xpReward: 75,
    professionalContext: 'KPIs e métricas.',
    militaryApplication: 'Contagem de missões de alto valor.',
  },
  {
    id: 'pd-manip-exp-4',
    lessonId: 'pd-manip-3',
    type: 'code',
    question: 'Crie nova coluna "total" que é preco * quantidade.',
    socraticHints: [
      { level: 1, type: 'how', question: 'Como criar coluna nova?', hint: 'df["nova"] = expressão.' },
    ],
    starterCode: '# df tem colunas "preco" e "quantidade"\n\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '', description: 'Coluna total = preco * quantidade' }],
    explanation: {
      why: 'Novas colunas derivadas são comuns.',
      whatFor: 'Calcular campos adicionais.',
      how: 'df["total"] = df["preco"] * df["quantidade"].',
      commonMistakes: ['Esquecer df[] dos dois lados', 'Multiplicar escalares errado'],
      realWorldExample: 'Calcular receita por linha.',
    },
    difficulty: 'beginner',
    tags: ['pandas', 'coluna', 'cálculo'],
    xpReward: 50,
    professionalContext: 'Colunas calculadas.',
    militaryApplication: 'Custo total de suprimento por item.',
  },
  {
    id: 'pd-manip-exp-5',
    lessonId: 'pd-manip-4',
    type: 'output-prediction',
    question: 'Qual método ordena DataFrame por coluna "data" do mais recente ao mais antigo?',
    socraticHints: [
      { level: 1, type: 'how', question: 'Qual método ordena?', hint: 'sort_values().' },
      { level: 2, type: 'how', question: 'Qual argumento inverte a ordem?', hint: 'ascending=False.' },
    ],
    options: ['df.sort_values("data", ascending=False)', 'df.sort("data")', 'df.order_by("data")', 'df.sort_values("data")'],
    correctAnswer: 0,
    explanation: {
      why: 'sort_values ordena por coluna.',
      whatFor: 'Ver dados mais recentes primeiro.',
      how: 'ascending=False = ordem decrescente.',
      commonMistakes: ['Esquecer ascending', 'Usar sort() (não existe)'],
      realWorldExample: 'Últimas transações primeiro.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'ordenação', 'sort'],
    xpReward: 60,
    professionalContext: 'Ordenar por relevância/recência.',
    militaryApplication: 'Relatórios mais recentes primeiro.',
  },
  
  // ============================================
  // EXPANSÃO: PANDAS INTERMEDIÁRIO (25)
  // ============================================
  
  {
    id: 'pd-analysis-exp-1',
    lessonId: 'pd-analysis-1',
    type: 'output-prediction',
    question: 'Qual o resultado de: df.groupby("regiao")["vendas"].sum()?',
    socraticHints: [
      { level: 1, type: 'how', question: 'GroupBy + agregação retorna o quê?', hint: 'Series com índice = grupos.' },
    ],
    options: ['Series com soma de vendas por região', 'DataFrame', 'Número único', 'Lista'],
    correctAnswer: 0,
    explanation: {
      why: 'GroupBy divide dados por categoria.',
      whatFor: 'Agregações por grupo.',
      how: 'Agrupa por região, soma vendas de cada grupo.',
      commonMistakes: ['Esperar DataFrame', 'Esquecer agregação'],
      realWorldExample: 'Vendas por filial.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'groupby', 'agregação'],
    xpReward: 75,
    professionalContext: 'Relatórios por categoria.',
    militaryApplication: 'Efetivos por unidade.',
  },
  {
    id: 'pd-analysis-exp-2',
    lessonId: 'pd-analysis-2',
    type: 'output-prediction',
    question: 'O que df.describe() retorna?',
    socraticHints: [
      { level: 1, type: 'what-for', question: 'Para que serve describe?', hint: 'Visão estatística rápida.' },
    ],
    options: ['Estatísticas descritivas (count, mean, std, min, max, quartis)', 'Tipos de dados', 'Primeiras linhas', 'Colunas'],
    correctAnswer: 0,
    explanation: {
      why: 'describe() resume dados numéricos.',
      whatFor: 'Visão geral rápida dos dados.',
      how: 'Retorna count, mean, std, min, 25%, 50%, 75%, max.',
      commonMistakes: ['Confundir com info()', 'Esquecer que ignora não-numéricos'],
      realWorldExample: 'Primeiro passo em análise exploratória.',
    },
    difficulty: 'beginner',
    tags: ['pandas', 'estatística', 'exploração'],
    xpReward: 50,
    professionalContext: 'Análise exploratória inicial.',
    militaryApplication: 'Estatísticas de desempenho de unidades.',
  },
  {
    id: 'pd-analysis-exp-3',
    lessonId: 'pd-analysis-1',
    type: 'code',
    question: 'Agrupe df por "categoria" e calcule média e soma de "valor" simultaneamente.',
    socraticHints: [
      { level: 1, type: 'how', question: 'Qual método permite múltiplas agregações?', hint: '.agg() com lista ou dict.' },
    ],
    starterCode: '# df tem colunas "categoria" e "valor"\n\nresultado = \n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '', description: 'DataFrame com mean e sum por categoria' }],
    explanation: {
      why: 'agg() permite múltiplas funções.',
      whatFor: 'Relatórios completos em uma operação.',
      how: 'df.groupby("categoria")["valor"].agg(["mean", "sum"]).',
      commonMistakes: ['Usar apply em vez de agg', 'Sintaxe errada de lista'],
      realWorldExample: 'Relatório de vendas com total e média.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'groupby', 'agg'],
    xpReward: 75,
    professionalContext: 'Relatórios multi-métrica.',
    militaryApplication: 'Estatísticas de consumo por tipo de suprimento.',
  },
  {
    id: 'pd-adv-exp-1',
    lessonId: 'pd-adv-1',
    type: 'output-prediction',
    question: 'Qual tipo de merge mantém TODAS as linhas de ambos DataFrames?',
    socraticHints: [
      { level: 1, type: 'how', question: 'Qual é o "full outer" join?', hint: 'how="outer".' },
    ],
    options: ['outer', 'inner', 'left', 'right'],
    correctAnswer: 0,
    explanation: {
      why: 'outer join preserva todos os dados.',
      whatFor: 'Não perder nenhum registro.',
      how: 'pd.merge(df1, df2, on="key", how="outer").',
      commonMistakes: ['Confundir outer com inner', 'Esquecer how= (default é inner)'],
      realWorldExample: 'Consolidar dados de fontes diferentes.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'merge', 'join'],
    xpReward: 75,
    professionalContext: 'Consolidação de dados.',
    militaryApplication: 'Fusão de relatórios de diferentes comandos.',
  },
  {
    id: 'pd-adv-exp-2',
    lessonId: 'pd-adv-3',
    type: 'output-prediction',
    question: 'Como verificar se um DataFrame tem valores faltantes?',
    socraticHints: [
      { level: 1, type: 'how', question: 'Qual método detecta NaN?', hint: 'isna() ou isnull().' },
    ],
    options: ['df.isna().sum()', 'df.empty()', 'df.null()', 'df.missing()'],
    correctAnswer: 0,
    explanation: {
      why: 'isna() retorna máscara booleana.',
      whatFor: 'Identificar dados faltantes.',
      how: 'df.isna().sum() conta NaN por coluna.',
      commonMistakes: ['Usar == None', 'Esquecer .sum()'],
      realWorldExample: 'Verificar qualidade de dados.',
    },
    difficulty: 'beginner',
    tags: ['pandas', 'nan', 'validação'],
    xpReward: 50,
    professionalContext: 'Data quality check.',
    militaryApplication: 'Verificar campos vazios em relatórios.',
  },
  {
    id: 'pd-adv-exp-3',
    lessonId: 'pd-adv-3',
    type: 'code',
    question: 'Preencha valores NaN da coluna "salario" com a média dessa coluna.',
    socraticHints: [
      { level: 1, type: 'how', question: 'Qual método substitui NaN?', hint: 'fillna().' },
      { level: 2, type: 'how', question: 'Como calcular a média?', hint: 'df["coluna"].mean().' },
    ],
    starterCode: '# df tem coluna "salario" com alguns NaN\n\n',
    expectedOutput: '',
    testCases: [{ input: '', expectedOutput: '', description: 'NaN substituídos pela média' }],
    explanation: {
      why: 'Imputação por média é técnica comum.',
      whatFor: 'Manter registros sem perder análise.',
      how: 'df["salario"].fillna(df["salario"].mean()).',
      commonMistakes: ['Calcular média após fillna (viés)', 'Esquecer de salvar resultado'],
      realWorldExample: 'Imputação em análise de RH.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'fillna', 'imputação'],
    xpReward: 75,
    professionalContext: 'Tratamento de dados incompletos.',
    militaryApplication: 'Estimar valores não reportados.',
  },
  {
    id: 'pd-adv-exp-4',
    lessonId: 'pd-adv-4',
    type: 'output-prediction',
    question: 'Qual é mais eficiente para operações em DataFrame: loop for ou operações vetorizadas?',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que vetorização é mais rápida?', hint: 'Operações em batch otimizadas em C.' },
    ],
    options: ['Vetorizadas (muito mais rápido)', 'Loop for (mais controle)', 'Iguais', 'Depende do tamanho'],
    correctAnswer: 0,
    explanation: {
      why: 'Pandas usa NumPy por baixo - otimizado em C.',
      whatFor: 'Performance em grandes datasets.',
      how: 'df["col"] * 2 é 100x mais rápido que loop.',
      commonMistakes: ['Usar iterrows() sempre', 'Não pensar em vetorização'],
      realWorldExample: 'Processar milhões de linhas.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'performance', 'vetorização'],
    xpReward: 75,
    professionalContext: 'Otimização de código.',
    militaryApplication: 'Processar grandes volumes de dados operacionais.',
  },
  {
    id: 'pd-adv-exp-5',
    lessonId: 'pd-adv-1',
    type: 'output-prediction',
    question: 'Qual a diferença entre merge() e concat()?',
    socraticHints: [
      { level: 1, type: 'why', question: 'merge junta por quê?', hint: 'Por colunas em comum (chave).' },
      { level: 2, type: 'how', question: 'E concat?', hint: 'Empilha DataFrames (sem chave).' },
    ],
    options: ['merge usa chave, concat empilha', 'São idênticos', 'concat é mais rápido', 'merge só funciona com 2 DFs'],
    correctAnswer: 0,
    explanation: {
      why: 'merge = SQL join, concat = UNION/append.',
      whatFor: 'Casos de uso diferentes.',
      how: 'merge(on="id") vs concat([df1, df2]).',
      commonMistakes: ['Usar concat quando precisa merge', 'Não alinhar colunas para concat'],
      realWorldExample: 'Merge: enriquecer dados. Concat: consolidar períodos.',
    },
    difficulty: 'intermediate',
    tags: ['pandas', 'merge', 'concat'],
    xpReward: 75,
    professionalContext: 'Combinação de datasets.',
    militaryApplication: 'Consolidar relatórios mensais (concat) vs enriquecer com dados de pessoal (merge).',
  },
  
  // ============================================
  // EXPANSÃO: INGLÊS TÉCNICO (30)
  // ============================================
  
  {
    id: 'eng-vocab-exp-1',
    lessonId: 'eng-read-1',
    type: 'multiple-choice',
    question: 'What does "deprecated" mean in software documentation?',
    socraticHints: [
      { level: 1, type: 'what-for', question: 'Por que marcar algo como deprecated?', hint: 'Avisar que será removido em versões futuras.' },
    ],
    options: ['Outdated and should not be used', 'Recently added', 'Required', 'Optional'],
    correctAnswer: 0,
    explanation: {
      why: 'Deprecated indica funcionalidade em desuso.',
      whatFor: 'Migrar código antes que seja removido.',
      how: 'Documentação marca deprecated para avisar desenvolvedores.',
      commonMistakes: ['Ignorar warnings de deprecated', 'Achar que ainda é a melhor opção'],
      realWorldExample: 'Python 2 foi deprecated em 2020.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'vocabulário', 'documentação'],
    xpReward: 50,
    professionalContext: 'Manutenção de código.',
    militaryApplication: 'Equipamento "deprecated" = fora de serviço ativo.',
  },
  {
    id: 'eng-vocab-exp-2',
    lessonId: 'eng-read-1',
    type: 'multiple-choice',
    question: 'What does "immutable" mean in programming?',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que algo seria imutável por design?', hint: 'Segurança e previsibilidade.' },
    ],
    options: ['Cannot be changed after creation', 'Can change at runtime', 'Invisible', 'Required'],
    correctAnswer: 0,
    explanation: {
      why: 'Immutable = não pode ser alterado.',
      whatFor: 'Prevenir modificações acidentais.',
      how: 'Strings e tuplas são immutable em Python.',
      commonMistakes: ['Confundir com invisible', 'Achar que tudo é mutável'],
      realWorldExample: 'Constantes de configuração.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'vocabulário', 'conceitos'],
    xpReward: 50,
    professionalContext: 'Design de software seguro.',
    militaryApplication: 'Dados de missão imutáveis para auditoria.',
  },
  {
    id: 'eng-vocab-exp-3',
    lessonId: 'eng-read-4',
    type: 'output-prediction',
    question: 'The error says: "TypeError: cannot unpack non-iterable NoneType object". What happened?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que "unpack" significa?', hint: 'Desempacotar: a, b = tupla.' },
      { level: 2, type: 'why', question: 'Por que NoneType não é iterável?', hint: 'None não tem elementos para desempacotar.' },
    ],
    options: ['A function returned None instead of a tuple/list', 'Syntax error', 'Missing import', 'Wrong Python version'],
    correctAnswer: 0,
    explanation: {
      why: 'Cannot unpack None porque None não é sequência.',
      whatFor: 'Identificar funções que retornam None inesperadamente.',
      how: 'a, b = funcao() onde funcao() retornou None.',
      commonMistakes: ['Não verificar retorno de função', 'Assumir que sempre retorna valor'],
      realWorldExample: 'Funções que retornam None em caso de erro.',
    },
    difficulty: 'intermediate',
    tags: ['inglês', 'erro', 'TypeError'],
    xpReward: 75,
    professionalContext: 'Debugging de erros comuns.',
    militaryApplication: 'Interpretar logs de sistema.',
  },
  {
    id: 'eng-vocab-exp-4',
    lessonId: 'eng-read-3',
    type: 'multiple-choice',
    question: 'On Stack Overflow, what does "MCVE" or "MRE" mean?',
    socraticHints: [
      { level: 1, type: 'what-for', question: 'Por que pediriam um exemplo mínimo?', hint: 'Facilitar reprodução do problema.' },
    ],
    options: ['Minimal, Complete, Verifiable Example / Minimal Reproducible Example', 'Main Code Version Error', 'Multiple Choice Verification', 'Memory Calculation Value Error'],
    correctAnswer: 0,
    explanation: {
      why: 'MCVE/MRE ajuda outros a reproduzir o problema.',
      whatFor: 'Obter ajuda mais rápida e precisa.',
      how: 'Código mínimo que demonstra o bug.',
      commonMistakes: ['Postar código gigante', 'Não incluir dados de teste'],
      realWorldExample: 'Perguntas bem formatadas no SO.',
    },
    difficulty: 'intermediate',
    tags: ['inglês', 'stackoverflow', 'boas práticas'],
    xpReward: 60,
    professionalContext: 'Pedir ajuda efetivamente.',
    militaryApplication: 'Relatórios de problema claros e concisos.',
  },
  {
    id: 'eng-vocab-exp-5',
    lessonId: 'eng-read-4',
    type: 'output-prediction',
    question: '"ValueError: could not convert string to float: \'N/A\'". What should you do?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que "N/A" representa em dados?', hint: 'Not Available - valor faltante.' },
    ],
    options: ['Handle or clean the N/A values before conversion', 'Change Python version', 'Use different variable name', 'Restart the program'],
    correctAnswer: 0,
    explanation: {
      why: '"N/A" é string, não número.',
      whatFor: 'Limpar dados antes de processar.',
      how: 'Substituir ou remover "N/A" antes de float().',
      commonMistakes: ['Ignorar dados sujos', 'Achar que Python lida automaticamente'],
      realWorldExample: 'Limpeza de CSV importado.',
    },
    difficulty: 'intermediate',
    tags: ['inglês', 'erro', 'dados'],
    xpReward: 75,
    professionalContext: 'Data cleaning.',
    militaryApplication: 'Tratar dados incompletos de sensores.',
  },
  {
    id: 'eng-pattern-exp-1',
    lessonId: 'eng-pattern-1',
    type: 'output-prediction',
    question: 'In docs: "This function raises ValueError if the input is invalid." What does "raises" mean?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que é uma "exception" em Python?', hint: 'Erro que interrompe execução.' },
    ],
    options: ['Throws/triggers an exception', 'Prints a warning', 'Returns a value', 'Ignores the problem'],
    correctAnswer: 0,
    explanation: {
      why: 'Raises = lança exceção.',
      whatFor: 'Saber quando usar try/except.',
      how: 'raise ValueError() interrompe se não tratado.',
      commonMistakes: ['Confundir com return', 'Não tratar exceções esperadas'],
      realWorldExample: 'Validação de entrada de usuário.',
    },
    difficulty: 'intermediate',
    tags: ['inglês', 'documentação', 'exceções'],
    xpReward: 60,
    professionalContext: 'Error handling.',
    militaryApplication: 'Tratamento de erros em sistemas críticos.',
  },
  {
    id: 'eng-pattern-exp-2',
    lessonId: 'eng-pattern-2',
    type: 'output-prediction',
    question: '"Unless otherwise specified, the default timeout is 30 seconds." What does this mean?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que "unless otherwise specified" significa?', hint: 'A menos que você especifique diferente.' },
    ],
    options: ['30 seconds is the default, but you can change it', '30 seconds is mandatory', 'You must always specify timeout', 'Timeout cannot be changed'],
    correctAnswer: 0,
    explanation: {
      why: 'Estrutura padrão de defaults em documentação.',
      whatFor: 'Saber que pode customizar se necessário.',
      how: 'Se não passar timeout, usa 30s.',
      commonMistakes: ['Achar que é obrigatório', 'Não saber que pode mudar'],
      realWorldExample: 'Parâmetros opcionais de API.',
    },
    difficulty: 'intermediate',
    tags: ['inglês', 'padrões', 'defaults'],
    xpReward: 60,
    professionalContext: 'Leitura de documentação.',
    militaryApplication: 'Parâmetros padrão de equipamento.',
  },
  {
    id: 'eng-pattern-exp-3',
    lessonId: 'eng-pattern-3',
    type: 'output-prediction',
    question: '"Unlike lists, tuples are immutable." What relationship is being described?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que "unlike" indica?', hint: 'Contraste/diferença.' },
    ],
    options: ['Contrast: lists are mutable, tuples are not', 'Similarity', 'Lists contain tuples', 'Tuples are a type of list'],
    correctAnswer: 0,
    explanation: {
      why: 'Unlike = diferentemente de.',
      whatFor: 'Entender diferenças entre conceitos.',
      how: 'Listas mutáveis, tuplas imutáveis.',
      commonMistakes: ['Confundir unlike com like', 'Não notar o contraste'],
      realWorldExample: 'Comparações em documentação técnica.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'contraste', 'comparação'],
    xpReward: 50,
    professionalContext: 'Entender diferenças técnicas.',
    militaryApplication: 'Comparar especificações de equipamentos.',
  },
  {
    id: 'eng-pattern-exp-4',
    lessonId: 'eng-pattern-4',
    type: 'output-prediction',
    question: '"First, import the library. Then, create an instance. Finally, call the method." What structure is this?',
    socraticHints: [
      { level: 1, type: 'what-for', question: 'Para que servem First/Then/Finally?', hint: 'Sequência de passos.' },
    ],
    options: ['Step-by-step instructions', 'Error messages', 'Comparison', 'Definition'],
    correctAnswer: 0,
    explanation: {
      why: 'First/Then/Finally = sequência.',
      whatFor: 'Guiar usuário em ordem.',
      how: 'Marcadores de sequência são comuns em tutoriais.',
      commonMistakes: ['Pular passos', 'Não seguir ordem'],
      realWorldExample: 'Tutoriais de instalação.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'instruções', 'sequência'],
    xpReward: 40,
    professionalContext: 'Seguir tutoriais.',
    militaryApplication: 'Procedimentos operacionais padrão.',
  },
  {
    id: 'eng-pattern-exp-5',
    lessonId: 'eng-pattern-1',
    type: 'multiple-choice',
    question: 'What does "instantiate" mean in OOP context?',
    socraticHints: [
      { level: 1, type: 'how', question: 'Classe vs instância - qual a diferença?', hint: 'Classe é molde, instância é objeto criado.' },
    ],
    options: ['Create an object from a class', 'Delete an object', 'Define a class', 'Import a module'],
    correctAnswer: 0,
    explanation: {
      why: 'Instantiate = criar instância de classe.',
      whatFor: 'Usar objetos em programação.',
      how: 'obj = MinhaClasse() instantia MinhaClasse.',
      commonMistakes: ['Confundir com definir classe', 'Confundir com importar'],
      realWorldExample: 'pd.DataFrame() instantia um DataFrame.',
    },
    difficulty: 'intermediate',
    tags: ['inglês', 'OOP', 'vocabulário'],
    xpReward: 60,
    professionalContext: 'Programação orientada a objetos.',
    militaryApplication: 'Criar instâncias de objetos de simulação.',
  },
  {
    id: 'eng-error-exp-1',
    lessonId: 'eng-read-4',
    type: 'output-prediction',
    question: '"AttributeError: \'NoneType\' object has no attribute \'append\'". What is the root cause?',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que a variável é NoneType?', hint: 'Algo retornou None em vez de lista.' },
    ],
    options: ['Variable is None instead of a list', 'append() does not exist', 'Wrong Python version', 'Missing parentheses'],
    correctAnswer: 0,
    explanation: {
      why: 'NoneType não tem .append().',
      whatFor: 'Identificar onde None foi atribuído.',
      how: 'Provavelmente função que deveria retornar lista retornou None.',
      commonMistakes: ['Culpar o método append', 'Não rastrear origem do None'],
      realWorldExample: 'lista = lista.append(x) - append retorna None!',
    },
    difficulty: 'intermediate',
    tags: ['inglês', 'erro', 'AttributeError'],
    xpReward: 75,
    professionalContext: 'Debugging comum.',
    militaryApplication: 'Resolver erros em sistemas.',
  },
  {
    id: 'eng-error-exp-2',
    lessonId: 'eng-read-4',
    type: 'output-prediction',
    question: '"IndentationError: expected an indented block". What does this mean?',
    socraticHints: [
      { level: 1, type: 'how', question: 'O que indentação significa em Python?', hint: 'Espaços/tabs que definem blocos.' },
    ],
    options: ['Missing indentation after if/for/def/etc', 'Wrong variable name', 'Missing import', 'Syntax error in string'],
    correctAnswer: 0,
    explanation: {
      why: 'Python usa indentação para blocos.',
      whatFor: 'Corrigir estrutura do código.',
      how: 'Linha após if/for/def precisa estar indentada.',
      commonMistakes: ['Misturar tabs e espaços', 'Esquecer de indentar corpo de função'],
      realWorldExample: 'def funcao():\\n  corpo_indentado.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'erro', 'indentação'],
    xpReward: 50,
    professionalContext: 'Corrigir erros de sintaxe.',
    militaryApplication: 'Formatar código corretamente.',
  },
  {
    id: 'eng-error-exp-3',
    lessonId: 'eng-read-4',
    type: 'output-prediction',
    question: '"RecursionError: maximum recursion depth exceeded". What happened?',
    socraticHints: [
      { level: 1, type: 'why', question: 'O que é recursão infinita?', hint: 'Função que chama a si mesma sem parar.' },
    ],
    options: ['Function calls itself infinitely without base case', 'Loop too slow', 'Too many variables', 'Memory full'],
    correctAnswer: 0,
    explanation: {
      why: 'Recursão sem caso base = infinita.',
      whatFor: 'Implementar condição de parada.',
      how: 'def f(): return f() - nunca para.',
      commonMistakes: ['Esquecer caso base', 'Caso base nunca alcançado'],
      realWorldExample: 'Fatorial sem if n == 0: return 1.',
    },
    difficulty: 'intermediate',
    tags: ['inglês', 'erro', 'recursão'],
    xpReward: 75,
    professionalContext: 'Debugging de algoritmos.',
    militaryApplication: 'Evitar loops infinitos em sistemas.',
  },
  {
    id: 'eng-doc-exp-1',
    lessonId: 'eng-read-2',
    type: 'output-prediction',
    question: '"See also: DataFrame.merge(), DataFrame.join()". What section is this?',
    socraticHints: [
      { level: 1, type: 'what-for', question: 'Para que serve "See also"?', hint: 'Indicar funções relacionadas.' },
    ],
    options: ['Related functions/methods for reference', 'Error messages', 'Parameters', 'Return values'],
    correctAnswer: 0,
    explanation: {
      why: 'See also = veja também.',
      whatFor: 'Descobrir alternativas ou funções relacionadas.',
      how: 'Documentação conecta conceitos similares.',
      commonMistakes: ['Ignorar seção See also', 'Não explorar alternativas'],
      realWorldExample: 'Descobrir que concat também existe.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'documentação', 'navegação'],
    xpReward: 40,
    professionalContext: 'Explorar documentação eficientemente.',
    militaryApplication: 'Encontrar procedimentos alternativos.',
  },
  {
    id: 'eng-doc-exp-2',
    lessonId: 'eng-read-2',
    type: 'output-prediction',
    question: '"Warning: This operation is performed in-place and modifies the original object." What should you be careful about?',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que "in-place" é um warning?', hint: 'Dados originais serão alterados.' },
    ],
    options: ['The original data will be changed, make a copy if needed', 'The operation is slow', 'You need admin rights', 'Internet connection required'],
    correctAnswer: 0,
    explanation: {
      why: 'In-place modifica original.',
      whatFor: 'Decidir se precisa de cópia antes.',
      how: 'Se quiser preservar: copia = original.copy().',
      commonMistakes: ['Perder dados originais', 'Não ler warnings'],
      realWorldExample: 'df.drop(col, inplace=True) altera df.',
    },
    difficulty: 'intermediate',
    tags: ['inglês', 'documentação', 'warning'],
    xpReward: 60,
    professionalContext: 'Preservar dados importantes.',
    militaryApplication: 'Backup antes de alterações críticas.',
  },
  {
    id: 'eng-doc-exp-3',
    lessonId: 'eng-read-2',
    type: 'multiple-choice',
    question: 'In docs, "Parameters" vs "Returns" - what do they describe?',
    socraticHints: [
      { level: 1, type: 'how', question: 'Parameters são entrada ou saída?', hint: 'Entrada - o que você passa.' },
    ],
    options: ['Parameters: inputs you provide. Returns: output you get', 'Both describe inputs', 'Both describe outputs', 'Parameters are optional features'],
    correctAnswer: 0,
    explanation: {
      why: 'Padrão universal de documentação.',
      whatFor: 'Saber o que passar e o que esperar.',
      how: 'Parameters = argumentos. Returns = retorno.',
      commonMistakes: ['Confundir entrada com saída', 'Ignorar tipo de retorno'],
      realWorldExample: 'Toda docstring segue esse padrão.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'documentação', 'estrutura'],
    xpReward: 40,
    professionalContext: 'Ler qualquer documentação.',
    militaryApplication: 'Entender manuais técnicos.',
  },
  {
    id: 'eng-vocab-exp-6',
    lessonId: 'eng-read-1',
    type: 'multiple-choice',
    question: 'What does "verbose" mean in function parameters?',
    socraticHints: [
      { level: 1, type: 'what-for', question: 'Para que serve verbose=True?', hint: 'Mais informações de saída.' },
    ],
    options: ['Show detailed output/logs', 'Run faster', 'Use less memory', 'Ignore errors'],
    correctAnswer: 0,
    explanation: {
      why: 'Verbose = detalhado, falante.',
      whatFor: 'Debug e monitoramento.',
      how: 'verbose=True mostra progresso e detalhes.',
      commonMistakes: ['Deixar verbose em produção', 'Não usar para debug'],
      realWorldExample: 'model.fit(verbose=1) mostra progresso.',
    },
    difficulty: 'beginner',
    tags: ['inglês', 'vocabulário', 'parâmetros'],
    xpReward: 50,
    professionalContext: 'Debugging e monitoramento.',
    militaryApplication: 'Logs detalhados para análise.',
  },
  {
    id: 'eng-vocab-exp-7',
    lessonId: 'eng-read-1',
    type: 'multiple-choice',
    question: 'What is a "callback" in programming?',
    socraticHints: [
      { level: 1, type: 'how', question: 'Quando um callback é executado?', hint: 'Quando um evento ocorre.' },
    ],
    options: ['A function passed as argument to be called later', 'A return value', 'An error message', 'A variable type'],
    correctAnswer: 0,
    explanation: {
      why: 'Callback = função chamada de volta.',
      whatFor: 'Executar código quando algo acontece.',
      how: 'button.onClick(callback) - callback executado no clique.',
      commonMistakes: ['Confundir com retorno', 'Não entender assincronicidade'],
      realWorldExample: 'Event handlers em interfaces.',
    },
    difficulty: 'intermediate',
    tags: ['inglês', 'vocabulário', 'conceitos'],
    xpReward: 75,
    professionalContext: 'Programação assíncrona.',
    militaryApplication: 'Sistemas de alerta por evento.',
  },
  {
    id: 'eng-vocab-exp-8',
    lessonId: 'eng-read-1',
    type: 'multiple-choice',
    question: 'What does "overhead" mean in performance context?',
    socraticHints: [
      { level: 1, type: 'why', question: 'Por que overhead é negativo?', hint: 'Recursos gastos além do necessário.' },
    ],
    options: ['Extra cost/resources beyond the main operation', 'Maximum performance', 'Error rate', 'Storage space'],
    correctAnswer: 0,
    explanation: {
      why: 'Overhead = custo adicional.',
      whatFor: 'Identificar ineficiências.',
      how: 'Loop com print tem overhead de I/O.',
      commonMistakes: ['Ignorar overhead pequeno que acumula', 'Otimização prematura'],
      realWorldExample: 'Overhead de chamadas de função.',
    },
    difficulty: 'intermediate',
    tags: ['inglês', 'vocabulário', 'performance'],
    xpReward: 60,
    professionalContext: 'Otimização de sistemas.',
    militaryApplication: 'Eficiência operacional.',
  },
];
